"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const qs=require("events"),Mn=require("crypto"),Yc=require("tty"),Zi=require("util"),ea=require("os"),pt=require("fs"),Bn=require("stream"),nn=require("url"),Xc=require("string_decoder"),zc=require("constants"),Hs=require("assert"),le=require("path"),Ze=require("electron"),Or=require("child_process"),js=require("zlib"),Kc=require("http");var Be=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},li={},ui={},Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.CancellationError=Ot.CancellationToken=void 0;const Jc=qs;class Qc extends Jc.EventEmitter{constructor(t){super(),this.parentCancelHandler=null,this._parent=null,this._cancelled=!1,t!=null&&(this.parent=t)}get cancelled(){return this._cancelled||this._parent!=null&&this._parent.cancelled}set parent(t){this.removeParentCancelHandler(),this._parent=t,this.parentCancelHandler=()=>this.cancel(),this._parent.onCancel(this.parentCancelHandler)}cancel(){this._cancelled=!0,this.emit("cancel")}onCancel(t){this.cancelled?t():this.once("cancel",t)}createPromise(t){if(this.cancelled)return Promise.reject(new Mi);const n=()=>{if(r!=null)try{this.removeListener("cancel",r),r=null}catch{}};let r=null;return new Promise((i,a)=>{let o=null;if(r=()=>{try{o!=null&&(o(),o=null)}finally{a(new Mi)}},this.cancelled){r();return}this.onCancel(r),t(i,a,s=>{o=s})}).then(i=>(n(),i)).catch(i=>{throw n(),i})}removeParentCancelHandler(){const t=this._parent;t!=null&&this.parentCancelHandler!=null&&(t.removeListener("cancel",this.parentCancelHandler),this.parentCancelHandler=null)}dispose(){try{this.removeParentCancelHandler()}finally{this.removeAllListeners(),this._parent=null}}}Ot.CancellationToken=Qc;class Mi extends Error{constructor(){super("cancelled")}}Ot.CancellationError=Mi;var re={},Bi={exports:{}},ar={exports:{}},ci,Ga;function Zc(){if(Ga)return ci;Ga=1;var e=1e3,t=e*60,n=t*60,r=n*24,i=r*7,a=r*365.25;ci=function(c,u){u=u||{};var d=typeof c;if(d==="string"&&c.length>0)return o(c);if(d==="number"&&isFinite(c))return u.long?l(c):s(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function o(c){if(c=String(c),!(c.length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(c);if(u){var d=parseFloat(u[1]),p=(u[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return d*a;case"weeks":case"week":case"w":return d*i;case"days":case"day":case"d":return d*r;case"hours":case"hour":case"hrs":case"hr":case"h":return d*n;case"minutes":case"minute":case"mins":case"min":case"m":return d*t;case"seconds":case"second":case"secs":case"sec":case"s":return d*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function s(c){var u=Math.abs(c);return u>=r?Math.round(c/r)+"d":u>=n?Math.round(c/n)+"h":u>=t?Math.round(c/t)+"m":u>=e?Math.round(c/e)+"s":c+"ms"}function l(c){var u=Math.abs(c);return u>=r?h(c,u,r,"day"):u>=n?h(c,u,n,"hour"):u>=t?h(c,u,t,"minute"):u>=e?h(c,u,e,"second"):c+" ms"}function h(c,u,d,p){var y=u>=d*1.5;return Math.round(c/d)+" "+p+(y?"s":"")}return ci}var fi,Va;function Gs(){if(Va)return fi;Va=1;function e(t){r.debug=r,r.default=r,r.coerce=h,r.disable=o,r.enable=a,r.enabled=s,r.humanize=Zc(),r.destroy=c,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function n(u){let d=0;for(let p=0;p<u.length;p++)d=(d<<5)-d+u.charCodeAt(p),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=n;function r(u){let d,p=null,y,w;function A(...b){if(!A.enabled)return;const E=A,C=Number(new Date),R=C-(d||C);E.diff=R,E.prev=d,E.curr=C,d=C,b[0]=r.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let H=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(T,I)=>{if(T==="%%")return"%";H++;const g=r.formatters[I];if(typeof g=="function"){const k=b[H];T=g.call(E,k),b.splice(H,1),H--}return T}),r.formatArgs.call(E,b),(E.log||r.log).apply(E,b)}return A.namespace=u,A.useColors=r.useColors(),A.color=r.selectColor(u),A.extend=i,A.destroy=r.destroy,Object.defineProperty(A,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(y!==r.namespaces&&(y=r.namespaces,w=r.enabled(u)),w),set:b=>{p=b}}),typeof r.init=="function"&&r.init(A),A}function i(u,d){const p=r(this.namespace+(typeof d>"u"?":":d)+u);return p.log=this.log,p}function a(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let d;const p=(typeof u=="string"?u:"").split(/[\s,]+/),y=p.length;for(d=0;d<y;d++)p[d]&&(u=p[d].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.slice(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function o(){const u=[...r.names.map(l),...r.skips.map(l).map(d=>"-"+d)].join(",");return r.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let d,p;for(d=0,p=r.skips.length;d<p;d++)if(r.skips[d].test(u))return!1;for(d=0,p=r.names.length;d<p;d++)if(r.names[d].test(u))return!0;return!1}function l(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function h(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return fi=e,fi}var Wa;function ef(){return Wa||(Wa=1,function(e,t){t.formatArgs=r,t.save=i,t.load=a,t.useColors=n,t.storage=o(),t.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const h="color: "+this.color;l.splice(1,0,h,"color: inherit");let c=0,u=0;l[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(c++,d==="%c"&&(u=c))}),l.splice(u,0,h)}t.log=console.debug||console.log||(()=>{});function i(l){try{l?t.storage.setItem("debug",l):t.storage.removeItem("debug")}catch{}}function a(){let l;try{l=t.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}function o(){try{return localStorage}catch{}}e.exports=Gs()(t);const{formatters:s}=e.exports;s.j=function(l){try{return JSON.stringify(l)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}}}(ar,ar.exports)),ar.exports}var or={exports:{}},di,Ya;function tf(){return Ya||(Ya=1,di=(e,t)=>{t=t||process.argv;const n=e.startsWith("-")?"":e.length===1?"-":"--",r=t.indexOf(n+e),i=t.indexOf("--");return r!==-1&&(i===-1?!0:r<i)}),di}var hi,Xa;function nf(){if(Xa)return hi;Xa=1;const e=ea,t=tf(),n=process.env;let r;t("no-color")||t("no-colors")||t("color=false")?r=!1:(t("color")||t("colors")||t("color=true")||t("color=always"))&&(r=!0),"FORCE_COLOR"in n&&(r=n.FORCE_COLOR.length===0||parseInt(n.FORCE_COLOR,10)!==0);function i(s){return s===0?!1:{level:s,hasBasic:!0,has256:s>=2,has16m:s>=3}}function a(s){if(r===!1)return 0;if(t("color=16m")||t("color=full")||t("color=truecolor"))return 3;if(t("color=256"))return 2;if(s&&!s.isTTY&&r!==!0)return 0;const l=r?1:0;if(process.platform==="win32"){const h=e.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(h[0])>=10&&Number(h[2])>=10586?Number(h[2])>=14931?3:2:1}if("CI"in n)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(h=>h in n)||n.CI_NAME==="codeship"?1:l;if("TEAMCITY_VERSION"in n)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(n.TEAMCITY_VERSION)?1:0;if(n.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in n){const h=parseInt((n.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(n.TERM_PROGRAM){case"iTerm.app":return h>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(n.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(n.TERM)||"COLORTERM"in n?1:(n.TERM==="dumb",l)}function o(s){const l=a(s);return i(l)}return hi={supportsColor:o,stdout:o(process.stdout),stderr:o(process.stderr)},hi}var za;function rf(){return za||(za=1,function(e,t){const n=Yc,r=Zi;t.init=c,t.log=s,t.formatArgs=a,t.save=l,t.load=h,t.useColors=i,t.destroy=r.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const d=nf();d&&(d.stderr||d).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}t.inspectOpts=Object.keys(process.env).filter(d=>/^debug_/i.test(d)).reduce((d,p)=>{const y=p.substring(6).toLowerCase().replace(/_([a-z])/g,(A,b)=>b.toUpperCase());let w=process.env[p];return/^(yes|on|true|enabled)$/i.test(w)?w=!0:/^(no|off|false|disabled)$/i.test(w)?w=!1:w==="null"?w=null:w=Number(w),d[y]=w,d},{});function i(){return"colors"in t.inspectOpts?!!t.inspectOpts.colors:n.isatty(process.stderr.fd)}function a(d){const{namespace:p,useColors:y}=this;if(y){const w=this.color,A="\x1B[3"+(w<8?w:"8;5;"+w),b=`  ${A};1m${p} \x1B[0m`;d[0]=b+d[0].split(`
`).join(`
`+b),d.push(A+"m+"+e.exports.humanize(this.diff)+"\x1B[0m")}else d[0]=o()+p+" "+d[0]}function o(){return t.inspectOpts.hideDate?"":new Date().toISOString()+" "}function s(...d){return process.stderr.write(r.format(...d)+`
`)}function l(d){d?process.env.DEBUG=d:delete process.env.DEBUG}function h(){return process.env.DEBUG}function c(d){d.inspectOpts={};const p=Object.keys(t.inspectOpts);for(let y=0;y<p.length;y++)d.inspectOpts[p[y]]=t.inspectOpts[p[y]]}e.exports=Gs()(t);const{formatters:u}=e.exports;u.o=function(d){return this.inspectOpts.colors=this.useColors,r.inspect(d,this.inspectOpts).split(`
`).map(p=>p.trim()).join(" ")},u.O=function(d){return this.inspectOpts.colors=this.useColors,r.inspect(d,this.inspectOpts)}}(or,or.exports)),or.exports}typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Bi.exports=ef():Bi.exports=rf();var af=Bi.exports,qn={};Object.defineProperty(qn,"__esModule",{value:!0});qn.ProgressCallbackTransform=void 0;const of=Bn;class sf extends of.Transform{constructor(t,n,r){super(),this.total=t,this.cancellationToken=n,this.onProgress=r,this.start=Date.now(),this.transferred=0,this.delta=0,this.nextUpdate=this.start+1e3}_transform(t,n,r){if(this.cancellationToken.cancelled){r(new Error("cancelled"),null);return}this.transferred+=t.length,this.delta+=t.length;const i=Date.now();i>=this.nextUpdate&&this.transferred!==this.total&&(this.nextUpdate=i+1e3,this.onProgress({total:this.total,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.total*100,bytesPerSecond:Math.round(this.transferred/((i-this.start)/1e3))}),this.delta=0),r(null,t)}_flush(t){if(this.cancellationToken.cancelled){t(new Error("cancelled"));return}this.onProgress({total:this.total,delta:this.delta,transferred:this.total,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,t(null)}}qn.ProgressCallbackTransform=sf;var Ka;function lf(){if(Ka)return re;Ka=1,Object.defineProperty(re,"__esModule",{value:!0}),re.safeStringifyJson=re.configureRequestOptions=re.safeGetHeader=re.DigestTransform=re.configureRequestUrl=re.configureRequestOptionsFromUrl=re.HttpExecutor=re.parseJson=re.HttpError=re.createHttpError=void 0;const e=Mn,t=af,n=pt,r=Bn,i=nn,a=Ot,o=ce(),s=qn,l=(0,t.default)("electron-builder");function h(x,T=null){return new u(x.statusCode||-1,`${x.statusCode} ${x.statusMessage}`+(T==null?"":`
`+JSON.stringify(T,null,"  "))+`
Headers: `+H(x.headers),T)}re.createHttpError=h;const c=new Map([[429,"Too many requests"],[400,"Bad request"],[403,"Forbidden"],[404,"Not found"],[405,"Method not allowed"],[406,"Not acceptable"],[408,"Request timeout"],[413,"Request entity too large"],[500,"Internal server error"],[502,"Bad gateway"],[503,"Service unavailable"],[504,"Gateway timeout"],[505,"HTTP version not supported"]]);class u extends Error{constructor(T,I=`HTTP error: ${c.get(T)||T}`,g=null){super(I),this.statusCode=T,this.description=g,this.name="HttpError",this.code=`HTTP_ERROR_${T}`}isServerError(){return this.statusCode>=500&&this.statusCode<=599}}re.HttpError=u;function d(x){return x.then(T=>T==null||T.length===0?null:JSON.parse(T))}re.parseJson=d;class p{constructor(){this.maxRedirects=10}request(T,I=new a.CancellationToken,g){R(T);const k=g==null?void 0:JSON.stringify(g),q=k?Buffer.from(k):void 0;if(q!=null){l(k);const{headers:M,...N}=T;T={method:"post",headers:{"Content-Type":"application/json","Content-Length":q.length,...M},...N}}return this.doApiRequest(T,I,M=>M.end(q))}doApiRequest(T,I,g,k=0){return l.enabled&&l(`Request: ${H(T)}`),I.createPromise((q,M,N)=>{const $=this.createRequest(T,F=>{try{this.handleResponse(F,T,I,q,M,k,g)}catch(U){M(U)}});this.addErrorAndTimeoutHandlers($,M,T.timeout),this.addRedirectHandlers($,T,M,k,F=>{this.doApiRequest(F,I,g,k).then(q).catch(M)}),g($,M),N(()=>$.abort())})}addRedirectHandlers(T,I,g,k,q){}addErrorAndTimeoutHandlers(T,I,g=60*1e3){this.addTimeOutHandler(T,I,g),T.on("error",I),T.on("aborted",()=>{I(new Error("Request has been aborted by the server"))})}handleResponse(T,I,g,k,q,M,N){var $;if(l.enabled&&l(`Response: ${T.statusCode} ${T.statusMessage}, request options: ${H(I)}`),T.statusCode===404){q(h(T,`method: ${I.method||"GET"} url: ${I.protocol||"https:"}//${I.hostname}${I.port?`:${I.port}`:""}${I.path}

Please double check that your authentication token is correct. Due to security reasons, actual status maybe not reported, but 404.
`));return}else if(T.statusCode===204){k();return}const F=($=T.statusCode)!==null&&$!==void 0?$:0,U=F>=300&&F<400,O=E(T,"location");if(U&&O!=null){if(M>this.maxRedirects){q(this.createMaxRedirectError());return}this.doApiRequest(p.prepareRedirectUrlOptions(O,I),g,N,M).then(k).catch(q);return}T.setEncoding("utf8");let B="";T.on("error",q),T.on("data",L=>B+=L),T.on("end",()=>{try{if(T.statusCode!=null&&T.statusCode>=400){const L=E(T,"content-type"),Y=L!=null&&(Array.isArray(L)?L.find(V=>V.includes("json"))!=null:L.includes("json"));q(h(T,`method: ${I.method||"GET"} url: ${I.protocol||"https:"}//${I.hostname}${I.port?`:${I.port}`:""}${I.path}

          Data:
          ${Y?JSON.stringify(JSON.parse(B)):B}
          `))}else k(B.length===0?null:B)}catch(L){q(L)}})}async downloadToBuffer(T,I){return await I.cancellationToken.createPromise((g,k,q)=>{const M=[],N={headers:I.headers||void 0,redirect:"manual"};w(T,N),R(N),this.doDownload(N,{destination:null,options:I,onCancel:q,callback:$=>{$==null?g(Buffer.concat(M)):k($)},responseHandler:($,F)=>{let U=0;$.on("data",O=>{if(U+=O.length,U>524288e3){F(new Error("Maximum allowed size is 500 MB"));return}M.push(O)}),$.on("end",()=>{F(null)})}},0)})}doDownload(T,I,g){const k=this.createRequest(T,q=>{if(q.statusCode>=400){I.callback(new Error(`Cannot download "${T.protocol||"https:"}//${T.hostname}${T.path}", status ${q.statusCode}: ${q.statusMessage}`));return}q.on("error",I.callback);const M=E(q,"location");if(M!=null){g<this.maxRedirects?this.doDownload(p.prepareRedirectUrlOptions(M,T),I,g++):I.callback(this.createMaxRedirectError());return}I.responseHandler==null?C(I,q):I.responseHandler(q,I.callback)});this.addErrorAndTimeoutHandlers(k,I.callback,T.timeout),this.addRedirectHandlers(k,T,I.callback,g,q=>{this.doDownload(q,I,g++)}),k.end()}createMaxRedirectError(){return new Error(`Too many redirects (> ${this.maxRedirects})`)}addTimeOutHandler(T,I,g){T.on("socket",k=>{k.setTimeout(g,()=>{T.abort(),I(new Error("Request timed out"))})})}static prepareRedirectUrlOptions(T,I){const g=y(T,{...I}),k=g.headers;if(k!=null&&k.authorization){const q=new i.URL(T);(q.hostname.endsWith(".amazonaws.com")||q.searchParams.has("X-Amz-Credential"))&&delete k.authorization}return g}static retryOnServerError(T,I=3){for(let g=0;;g++)try{return T()}catch(k){if(g<I&&(k instanceof u&&k.isServerError()||k.code==="EPIPE"))continue;throw k}}}re.HttpExecutor=p;function y(x,T){const I=R(T);return w(new i.URL(x),I),I}re.configureRequestOptionsFromUrl=y;function w(x,T){T.protocol=x.protocol,T.hostname=x.hostname,x.port?T.port=x.port:T.port&&delete T.port,T.path=x.pathname+x.search}re.configureRequestUrl=w;class A extends r.Transform{constructor(T,I="sha512",g="base64"){super(),this.expected=T,this.algorithm=I,this.encoding=g,this._actual=null,this.isValidateOnEnd=!0,this.digester=(0,e.createHash)(I)}get actual(){return this._actual}_transform(T,I,g){this.digester.update(T),g(null,T)}_flush(T){if(this._actual=this.digester.digest(this.encoding),this.isValidateOnEnd)try{this.validate()}catch(I){T(I);return}T(null)}validate(){if(this._actual==null)throw(0,o.newError)("Not finished yet","ERR_STREAM_NOT_FINISHED");if(this._actual!==this.expected)throw(0,o.newError)(`${this.algorithm} checksum mismatch, expected ${this.expected}, got ${this._actual}`,"ERR_CHECKSUM_MISMATCH");return null}}re.DigestTransform=A;function b(x,T,I){return x!=null&&T!=null&&x!==T?(I(new Error(`checksum mismatch: expected ${T} but got ${x} (X-Checksum-Sha2 header)`)),!1):!0}function E(x,T){const I=x.headers[T];return I==null?null:Array.isArray(I)?I.length===0?null:I[I.length-1]:I}re.safeGetHeader=E;function C(x,T){if(!b(E(T,"X-Checksum-Sha2"),x.options.sha2,x.callback))return;const I=[];if(x.options.onProgress!=null){const M=E(T,"content-length");M!=null&&I.push(new s.ProgressCallbackTransform(parseInt(M,10),x.options.cancellationToken,x.options.onProgress))}const g=x.options.sha512;g!=null?I.push(new A(g,"sha512",g.length===128&&!g.includes("+")&&!g.includes("Z")&&!g.includes("=")?"hex":"base64")):x.options.sha2!=null&&I.push(new A(x.options.sha2,"sha256","hex"));const k=(0,n.createWriteStream)(x.destination);I.push(k);let q=T;for(const M of I)M.on("error",N=>{k.close(),x.options.cancellationToken.cancelled||x.callback(N)}),q=q.pipe(M);k.on("finish",()=>{k.close(x.callback)})}function R(x,T,I){I!=null&&(x.method=I),x.headers={...x.headers};const g=x.headers;return T!=null&&(g.authorization=T.startsWith("Basic")||T.startsWith("Bearer")?T:`token ${T}`),g["User-Agent"]==null&&(g["User-Agent"]="electron-builder"),(I==null||I==="GET"||g["Cache-Control"]==null)&&(g["Cache-Control"]="no-cache"),x.protocol==null&&process.versions.electron!=null&&(x.protocol="https:"),x}re.configureRequestOptions=R;function H(x,T){return JSON.stringify(x,(I,g)=>I.endsWith("Authorization")||I.endsWith("authorization")||I.endsWith("Password")||I.endsWith("PASSWORD")||I.endsWith("Token")||I.includes("password")||I.includes("token")||T!=null&&T.has(I)?"<stripped sensitive data>":g,2)}return re.safeStringifyJson=H,re}var zt={};Object.defineProperty(zt,"__esModule",{value:!0});zt.getS3LikeProviderBaseUrl=zt.githubUrl=void 0;function uf(e,t="github.com"){return`${e.protocol||"https"}://${e.host||t}`}zt.githubUrl=uf;function cf(e){const t=e.provider;if(t==="s3")return ff(e);if(t==="spaces")return df(e);throw new Error(`Not supported provider: ${t}`)}zt.getS3LikeProviderBaseUrl=cf;function ff(e){let t;if(e.accelerate==!0)t=`https://${e.bucket}.s3-accelerate.amazonaws.com`;else if(e.endpoint!=null)t=`${e.endpoint}/${e.bucket}`;else if(e.bucket.includes(".")){if(e.region==null)throw new Error(`Bucket name "${e.bucket}" includes a dot, but S3 region is missing`);e.region==="us-east-1"?t=`https://s3.amazonaws.com/${e.bucket}`:t=`https://s3-${e.region}.amazonaws.com/${e.bucket}`}else e.region==="cn-north-1"?t=`https://${e.bucket}.s3.${e.region}.amazonaws.com.cn`:t=`https://${e.bucket}.s3.amazonaws.com`;return Vs(t,e.path)}function Vs(e,t){return t!=null&&t.length>0&&(t.startsWith("/")||(e+="/"),e+=t),e}function df(e){if(e.name==null)throw new Error("name is missing");if(e.region==null)throw new Error("region is missing");return Vs(`https://${e.name}.${e.region}.digitaloceanspaces.com`,e.path)}var Nr={};Object.defineProperty(Nr,"__esModule",{value:!0});Nr.parseDn=void 0;function hf(e){let t=!1,n=null,r="",i=0;e=e.trim();const a=new Map;for(let o=0;o<=e.length;o++){if(o===e.length){n!==null&&a.set(n,r);break}const s=e[o];if(t){if(s==='"'){t=!1;continue}}else{if(s==='"'){t=!0;continue}if(s==="\\"){o++;const l=parseInt(e.slice(o,o+2),16);Number.isNaN(l)?r+=e[o]:(o++,r+=String.fromCharCode(l));continue}if(n===null&&s==="="){n=r,r="";continue}if(s===","||s===";"||s==="+"){n!==null&&a.set(n,r),n=null,r="";continue}}if(s===" "&&!t){if(r.length===0)continue;if(o>i){let l=o;for(;e[l]===" ";)l++;i=l}if(i>=e.length||e[i]===","||e[i]===";"||n===null&&e[i]==="="||n!==null&&e[i]==="+"){o=i-1;continue}}r+=s}return a}Nr.parseDn=hf;var _t={},Ja;function pf(){if(Ja)return _t;Ja=1,Object.defineProperty(_t,"__esModule",{value:!0}),_t.nil=_t.UUID=void 0;const e=Mn,t=ce(),n="options.name must be either a string or a Buffer",r=(0,e.randomBytes)(16);r[0]=r[0]|1;const i={},a=[];for(let u=0;u<256;u++){const d=(u+256).toString(16).substr(1);i[d]=u,a[u]=d}class o{constructor(d){this.ascii=null,this.binary=null;const p=o.check(d);if(!p)throw new Error("not a UUID");this.version=p.version,p.format==="ascii"?this.ascii=d:this.binary=d}static v5(d,p){return h(d,"sha1",80,p)}toString(){return this.ascii==null&&(this.ascii=c(this.binary)),this.ascii}inspect(){return`UUID v${this.version} ${this.toString()}`}static check(d,p=0){if(typeof d=="string")return d=d.toLowerCase(),/^[a-f0-9]{8}(-[a-f0-9]{4}){3}-([a-f0-9]{12})$/.test(d)?d==="00000000-0000-0000-0000-000000000000"?{version:void 0,variant:"nil",format:"ascii"}:{version:(i[d[14]+d[15]]&240)>>4,variant:s((i[d[19]+d[20]]&224)>>5),format:"ascii"}:!1;if(Buffer.isBuffer(d)){if(d.length<p+16)return!1;let y=0;for(;y<16&&d[p+y]===0;y++);return y===16?{version:void 0,variant:"nil",format:"binary"}:{version:(d[p+6]&240)>>4,variant:s((d[p+8]&224)>>5),format:"binary"}}throw(0,t.newError)("Unknown type of uuid","ERR_UNKNOWN_UUID_TYPE")}static parse(d){const p=Buffer.allocUnsafe(16);let y=0;for(let w=0;w<16;w++)p[w]=i[d[y++]+d[y++]],(w===3||w===5||w===7||w===9)&&(y+=1);return p}}_t.UUID=o,o.OID=o.parse("6ba7b812-9dad-11d1-80b4-00c04fd430c8");function s(u){switch(u){case 0:case 1:case 3:return"ncs";case 4:case 5:return"rfc4122";case 6:return"microsoft";default:return"future"}}var l;(function(u){u[u.ASCII=0]="ASCII",u[u.BINARY=1]="BINARY",u[u.OBJECT=2]="OBJECT"})(l||(l={}));function h(u,d,p,y,w=l.ASCII){const A=(0,e.createHash)(d);if(typeof u!="string"&&!Buffer.isBuffer(u))throw(0,t.newError)(n,"ERR_INVALID_UUID_NAME");A.update(y),A.update(u);const E=A.digest();let C;switch(w){case l.BINARY:E[6]=E[6]&15|p,E[8]=E[8]&63|128,C=E;break;case l.OBJECT:E[6]=E[6]&15|p,E[8]=E[8]&63|128,C=new o(E);break;default:C=a[E[0]]+a[E[1]]+a[E[2]]+a[E[3]]+"-"+a[E[4]]+a[E[5]]+"-"+a[E[6]&15|p]+a[E[7]]+"-"+a[E[8]&63|128]+a[E[9]]+"-"+a[E[10]]+a[E[11]]+a[E[12]]+a[E[13]]+a[E[14]]+a[E[15]];break}return C}function c(u){return a[u[0]]+a[u[1]]+a[u[2]]+a[u[3]]+"-"+a[u[4]]+a[u[5]]+"-"+a[u[6]]+a[u[7]]+"-"+a[u[8]]+a[u[9]]+"-"+a[u[10]]+a[u[11]]+a[u[12]]+a[u[13]]+a[u[14]]+a[u[15]]}return _t.nil=new o("00000000-0000-0000-0000-000000000000"),_t}var At={},Ws={};(function(e){(function(t){t.parser=function(m,f){return new r(m,f)},t.SAXParser=r,t.SAXStream=c,t.createStream=h,t.MAX_BUFFER_LENGTH=64*1024;var n=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function r(m,f){if(!(this instanceof r))return new r(m,f);var D=this;a(D),D.q=D.c="",D.bufferCheckPosition=t.MAX_BUFFER_LENGTH,D.opt=f||{},D.opt.lowercase=D.opt.lowercase||D.opt.lowercasetags,D.looseCase=D.opt.lowercase?"toLowerCase":"toUpperCase",D.tags=[],D.closed=D.closedRoot=D.sawRoot=!1,D.tag=D.error=null,D.strict=!!m,D.noscript=!!(m||D.opt.noscript),D.state=g.BEGIN,D.strictEntities=D.opt.strictEntities,D.ENTITIES=D.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),D.attribList=[],D.opt.xmlns&&(D.ns=Object.create(w)),D.trackPosition=D.opt.position!==!1,D.trackPosition&&(D.position=D.line=D.column=0),q(D,"onready")}Object.create||(Object.create=function(m){function f(){}f.prototype=m;var D=new f;return D}),Object.keys||(Object.keys=function(m){var f=[];for(var D in m)m.hasOwnProperty(D)&&f.push(D);return f});function i(m){for(var f=Math.max(t.MAX_BUFFER_LENGTH,10),D=0,S=0,z=n.length;S<z;S++){var te=m[n[S]].length;if(te>f)switch(n[S]){case"textNode":N(m);break;case"cdata":M(m,"oncdata",m.cdata),m.cdata="";break;case"script":M(m,"onscript",m.script),m.script="";break;default:F(m,"Max buffer length exceeded: "+n[S])}D=Math.max(D,te)}var ae=t.MAX_BUFFER_LENGTH-D;m.bufferCheckPosition=ae+m.position}function a(m){for(var f=0,D=n.length;f<D;f++)m[n[f]]=""}function o(m){N(m),m.cdata!==""&&(M(m,"oncdata",m.cdata),m.cdata=""),m.script!==""&&(M(m,"onscript",m.script),m.script="")}r.prototype={end:function(){U(this)},write:sn,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var s;try{s=require("stream").Stream}catch{s=function(){}}s||(s=function(){});var l=t.EVENTS.filter(function(m){return m!=="error"&&m!=="end"});function h(m,f){return new c(m,f)}function c(m,f){if(!(this instanceof c))return new c(m,f);s.apply(this),this._parser=new r(m,f),this.writable=!0,this.readable=!0;var D=this;this._parser.onend=function(){D.emit("end")},this._parser.onerror=function(S){D.emit("error",S),D._parser.error=null},this._decoder=null,l.forEach(function(S){Object.defineProperty(D,"on"+S,{get:function(){return D._parser["on"+S]},set:function(z){if(!z)return D.removeAllListeners(S),D._parser["on"+S]=z,z;D.on(S,z)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(s.prototype,{constructor:{value:c}}),c.prototype.write=function(m){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(m)){if(!this._decoder){var f=Xc.StringDecoder;this._decoder=new f("utf8")}m=this._decoder.write(m)}return this._parser.write(m.toString()),this.emit("data",m),!0},c.prototype.end=function(m){return m&&m.length&&this.write(m),this._parser.end(),!0},c.prototype.on=function(m,f){var D=this;return!D._parser["on"+m]&&l.indexOf(m)!==-1&&(D._parser["on"+m]=function(){var S=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);S.splice(0,0,m),D.emit.apply(D,S)}),s.prototype.on.call(D,m,f)};var u="[CDATA[",d="DOCTYPE",p="http://www.w3.org/XML/1998/namespace",y="http://www.w3.org/2000/xmlns/",w={xml:p,xmlns:y},A=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,b=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,E=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,C=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function R(m){return m===" "||m===`
`||m==="\r"||m==="	"}function H(m){return m==='"'||m==="'"}function x(m){return m===">"||R(m)}function T(m,f){return m.test(f)}function I(m,f){return!T(m,f)}var g=0;t.STATE={BEGIN:g++,BEGIN_WHITESPACE:g++,TEXT:g++,TEXT_ENTITY:g++,OPEN_WAKA:g++,SGML_DECL:g++,SGML_DECL_QUOTED:g++,DOCTYPE:g++,DOCTYPE_QUOTED:g++,DOCTYPE_DTD:g++,DOCTYPE_DTD_QUOTED:g++,COMMENT_STARTING:g++,COMMENT:g++,COMMENT_ENDING:g++,COMMENT_ENDED:g++,CDATA:g++,CDATA_ENDING:g++,CDATA_ENDING_2:g++,PROC_INST:g++,PROC_INST_BODY:g++,PROC_INST_ENDING:g++,OPEN_TAG:g++,OPEN_TAG_SLASH:g++,ATTRIB:g++,ATTRIB_NAME:g++,ATTRIB_NAME_SAW_WHITE:g++,ATTRIB_VALUE:g++,ATTRIB_VALUE_QUOTED:g++,ATTRIB_VALUE_CLOSED:g++,ATTRIB_VALUE_UNQUOTED:g++,ATTRIB_VALUE_ENTITY_Q:g++,ATTRIB_VALUE_ENTITY_U:g++,CLOSE_TAG:g++,CLOSE_TAG_SAW_WHITE:g++,SCRIPT:g++,SCRIPT_ENDING:g++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(m){var f=t.ENTITIES[m],D=typeof f=="number"?String.fromCharCode(f):f;t.ENTITIES[m]=D});for(var k in t.STATE)t.STATE[t.STATE[k]]=k;g=t.STATE;function q(m,f,D){m[f]&&m[f](D)}function M(m,f,D){m.textNode&&N(m),q(m,f,D)}function N(m){m.textNode=$(m.opt,m.textNode),m.textNode&&q(m,"ontext",m.textNode),m.textNode=""}function $(m,f){return m.trim&&(f=f.trim()),m.normalize&&(f=f.replace(/\s+/g," ")),f}function F(m,f){return N(m),m.trackPosition&&(f+=`
Line: `+m.line+`
Column: `+m.column+`
Char: `+m.c),f=new Error(f),m.error=f,q(m,"onerror",f),m}function U(m){return m.sawRoot&&!m.closedRoot&&O(m,"Unclosed root tag"),m.state!==g.BEGIN&&m.state!==g.BEGIN_WHITESPACE&&m.state!==g.TEXT&&F(m,"Unexpected end"),N(m),m.c="",m.closed=!0,q(m,"onend"),r.call(m,m.strict,m.opt),m}function O(m,f){if(typeof m!="object"||!(m instanceof r))throw new Error("bad call to strictFail");m.strict&&F(m,f)}function B(m){m.strict||(m.tagName=m.tagName[m.looseCase]());var f=m.tags[m.tags.length-1]||m,D=m.tag={name:m.tagName,attributes:{}};m.opt.xmlns&&(D.ns=f.ns),m.attribList.length=0,M(m,"onopentagstart",D)}function L(m,f){var D=m.indexOf(":"),S=D<0?["",m]:m.split(":"),z=S[0],te=S[1];return f&&m==="xmlns"&&(z="xmlns",te=""),{prefix:z,local:te}}function Y(m){if(m.strict||(m.attribName=m.attribName[m.looseCase]()),m.attribList.indexOf(m.attribName)!==-1||m.tag.attributes.hasOwnProperty(m.attribName)){m.attribName=m.attribValue="";return}if(m.opt.xmlns){var f=L(m.attribName,!0),D=f.prefix,S=f.local;if(D==="xmlns")if(S==="xml"&&m.attribValue!==p)O(m,"xml: prefix must be bound to "+p+`
Actual: `+m.attribValue);else if(S==="xmlns"&&m.attribValue!==y)O(m,"xmlns: prefix must be bound to "+y+`
Actual: `+m.attribValue);else{var z=m.tag,te=m.tags[m.tags.length-1]||m;z.ns===te.ns&&(z.ns=Object.create(te.ns)),z.ns[S]=m.attribValue}m.attribList.push([m.attribName,m.attribValue])}else m.tag.attributes[m.attribName]=m.attribValue,M(m,"onattribute",{name:m.attribName,value:m.attribValue});m.attribName=m.attribValue=""}function V(m,f){if(m.opt.xmlns){var D=m.tag,S=L(m.tagName);D.prefix=S.prefix,D.local=S.local,D.uri=D.ns[S.prefix]||"",D.prefix&&!D.uri&&(O(m,"Unbound namespace prefix: "+JSON.stringify(m.tagName)),D.uri=S.prefix);var z=m.tags[m.tags.length-1]||m;D.ns&&z.ns!==D.ns&&Object.keys(D.ns).forEach(function(Kn){M(m,"onopennamespace",{prefix:Kn,uri:D.ns[Kn]})});for(var te=0,ae=m.attribList.length;te<ae;te++){var ge=m.attribList[te],$e=ge[0],nt=ge[1],fe=L($e,!0),Fe=fe.prefix,ei=fe.local,zn=Fe===""?"":D.ns[Fe]||"",ln={name:$e,value:nt,prefix:Fe,local:ei,uri:zn};Fe&&Fe!=="xmlns"&&!zn&&(O(m,"Unbound namespace prefix: "+JSON.stringify(Fe)),ln.uri=Fe),m.tag.attributes[$e]=ln,M(m,"onattribute",ln)}m.attribList.length=0}m.tag.isSelfClosing=!!f,m.sawRoot=!0,m.tags.push(m.tag),M(m,"onopentag",m.tag),f||(!m.noscript&&m.tagName.toLowerCase()==="script"?m.state=g.SCRIPT:m.state=g.TEXT,m.tag=null,m.tagName=""),m.attribName=m.attribValue="",m.attribList.length=0}function J(m){if(!m.tagName){O(m,"Weird empty close tag."),m.textNode+="</>",m.state=g.TEXT;return}if(m.script){if(m.tagName!=="script"){m.script+="</"+m.tagName+">",m.tagName="",m.state=g.SCRIPT;return}M(m,"onscript",m.script),m.script=""}var f=m.tags.length,D=m.tagName;m.strict||(D=D[m.looseCase]());for(var S=D;f--;){var z=m.tags[f];if(z.name!==S)O(m,"Unexpected close tag");else break}if(f<0){O(m,"Unmatched closing tag: "+m.tagName),m.textNode+="</"+m.tagName+">",m.state=g.TEXT;return}m.tagName=D;for(var te=m.tags.length;te-- >f;){var ae=m.tag=m.tags.pop();m.tagName=m.tag.name,M(m,"onclosetag",m.tagName);var ge={};for(var $e in ae.ns)ge[$e]=ae.ns[$e];var nt=m.tags[m.tags.length-1]||m;m.opt.xmlns&&ae.ns!==nt.ns&&Object.keys(ae.ns).forEach(function(fe){var Fe=ae.ns[fe];M(m,"onclosenamespace",{prefix:fe,uri:Fe})})}f===0&&(m.closedRoot=!0),m.tagName=m.attribValue=m.attribName="",m.attribList.length=0,m.state=g.TEXT}function de(m){var f=m.entity,D=f.toLowerCase(),S,z="";return m.ENTITIES[f]?m.ENTITIES[f]:m.ENTITIES[D]?m.ENTITIES[D]:(f=D,f.charAt(0)==="#"&&(f.charAt(1)==="x"?(f=f.slice(2),S=parseInt(f,16),z=S.toString(16)):(f=f.slice(1),S=parseInt(f,10),z=S.toString(10))),f=f.replace(/^0+/,""),isNaN(S)||z.toLowerCase()!==f?(O(m,"Invalid character entity"),"&"+m.entity+";"):String.fromCodePoint(S))}function Z(m,f){f==="<"?(m.state=g.OPEN_WAKA,m.startTagPosition=m.position):R(f)||(O(m,"Non-whitespace before first tag."),m.textNode=f,m.state=g.TEXT)}function X(m,f){var D="";return f<m.length&&(D=m.charAt(f)),D}function sn(m){var f=this;if(this.error)throw this.error;if(f.closed)return F(f,"Cannot write after close. Assign an onready handler.");if(m===null)return U(f);typeof m=="object"&&(m=m.toString());for(var D=0,S="";S=X(m,D++),f.c=S,!!S;)switch(f.trackPosition&&(f.position++,S===`
`?(f.line++,f.column=0):f.column++),f.state){case g.BEGIN:if(f.state=g.BEGIN_WHITESPACE,S==="\uFEFF")continue;Z(f,S);continue;case g.BEGIN_WHITESPACE:Z(f,S);continue;case g.TEXT:if(f.sawRoot&&!f.closedRoot){for(var z=D-1;S&&S!=="<"&&S!=="&";)S=X(m,D++),S&&f.trackPosition&&(f.position++,S===`
`?(f.line++,f.column=0):f.column++);f.textNode+=m.substring(z,D-1)}S==="<"&&!(f.sawRoot&&f.closedRoot&&!f.strict)?(f.state=g.OPEN_WAKA,f.startTagPosition=f.position):(!R(S)&&(!f.sawRoot||f.closedRoot)&&O(f,"Text data outside of root node."),S==="&"?f.state=g.TEXT_ENTITY:f.textNode+=S);continue;case g.SCRIPT:S==="<"?f.state=g.SCRIPT_ENDING:f.script+=S;continue;case g.SCRIPT_ENDING:S==="/"?f.state=g.CLOSE_TAG:(f.script+="<"+S,f.state=g.SCRIPT);continue;case g.OPEN_WAKA:if(S==="!")f.state=g.SGML_DECL,f.sgmlDecl="";else if(!R(S))if(T(A,S))f.state=g.OPEN_TAG,f.tagName=S;else if(S==="/")f.state=g.CLOSE_TAG,f.tagName="";else if(S==="?")f.state=g.PROC_INST,f.procInstName=f.procInstBody="";else{if(O(f,"Unencoded <"),f.startTagPosition+1<f.position){var te=f.position-f.startTagPosition;S=new Array(te).join(" ")+S}f.textNode+="<"+S,f.state=g.TEXT}continue;case g.SGML_DECL:(f.sgmlDecl+S).toUpperCase()===u?(M(f,"onopencdata"),f.state=g.CDATA,f.sgmlDecl="",f.cdata=""):f.sgmlDecl+S==="--"?(f.state=g.COMMENT,f.comment="",f.sgmlDecl=""):(f.sgmlDecl+S).toUpperCase()===d?(f.state=g.DOCTYPE,(f.doctype||f.sawRoot)&&O(f,"Inappropriately located doctype declaration"),f.doctype="",f.sgmlDecl=""):S===">"?(M(f,"onsgmldeclaration",f.sgmlDecl),f.sgmlDecl="",f.state=g.TEXT):(H(S)&&(f.state=g.SGML_DECL_QUOTED),f.sgmlDecl+=S);continue;case g.SGML_DECL_QUOTED:S===f.q&&(f.state=g.SGML_DECL,f.q=""),f.sgmlDecl+=S;continue;case g.DOCTYPE:S===">"?(f.state=g.TEXT,M(f,"ondoctype",f.doctype),f.doctype=!0):(f.doctype+=S,S==="["?f.state=g.DOCTYPE_DTD:H(S)&&(f.state=g.DOCTYPE_QUOTED,f.q=S));continue;case g.DOCTYPE_QUOTED:f.doctype+=S,S===f.q&&(f.q="",f.state=g.DOCTYPE);continue;case g.DOCTYPE_DTD:f.doctype+=S,S==="]"?f.state=g.DOCTYPE:H(S)&&(f.state=g.DOCTYPE_DTD_QUOTED,f.q=S);continue;case g.DOCTYPE_DTD_QUOTED:f.doctype+=S,S===f.q&&(f.state=g.DOCTYPE_DTD,f.q="");continue;case g.COMMENT:S==="-"?f.state=g.COMMENT_ENDING:f.comment+=S;continue;case g.COMMENT_ENDING:S==="-"?(f.state=g.COMMENT_ENDED,f.comment=$(f.opt,f.comment),f.comment&&M(f,"oncomment",f.comment),f.comment=""):(f.comment+="-"+S,f.state=g.COMMENT);continue;case g.COMMENT_ENDED:S!==">"?(O(f,"Malformed comment"),f.comment+="--"+S,f.state=g.COMMENT):f.state=g.TEXT;continue;case g.CDATA:S==="]"?f.state=g.CDATA_ENDING:f.cdata+=S;continue;case g.CDATA_ENDING:S==="]"?f.state=g.CDATA_ENDING_2:(f.cdata+="]"+S,f.state=g.CDATA);continue;case g.CDATA_ENDING_2:S===">"?(f.cdata&&M(f,"oncdata",f.cdata),M(f,"onclosecdata"),f.cdata="",f.state=g.TEXT):S==="]"?f.cdata+="]":(f.cdata+="]]"+S,f.state=g.CDATA);continue;case g.PROC_INST:S==="?"?f.state=g.PROC_INST_ENDING:R(S)?f.state=g.PROC_INST_BODY:f.procInstName+=S;continue;case g.PROC_INST_BODY:if(!f.procInstBody&&R(S))continue;S==="?"?f.state=g.PROC_INST_ENDING:f.procInstBody+=S;continue;case g.PROC_INST_ENDING:S===">"?(M(f,"onprocessinginstruction",{name:f.procInstName,body:f.procInstBody}),f.procInstName=f.procInstBody="",f.state=g.TEXT):(f.procInstBody+="?"+S,f.state=g.PROC_INST_BODY);continue;case g.OPEN_TAG:T(b,S)?f.tagName+=S:(B(f),S===">"?V(f):S==="/"?f.state=g.OPEN_TAG_SLASH:(R(S)||O(f,"Invalid character in tag name"),f.state=g.ATTRIB));continue;case g.OPEN_TAG_SLASH:S===">"?(V(f,!0),J(f)):(O(f,"Forward-slash in opening tag not followed by >"),f.state=g.ATTRIB);continue;case g.ATTRIB:if(R(S))continue;S===">"?V(f):S==="/"?f.state=g.OPEN_TAG_SLASH:T(A,S)?(f.attribName=S,f.attribValue="",f.state=g.ATTRIB_NAME):O(f,"Invalid attribute name");continue;case g.ATTRIB_NAME:S==="="?f.state=g.ATTRIB_VALUE:S===">"?(O(f,"Attribute without value"),f.attribValue=f.attribName,Y(f),V(f)):R(S)?f.state=g.ATTRIB_NAME_SAW_WHITE:T(b,S)?f.attribName+=S:O(f,"Invalid attribute name");continue;case g.ATTRIB_NAME_SAW_WHITE:if(S==="=")f.state=g.ATTRIB_VALUE;else{if(R(S))continue;O(f,"Attribute without value"),f.tag.attributes[f.attribName]="",f.attribValue="",M(f,"onattribute",{name:f.attribName,value:""}),f.attribName="",S===">"?V(f):T(A,S)?(f.attribName=S,f.state=g.ATTRIB_NAME):(O(f,"Invalid attribute name"),f.state=g.ATTRIB)}continue;case g.ATTRIB_VALUE:if(R(S))continue;H(S)?(f.q=S,f.state=g.ATTRIB_VALUE_QUOTED):(O(f,"Unquoted attribute value"),f.state=g.ATTRIB_VALUE_UNQUOTED,f.attribValue=S);continue;case g.ATTRIB_VALUE_QUOTED:if(S!==f.q){S==="&"?f.state=g.ATTRIB_VALUE_ENTITY_Q:f.attribValue+=S;continue}Y(f),f.q="",f.state=g.ATTRIB_VALUE_CLOSED;continue;case g.ATTRIB_VALUE_CLOSED:R(S)?f.state=g.ATTRIB:S===">"?V(f):S==="/"?f.state=g.OPEN_TAG_SLASH:T(A,S)?(O(f,"No whitespace between attributes"),f.attribName=S,f.attribValue="",f.state=g.ATTRIB_NAME):O(f,"Invalid attribute name");continue;case g.ATTRIB_VALUE_UNQUOTED:if(!x(S)){S==="&"?f.state=g.ATTRIB_VALUE_ENTITY_U:f.attribValue+=S;continue}Y(f),S===">"?V(f):f.state=g.ATTRIB;continue;case g.CLOSE_TAG:if(f.tagName)S===">"?J(f):T(b,S)?f.tagName+=S:f.script?(f.script+="</"+f.tagName,f.tagName="",f.state=g.SCRIPT):(R(S)||O(f,"Invalid tagname in closing tag"),f.state=g.CLOSE_TAG_SAW_WHITE);else{if(R(S))continue;I(A,S)?f.script?(f.script+="</"+S,f.state=g.SCRIPT):O(f,"Invalid tagname in closing tag."):f.tagName=S}continue;case g.CLOSE_TAG_SAW_WHITE:if(R(S))continue;S===">"?J(f):O(f,"Invalid characters in closing tag");continue;case g.TEXT_ENTITY:case g.ATTRIB_VALUE_ENTITY_Q:case g.ATTRIB_VALUE_ENTITY_U:var ae,ge;switch(f.state){case g.TEXT_ENTITY:ae=g.TEXT,ge="textNode";break;case g.ATTRIB_VALUE_ENTITY_Q:ae=g.ATTRIB_VALUE_QUOTED,ge="attribValue";break;case g.ATTRIB_VALUE_ENTITY_U:ae=g.ATTRIB_VALUE_UNQUOTED,ge="attribValue";break}if(S===";")if(f.opt.unparsedEntities){var $e=de(f);f.entity="",f.state=ae,f.write($e)}else f[ge]+=de(f),f.entity="",f.state=ae;else T(f.entity.length?C:E,S)?f.entity+=S:(O(f,"Invalid character in entity name"),f[ge]+="&"+f.entity+S,f.entity="",f.state=ae);continue;default:throw new Error(f,"Unknown state: "+f.state)}return f.position>=f.bufferCheckPosition&&i(f),f}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var m=String.fromCharCode,f=Math.floor,D=function(){var S=16384,z=[],te,ae,ge=-1,$e=arguments.length;if(!$e)return"";for(var nt="";++ge<$e;){var fe=Number(arguments[ge]);if(!isFinite(fe)||fe<0||fe>1114111||f(fe)!==fe)throw RangeError("Invalid code point: "+fe);fe<=65535?z.push(fe):(fe-=65536,te=(fe>>10)+55296,ae=fe%1024+56320,z.push(te,ae)),(ge+1===$e||z.length>S)&&(nt+=m.apply(null,z),z.length=0)}return nt};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:D,configurable:!0,writable:!0}):String.fromCodePoint=D}()})(e)})(Ws);var Qa;function mf(){if(Qa)return At;Qa=1,Object.defineProperty(At,"__esModule",{value:!0}),At.parseXml=At.XElement=void 0;const e=Ws,t=ce();class n{constructor(l){if(this.name=l,this.value="",this.attributes=null,this.isCData=!1,this.elements=null,!l)throw(0,t.newError)("Element name cannot be empty","ERR_XML_ELEMENT_NAME_EMPTY");if(!i(l))throw(0,t.newError)(`Invalid element name: ${l}`,"ERR_XML_ELEMENT_INVALID_NAME")}attribute(l){const h=this.attributes===null?null:this.attributes[l];if(h==null)throw(0,t.newError)(`No attribute "${l}"`,"ERR_XML_MISSED_ATTRIBUTE");return h}removeAttribute(l){this.attributes!==null&&delete this.attributes[l]}element(l,h=!1,c=null){const u=this.elementOrNull(l,h);if(u===null)throw(0,t.newError)(c||`No element "${l}"`,"ERR_XML_MISSED_ELEMENT");return u}elementOrNull(l,h=!1){if(this.elements===null)return null;for(const c of this.elements)if(a(c,l,h))return c;return null}getElements(l,h=!1){return this.elements===null?[]:this.elements.filter(c=>a(c,l,h))}elementValueOrEmpty(l,h=!1){const c=this.elementOrNull(l,h);return c===null?"":c.value}}At.XElement=n;const r=new RegExp(/^[A-Za-z_][:A-Za-z0-9_-]*$/i);function i(s){return r.test(s)}function a(s,l,h){const c=s.name;return c===l||h===!0&&c.length===l.length&&c.toLowerCase()===l.toLowerCase()}function o(s){let l=null;const h=e.parser(!0,{}),c=[];return h.onopentag=u=>{const d=new n(u.name);if(d.attributes=u.attributes,l===null)l=d;else{const p=c[c.length-1];p.elements==null&&(p.elements=[]),p.elements.push(d)}c.push(d)},h.onclosetag=()=>{c.pop()},h.ontext=u=>{c.length>0&&(c[c.length-1].value=u)},h.oncdata=u=>{const d=c[c.length-1];d.value=u,d.isCData=!0},h.onerror=u=>{throw u},h.write(s),l}return At.parseXml=o,At}var Za;function ce(){return Za||(Za=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.newError=e.asArray=e.CURRENT_APP_PACKAGE_FILE_NAME=e.CURRENT_APP_INSTALLER_FILE_NAME=e.XElement=e.parseXml=e.ProgressCallbackTransform=e.UUID=e.parseDn=e.githubUrl=e.getS3LikeProviderBaseUrl=e.configureRequestUrl=e.parseJson=e.safeStringifyJson=e.configureRequestOptionsFromUrl=e.configureRequestOptions=e.safeGetHeader=e.DigestTransform=e.HttpExecutor=e.createHttpError=e.HttpError=e.CancellationError=e.CancellationToken=void 0;var t=Ot;Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return t.CancellationToken}}),Object.defineProperty(e,"CancellationError",{enumerable:!0,get:function(){return t.CancellationError}});var n=lf();Object.defineProperty(e,"HttpError",{enumerable:!0,get:function(){return n.HttpError}}),Object.defineProperty(e,"createHttpError",{enumerable:!0,get:function(){return n.createHttpError}}),Object.defineProperty(e,"HttpExecutor",{enumerable:!0,get:function(){return n.HttpExecutor}}),Object.defineProperty(e,"DigestTransform",{enumerable:!0,get:function(){return n.DigestTransform}}),Object.defineProperty(e,"safeGetHeader",{enumerable:!0,get:function(){return n.safeGetHeader}}),Object.defineProperty(e,"configureRequestOptions",{enumerable:!0,get:function(){return n.configureRequestOptions}}),Object.defineProperty(e,"configureRequestOptionsFromUrl",{enumerable:!0,get:function(){return n.configureRequestOptionsFromUrl}}),Object.defineProperty(e,"safeStringifyJson",{enumerable:!0,get:function(){return n.safeStringifyJson}}),Object.defineProperty(e,"parseJson",{enumerable:!0,get:function(){return n.parseJson}}),Object.defineProperty(e,"configureRequestUrl",{enumerable:!0,get:function(){return n.configureRequestUrl}});var r=zt;Object.defineProperty(e,"getS3LikeProviderBaseUrl",{enumerable:!0,get:function(){return r.getS3LikeProviderBaseUrl}}),Object.defineProperty(e,"githubUrl",{enumerable:!0,get:function(){return r.githubUrl}});var i=Nr;Object.defineProperty(e,"parseDn",{enumerable:!0,get:function(){return i.parseDn}});var a=pf();Object.defineProperty(e,"UUID",{enumerable:!0,get:function(){return a.UUID}});var o=qn;Object.defineProperty(e,"ProgressCallbackTransform",{enumerable:!0,get:function(){return o.ProgressCallbackTransform}});var s=mf();Object.defineProperty(e,"parseXml",{enumerable:!0,get:function(){return s.parseXml}}),Object.defineProperty(e,"XElement",{enumerable:!0,get:function(){return s.XElement}}),e.CURRENT_APP_INSTALLER_FILE_NAME="installer.exe",e.CURRENT_APP_PACKAGE_FILE_NAME="package.7z";function l(c){return c==null?[]:Array.isArray(c)?c:[c]}e.asArray=l;function h(c,u){const d=new Error(c);return d.code=u,d}e.newError=h}(ui)),ui}var Pt={},Ce={};Ce.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((n,r)=>{e.call(this,...t,(i,a)=>i!=null?r(i):n(a))})},"name",{value:e.name})};Ce.fromPromise=function(e){return Object.defineProperty(function(...t){const n=t[t.length-1];if(typeof n!="function")return e.apply(this,t);e.apply(this,t.slice(0,-1)).then(r=>n(null,r),n)},"name",{value:e.name})};var ot=zc,gf=process.cwd,Er=null,Ef=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Er||(Er=gf.call(process)),Er};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var eo=process.chdir;process.chdir=function(e){Er=null,eo.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,eo)}var vf=yf;function yf(e){ot.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||n(e),e.chown=a(e.chown),e.fchown=a(e.fchown),e.lchown=a(e.lchown),e.chmod=r(e.chmod),e.fchmod=r(e.fchmod),e.lchmod=r(e.lchmod),e.chownSync=o(e.chownSync),e.fchownSync=o(e.fchownSync),e.lchownSync=o(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=s(e.stat),e.fstat=s(e.fstat),e.lstat=s(e.lstat),e.statSync=l(e.statSync),e.fstatSync=l(e.fstatSync),e.lstatSync=l(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(c,u,d){d&&process.nextTick(d)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(c,u,d,p){p&&process.nextTick(p)},e.lchownSync=function(){}),Ef==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(c){function u(d,p,y){var w=Date.now(),A=0;c(d,p,function b(E){if(E&&(E.code==="EACCES"||E.code==="EPERM"||E.code==="EBUSY")&&Date.now()-w<6e4){setTimeout(function(){e.stat(p,function(C,R){C&&C.code==="ENOENT"?c(d,p,b):y(E)})},A),A<100&&(A+=10);return}y&&y(E)})}return Object.setPrototypeOf&&Object.setPrototypeOf(u,c),u}(e.rename)),e.read=typeof e.read!="function"?e.read:function(c){function u(d,p,y,w,A,b){var E;if(b&&typeof b=="function"){var C=0;E=function(R,H,x){if(R&&R.code==="EAGAIN"&&C<10)return C++,c.call(e,d,p,y,w,A,E);b.apply(this,arguments)}}return c.call(e,d,p,y,w,A,E)}return Object.setPrototypeOf&&Object.setPrototypeOf(u,c),u}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(c){return function(u,d,p,y,w){for(var A=0;;)try{return c.call(e,u,d,p,y,w)}catch(b){if(b.code==="EAGAIN"&&A<10){A++;continue}throw b}}}(e.readSync);function t(c){c.lchmod=function(u,d,p){c.open(u,ot.O_WRONLY|ot.O_SYMLINK,d,function(y,w){if(y){p&&p(y);return}c.fchmod(w,d,function(A){c.close(w,function(b){p&&p(A||b)})})})},c.lchmodSync=function(u,d){var p=c.openSync(u,ot.O_WRONLY|ot.O_SYMLINK,d),y=!0,w;try{w=c.fchmodSync(p,d),y=!1}finally{if(y)try{c.closeSync(p)}catch{}else c.closeSync(p)}return w}}function n(c){ot.hasOwnProperty("O_SYMLINK")&&c.futimes?(c.lutimes=function(u,d,p,y){c.open(u,ot.O_SYMLINK,function(w,A){if(w){y&&y(w);return}c.futimes(A,d,p,function(b){c.close(A,function(E){y&&y(b||E)})})})},c.lutimesSync=function(u,d,p){var y=c.openSync(u,ot.O_SYMLINK),w,A=!0;try{w=c.futimesSync(y,d,p),A=!1}finally{if(A)try{c.closeSync(y)}catch{}else c.closeSync(y)}return w}):c.futimes&&(c.lutimes=function(u,d,p,y){y&&process.nextTick(y)},c.lutimesSync=function(){})}function r(c){return c&&function(u,d,p){return c.call(e,u,d,function(y){h(y)&&(y=null),p&&p.apply(this,arguments)})}}function i(c){return c&&function(u,d){try{return c.call(e,u,d)}catch(p){if(!h(p))throw p}}}function a(c){return c&&function(u,d,p,y){return c.call(e,u,d,p,function(w){h(w)&&(w=null),y&&y.apply(this,arguments)})}}function o(c){return c&&function(u,d,p){try{return c.call(e,u,d,p)}catch(y){if(!h(y))throw y}}}function s(c){return c&&function(u,d,p){typeof d=="function"&&(p=d,d=null);function y(w,A){A&&(A.uid<0&&(A.uid+=4294967296),A.gid<0&&(A.gid+=4294967296)),p&&p.apply(this,arguments)}return d?c.call(e,u,d,y):c.call(e,u,y)}}function l(c){return c&&function(u,d){var p=d?c.call(e,u,d):c.call(e,u);return p&&(p.uid<0&&(p.uid+=4294967296),p.gid<0&&(p.gid+=4294967296)),p}}function h(c){if(!c||c.code==="ENOSYS")return!0;var u=!process.getuid||process.getuid()!==0;return!!(u&&(c.code==="EINVAL"||c.code==="EPERM"))}}var to=Bn.Stream,wf=_f;function _f(e){return{ReadStream:t,WriteStream:n};function t(r,i){if(!(this instanceof t))return new t(r,i);to.call(this);var a=this;this.path=r,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var o=Object.keys(i),s=0,l=o.length;s<l;s++){var h=o[s];this[h]=i[h]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){a._read()});return}e.open(this.path,this.flags,this.mode,function(c,u){if(c){a.emit("error",c),a.readable=!1;return}a.fd=u,a.emit("open",u),a._read()})}function n(r,i){if(!(this instanceof n))return new n(r,i);to.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var a=Object.keys(i),o=0,s=a.length;o<s;o++){var l=a[o];this[l]=i[l]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}var Af=Tf,Sf=Object.getPrototypeOf||function(e){return e.__proto__};function Tf(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:Sf(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}var ie=pt,Cf=vf,bf=wf,Rf=Af,sr=Zi,ve,wr;typeof Symbol=="function"&&typeof Symbol.for=="function"?(ve=Symbol.for("graceful-fs.queue"),wr=Symbol.for("graceful-fs.previous")):(ve="___graceful-fs.queue",wr="___graceful-fs.previous");function If(){}function Ys(e,t){Object.defineProperty(e,ve,{get:function(){return t}})}var It=If;sr.debuglog?It=sr.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(It=function(){var e=sr.format.apply(sr,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});if(!ie[ve]){var $f=Be[ve]||[];Ys(ie,$f),ie.close=function(e){function t(n,r){return e.call(ie,n,function(i){i||no(),typeof r=="function"&&r.apply(this,arguments)})}return Object.defineProperty(t,wr,{value:e}),t}(ie.close),ie.closeSync=function(e){function t(n){e.apply(ie,arguments),no()}return Object.defineProperty(t,wr,{value:e}),t}(ie.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){It(ie[ve]),Hs.equal(ie[ve].length,0)})}Be[ve]||Ys(Be,ie[ve]);var be=ta(Rf(ie));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!ie.__patched&&(be=ta(ie),ie.__patched=!0);function ta(e){Cf(e),e.gracefulify=ta,e.createReadStream=H,e.createWriteStream=x;var t=e.readFile;e.readFile=n;function n(g,k,q){return typeof k=="function"&&(q=k,k=null),M(g,k,q);function M(N,$,F,U){return t(N,$,function(O){O&&(O.code==="EMFILE"||O.code==="ENFILE")?Lt([M,[N,$,F],O,U||Date.now(),Date.now()]):typeof F=="function"&&F.apply(this,arguments)})}}var r=e.writeFile;e.writeFile=i;function i(g,k,q,M){return typeof q=="function"&&(M=q,q=null),N(g,k,q,M);function N($,F,U,O,B){return r($,F,U,function(L){L&&(L.code==="EMFILE"||L.code==="ENFILE")?Lt([N,[$,F,U,O],L,B||Date.now(),Date.now()]):typeof O=="function"&&O.apply(this,arguments)})}}var a=e.appendFile;a&&(e.appendFile=o);function o(g,k,q,M){return typeof q=="function"&&(M=q,q=null),N(g,k,q,M);function N($,F,U,O,B){return a($,F,U,function(L){L&&(L.code==="EMFILE"||L.code==="ENFILE")?Lt([N,[$,F,U,O],L,B||Date.now(),Date.now()]):typeof O=="function"&&O.apply(this,arguments)})}}var s=e.copyFile;s&&(e.copyFile=l);function l(g,k,q,M){return typeof q=="function"&&(M=q,q=0),N(g,k,q,M);function N($,F,U,O,B){return s($,F,U,function(L){L&&(L.code==="EMFILE"||L.code==="ENFILE")?Lt([N,[$,F,U,O],L,B||Date.now(),Date.now()]):typeof O=="function"&&O.apply(this,arguments)})}}var h=e.readdir;e.readdir=u;var c=/^v[0-5]\./;function u(g,k,q){typeof k=="function"&&(q=k,k=null);var M=c.test(process.version)?function(F,U,O,B){return h(F,N(F,U,O,B))}:function(F,U,O,B){return h(F,U,N(F,U,O,B))};return M(g,k,q);function N($,F,U,O){return function(B,L){B&&(B.code==="EMFILE"||B.code==="ENFILE")?Lt([M,[$,F,U],B,O||Date.now(),Date.now()]):(L&&L.sort&&L.sort(),typeof U=="function"&&U.call(this,B,L))}}}if(process.version.substr(0,4)==="v0.8"){var d=bf(e);b=d.ReadStream,C=d.WriteStream}var p=e.ReadStream;p&&(b.prototype=Object.create(p.prototype),b.prototype.open=E);var y=e.WriteStream;y&&(C.prototype=Object.create(y.prototype),C.prototype.open=R),Object.defineProperty(e,"ReadStream",{get:function(){return b},set:function(g){b=g},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return C},set:function(g){C=g},enumerable:!0,configurable:!0});var w=b;Object.defineProperty(e,"FileReadStream",{get:function(){return w},set:function(g){w=g},enumerable:!0,configurable:!0});var A=C;Object.defineProperty(e,"FileWriteStream",{get:function(){return A},set:function(g){A=g},enumerable:!0,configurable:!0});function b(g,k){return this instanceof b?(p.apply(this,arguments),this):b.apply(Object.create(b.prototype),arguments)}function E(){var g=this;I(g.path,g.flags,g.mode,function(k,q){k?(g.autoClose&&g.destroy(),g.emit("error",k)):(g.fd=q,g.emit("open",q),g.read())})}function C(g,k){return this instanceof C?(y.apply(this,arguments),this):C.apply(Object.create(C.prototype),arguments)}function R(){var g=this;I(g.path,g.flags,g.mode,function(k,q){k?(g.destroy(),g.emit("error",k)):(g.fd=q,g.emit("open",q))})}function H(g,k){return new e.ReadStream(g,k)}function x(g,k){return new e.WriteStream(g,k)}var T=e.open;e.open=I;function I(g,k,q,M){return typeof q=="function"&&(M=q,q=null),N(g,k,q,M);function N($,F,U,O,B){return T($,F,U,function(L,Y){L&&(L.code==="EMFILE"||L.code==="ENFILE")?Lt([N,[$,F,U,O],L,B||Date.now(),Date.now()]):typeof O=="function"&&O.apply(this,arguments)})}}return e}function Lt(e){It("ENQUEUE",e[0].name,e[1]),ie[ve].push(e),na()}var lr;function no(){for(var e=Date.now(),t=0;t<ie[ve].length;++t)ie[ve][t].length>2&&(ie[ve][t][3]=e,ie[ve][t][4]=e);na()}function na(){if(clearTimeout(lr),lr=void 0,ie[ve].length!==0){var e=ie[ve].shift(),t=e[0],n=e[1],r=e[2],i=e[3],a=e[4];if(i===void 0)It("RETRY",t.name,n),t.apply(null,n);else if(Date.now()-i>=6e4){It("TIMEOUT",t.name,n);var o=n.pop();typeof o=="function"&&o.call(null,r)}else{var s=Date.now()-a,l=Math.max(a-i,1),h=Math.min(l*1.2,100);s>=h?(It("RETRY",t.name,n),t.apply(null,n.concat([i]))):ie[ve].push(e)}lr===void 0&&(lr=setTimeout(na,0))}}(function(e){const t=Ce.fromCallback,n=be,r=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(i=>typeof n[i]=="function");Object.assign(e,n),r.forEach(i=>{e[i]=t(n[i])}),e.exists=function(i,a){return typeof a=="function"?n.exists(i,a):new Promise(o=>n.exists(i,o))},e.read=function(i,a,o,s,l,h){return typeof h=="function"?n.read(i,a,o,s,l,h):new Promise((c,u)=>{n.read(i,a,o,s,l,(d,p,y)=>{if(d)return u(d);c({bytesRead:p,buffer:y})})})},e.write=function(i,a,...o){return typeof o[o.length-1]=="function"?n.write(i,a,...o):new Promise((s,l)=>{n.write(i,a,...o,(h,c,u)=>{if(h)return l(h);s({bytesWritten:c,buffer:u})})})},typeof n.writev=="function"&&(e.writev=function(i,a,...o){return typeof o[o.length-1]=="function"?n.writev(i,a,...o):new Promise((s,l)=>{n.writev(i,a,...o,(h,c,u)=>{if(h)return l(h);s({bytesWritten:c,buffers:u})})})}),typeof n.realpath.native=="function"?e.realpath.native=t(n.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")})(Pt);var ra={},Xs={};const Of=le;Xs.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(Of.parse(t).root,""))){const r=new Error(`Path contains invalid characters: ${t}`);throw r.code="EINVAL",r}};const zs=Pt,{checkPath:Ks}=Xs,Js=e=>{const t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};ra.makeDir=async(e,t)=>(Ks(e),zs.mkdir(e,{mode:Js(t),recursive:!0}));ra.makeDirSync=(e,t)=>(Ks(e),zs.mkdirSync(e,{mode:Js(t),recursive:!0}));const Nf=Ce.fromPromise,{makeDir:Df,makeDirSync:pi}=ra,mi=Nf(Df);var Ye={mkdirs:mi,mkdirsSync:pi,mkdirp:mi,mkdirpSync:pi,ensureDir:mi,ensureDirSync:pi};const Pf=Ce.fromPromise,Qs=Pt;function xf(e){return Qs.access(e).then(()=>!0).catch(()=>!1)}var xt={pathExists:Pf(xf),pathExistsSync:Qs.existsSync};const Yt=be;function Ff(e,t,n,r){Yt.open(e,"r+",(i,a)=>{if(i)return r(i);Yt.futimes(a,t,n,o=>{Yt.close(a,s=>{r&&r(o||s)})})})}function Lf(e,t,n){const r=Yt.openSync(e,"r+");return Yt.futimesSync(r,t,n),Yt.closeSync(r)}var Zs={utimesMillis:Ff,utimesMillisSync:Lf};const Kt=Pt,me=le,Uf=Zi;function kf(e,t,n){const r=n.dereference?i=>Kt.stat(i,{bigint:!0}):i=>Kt.lstat(i,{bigint:!0});return Promise.all([r(e),r(t).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,a])=>({srcStat:i,destStat:a}))}function Mf(e,t,n){let r;const i=n.dereference?o=>Kt.statSync(o,{bigint:!0}):o=>Kt.lstatSync(o,{bigint:!0}),a=i(e);try{r=i(t)}catch(o){if(o.code==="ENOENT")return{srcStat:a,destStat:null};throw o}return{srcStat:a,destStat:r}}function Bf(e,t,n,r,i){Uf.callbackify(kf)(e,t,r,(a,o)=>{if(a)return i(a);const{srcStat:s,destStat:l}=o;if(l){if(Hn(s,l)){const h=me.basename(e),c=me.basename(t);return n==="move"&&h!==c&&h.toLowerCase()===c.toLowerCase()?i(null,{srcStat:s,destStat:l,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(s.isDirectory()&&!l.isDirectory())return i(new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`));if(!s.isDirectory()&&l.isDirectory())return i(new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`))}return s.isDirectory()&&ia(e,t)?i(new Error(Dr(e,t,n))):i(null,{srcStat:s,destStat:l})})}function qf(e,t,n,r){const{srcStat:i,destStat:a}=Mf(e,t,r);if(a){if(Hn(i,a)){const o=me.basename(e),s=me.basename(t);if(n==="move"&&o!==s&&o.toLowerCase()===s.toLowerCase())return{srcStat:i,destStat:a,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!a.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&a.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&ia(e,t))throw new Error(Dr(e,t,n));return{srcStat:i,destStat:a}}function el(e,t,n,r,i){const a=me.resolve(me.dirname(e)),o=me.resolve(me.dirname(n));if(o===a||o===me.parse(o).root)return i();Kt.stat(o,{bigint:!0},(s,l)=>s?s.code==="ENOENT"?i():i(s):Hn(t,l)?i(new Error(Dr(e,n,r))):el(e,t,o,r,i))}function tl(e,t,n,r){const i=me.resolve(me.dirname(e)),a=me.resolve(me.dirname(n));if(a===i||a===me.parse(a).root)return;let o;try{o=Kt.statSync(a,{bigint:!0})}catch(s){if(s.code==="ENOENT")return;throw s}if(Hn(t,o))throw new Error(Dr(e,n,r));return tl(e,t,a,r)}function Hn(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function ia(e,t){const n=me.resolve(e).split(me.sep).filter(i=>i),r=me.resolve(t).split(me.sep).filter(i=>i);return n.reduce((i,a,o)=>i&&r[o]===a,!0)}function Dr(e,t,n){return`Cannot ${n} '${e}' to a subdirectory of itself, '${t}'.`}var rn={checkPaths:Bf,checkPathsSync:qf,checkParentPaths:el,checkParentPathsSync:tl,isSrcSubdir:ia,areIdentical:Hn};const Oe=be,On=le,Hf=Ye.mkdirs,jf=xt.pathExists,Gf=Zs.utimesMillis,Nn=rn;function Vf(e,t,n,r){typeof n=="function"&&!r?(r=n,n={}):typeof n=="function"&&(n={filter:n}),r=r||function(){},n=n||{},n.clobber="clobber"in n?!!n.clobber:!0,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),Nn.checkPaths(e,t,"copy",n,(i,a)=>{if(i)return r(i);const{srcStat:o,destStat:s}=a;Nn.checkParentPaths(e,o,t,"copy",l=>l?r(l):n.filter?nl(ro,s,e,t,n,r):ro(s,e,t,n,r))})}function ro(e,t,n,r,i){const a=On.dirname(n);jf(a,(o,s)=>{if(o)return i(o);if(s)return _r(e,t,n,r,i);Hf(a,l=>l?i(l):_r(e,t,n,r,i))})}function nl(e,t,n,r,i,a){Promise.resolve(i.filter(n,r)).then(o=>o?e(t,n,r,i,a):a(),o=>a(o))}function Wf(e,t,n,r,i){return r.filter?nl(_r,e,t,n,r,i):_r(e,t,n,r,i)}function _r(e,t,n,r,i){(r.dereference?Oe.stat:Oe.lstat)(t,(o,s)=>o?i(o):s.isDirectory()?Zf(s,e,t,n,r,i):s.isFile()||s.isCharacterDevice()||s.isBlockDevice()?Yf(s,e,t,n,r,i):s.isSymbolicLink()?nd(e,t,n,r,i):s.isSocket()?i(new Error(`Cannot copy a socket file: ${t}`)):s.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${t}`)):i(new Error(`Unknown file: ${t}`)))}function Yf(e,t,n,r,i,a){return t?Xf(e,n,r,i,a):rl(e,n,r,i,a)}function Xf(e,t,n,r,i){if(r.overwrite)Oe.unlink(n,a=>a?i(a):rl(e,t,n,r,i));else return r.errorOnExist?i(new Error(`'${n}' already exists`)):i()}function rl(e,t,n,r,i){Oe.copyFile(t,n,a=>a?i(a):r.preserveTimestamps?zf(e.mode,t,n,i):Pr(n,e.mode,i))}function zf(e,t,n,r){return Kf(e)?Jf(n,e,i=>i?r(i):io(e,t,n,r)):io(e,t,n,r)}function Kf(e){return(e&128)===0}function Jf(e,t,n){return Pr(e,t|128,n)}function io(e,t,n,r){Qf(t,n,i=>i?r(i):Pr(n,e,r))}function Pr(e,t,n){return Oe.chmod(e,t,n)}function Qf(e,t,n){Oe.stat(e,(r,i)=>r?n(r):Gf(t,i.atime,i.mtime,n))}function Zf(e,t,n,r,i,a){return t?il(n,r,i,a):ed(e.mode,n,r,i,a)}function ed(e,t,n,r,i){Oe.mkdir(n,a=>{if(a)return i(a);il(t,n,r,o=>o?i(o):Pr(n,e,i))})}function il(e,t,n,r){Oe.readdir(e,(i,a)=>i?r(i):al(a,e,t,n,r))}function al(e,t,n,r,i){const a=e.pop();return a?td(e,a,t,n,r,i):i()}function td(e,t,n,r,i,a){const o=On.join(n,t),s=On.join(r,t);Nn.checkPaths(o,s,"copy",i,(l,h)=>{if(l)return a(l);const{destStat:c}=h;Wf(c,o,s,i,u=>u?a(u):al(e,n,r,i,a))})}function nd(e,t,n,r,i){Oe.readlink(t,(a,o)=>{if(a)return i(a);if(r.dereference&&(o=On.resolve(process.cwd(),o)),e)Oe.readlink(n,(s,l)=>s?s.code==="EINVAL"||s.code==="UNKNOWN"?Oe.symlink(o,n,i):i(s):(r.dereference&&(l=On.resolve(process.cwd(),l)),Nn.isSrcSubdir(o,l)?i(new Error(`Cannot copy '${o}' to a subdirectory of itself, '${l}'.`)):e.isDirectory()&&Nn.isSrcSubdir(l,o)?i(new Error(`Cannot overwrite '${l}' with '${o}'.`)):rd(o,n,i)));else return Oe.symlink(o,n,i)})}function rd(e,t,n){Oe.unlink(t,r=>r?n(r):Oe.symlink(e,t,n))}var id=Vf;const _e=be,Dn=le,ad=Ye.mkdirsSync,od=Zs.utimesMillisSync,Pn=rn;function sd(e,t,n){typeof n=="function"&&(n={filter:n}),n=n||{},n.clobber="clobber"in n?!!n.clobber:!0,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:r,destStat:i}=Pn.checkPathsSync(e,t,"copy",n);return Pn.checkParentPathsSync(e,r,t,"copy"),ld(i,e,t,n)}function ld(e,t,n,r){if(r.filter&&!r.filter(t,n))return;const i=Dn.dirname(n);return _e.existsSync(i)||ad(i),ol(e,t,n,r)}function ud(e,t,n,r){if(!(r.filter&&!r.filter(t,n)))return ol(e,t,n,r)}function ol(e,t,n,r){const a=(r.dereference?_e.statSync:_e.lstatSync)(t);if(a.isDirectory())return gd(a,e,t,n,r);if(a.isFile()||a.isCharacterDevice()||a.isBlockDevice())return cd(a,e,t,n,r);if(a.isSymbolicLink())return yd(e,t,n,r);throw a.isSocket()?new Error(`Cannot copy a socket file: ${t}`):a.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function cd(e,t,n,r,i){return t?fd(e,n,r,i):sl(e,n,r,i)}function fd(e,t,n,r){if(r.overwrite)return _e.unlinkSync(n),sl(e,t,n,r);if(r.errorOnExist)throw new Error(`'${n}' already exists`)}function sl(e,t,n,r){return _e.copyFileSync(t,n),r.preserveTimestamps&&dd(e.mode,t,n),aa(n,e.mode)}function dd(e,t,n){return hd(e)&&pd(n,e),md(t,n)}function hd(e){return(e&128)===0}function pd(e,t){return aa(e,t|128)}function aa(e,t){return _e.chmodSync(e,t)}function md(e,t){const n=_e.statSync(e);return od(t,n.atime,n.mtime)}function gd(e,t,n,r,i){return t?ll(n,r,i):Ed(e.mode,n,r,i)}function Ed(e,t,n,r){return _e.mkdirSync(n),ll(t,n,r),aa(n,e)}function ll(e,t,n){_e.readdirSync(e).forEach(r=>vd(r,e,t,n))}function vd(e,t,n,r){const i=Dn.join(t,e),a=Dn.join(n,e),{destStat:o}=Pn.checkPathsSync(i,a,"copy",r);return ud(o,i,a,r)}function yd(e,t,n,r){let i=_e.readlinkSync(t);if(r.dereference&&(i=Dn.resolve(process.cwd(),i)),e){let a;try{a=_e.readlinkSync(n)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return _e.symlinkSync(i,n);throw o}if(r.dereference&&(a=Dn.resolve(process.cwd(),a)),Pn.isSrcSubdir(i,a))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${a}'.`);if(_e.statSync(n).isDirectory()&&Pn.isSrcSubdir(a,i))throw new Error(`Cannot overwrite '${a}' with '${i}'.`);return wd(i,n)}else return _e.symlinkSync(i,n)}function wd(e,t){return _e.unlinkSync(t),_e.symlinkSync(e,t)}var _d=sd;const Ad=Ce.fromCallback;var oa={copy:Ad(id),copySync:_d};const ao=be,ul=le,Q=Hs,xn=process.platform==="win32";function cl(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(n=>{e[n]=e[n]||ao[n],n=n+"Sync",e[n]=e[n]||ao[n]}),e.maxBusyTries=e.maxBusyTries||3}function sa(e,t,n){let r=0;typeof t=="function"&&(n=t,t={}),Q(e,"rimraf: missing path"),Q.strictEqual(typeof e,"string","rimraf: path should be a string"),Q.strictEqual(typeof n,"function","rimraf: callback function required"),Q(t,"rimraf: invalid options argument provided"),Q.strictEqual(typeof t,"object","rimraf: options should be object"),cl(t),oo(e,t,function i(a){if(a){if((a.code==="EBUSY"||a.code==="ENOTEMPTY"||a.code==="EPERM")&&r<t.maxBusyTries){r++;const o=r*100;return setTimeout(()=>oo(e,t,i),o)}a.code==="ENOENT"&&(a=null)}n(a)})}function oo(e,t,n){Q(e),Q(t),Q(typeof n=="function"),t.lstat(e,(r,i)=>{if(r&&r.code==="ENOENT")return n(null);if(r&&r.code==="EPERM"&&xn)return so(e,t,r,n);if(i&&i.isDirectory())return vr(e,t,r,n);t.unlink(e,a=>{if(a){if(a.code==="ENOENT")return n(null);if(a.code==="EPERM")return xn?so(e,t,a,n):vr(e,t,a,n);if(a.code==="EISDIR")return vr(e,t,a,n)}return n(a)})})}function so(e,t,n,r){Q(e),Q(t),Q(typeof r=="function"),t.chmod(e,438,i=>{i?r(i.code==="ENOENT"?null:n):t.stat(e,(a,o)=>{a?r(a.code==="ENOENT"?null:n):o.isDirectory()?vr(e,t,n,r):t.unlink(e,r)})})}function lo(e,t,n){let r;Q(e),Q(t);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw n}try{r=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw n}r.isDirectory()?yr(e,t,n):t.unlinkSync(e)}function vr(e,t,n,r){Q(e),Q(t),Q(typeof r=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?Sd(e,t,r):i&&i.code==="ENOTDIR"?r(n):r(i)})}function Sd(e,t,n){Q(e),Q(t),Q(typeof n=="function"),t.readdir(e,(r,i)=>{if(r)return n(r);let a=i.length,o;if(a===0)return t.rmdir(e,n);i.forEach(s=>{sa(ul.join(e,s),t,l=>{if(!o){if(l)return n(o=l);--a===0&&t.rmdir(e,n)}})})})}function fl(e,t){let n;t=t||{},cl(t),Q(e,"rimraf: missing path"),Q.strictEqual(typeof e,"string","rimraf: path should be a string"),Q(t,"rimraf: missing options"),Q.strictEqual(typeof t,"object","rimraf: options should be object");try{n=t.lstatSync(e)}catch(r){if(r.code==="ENOENT")return;r.code==="EPERM"&&xn&&lo(e,t,r)}try{n&&n.isDirectory()?yr(e,t,null):t.unlinkSync(e)}catch(r){if(r.code==="ENOENT")return;if(r.code==="EPERM")return xn?lo(e,t,r):yr(e,t,r);if(r.code!=="EISDIR")throw r;yr(e,t,r)}}function yr(e,t,n){Q(e),Q(t);try{t.rmdirSync(e)}catch(r){if(r.code==="ENOTDIR")throw n;if(r.code==="ENOTEMPTY"||r.code==="EEXIST"||r.code==="EPERM")Td(e,t);else if(r.code!=="ENOENT")throw r}}function Td(e,t){if(Q(e),Q(t),t.readdirSync(e).forEach(n=>fl(ul.join(e,n),t)),xn){const n=Date.now();do try{return t.rmdirSync(e,t)}catch{}while(Date.now()-n<500)}else return t.rmdirSync(e,t)}var Cd=sa;sa.sync=fl;const Ar=be,bd=Ce.fromCallback,dl=Cd;function Rd(e,t){if(Ar.rm)return Ar.rm(e,{recursive:!0,force:!0},t);dl(e,t)}function Id(e){if(Ar.rmSync)return Ar.rmSync(e,{recursive:!0,force:!0});dl.sync(e)}var xr={remove:bd(Rd),removeSync:Id};const $d=Ce.fromPromise,hl=Pt,pl=le,ml=Ye,gl=xr,uo=$d(async function(t){let n;try{n=await hl.readdir(t)}catch{return ml.mkdirs(t)}return Promise.all(n.map(r=>gl.remove(pl.join(t,r))))});function co(e){let t;try{t=hl.readdirSync(e)}catch{return ml.mkdirsSync(e)}t.forEach(n=>{n=pl.join(e,n),gl.removeSync(n)})}var Od={emptyDirSync:co,emptydirSync:co,emptyDir:uo,emptydir:uo};const Nd=Ce.fromCallback,El=le,ut=be,vl=Ye;function Dd(e,t){function n(){ut.writeFile(e,"",r=>{if(r)return t(r);t()})}ut.stat(e,(r,i)=>{if(!r&&i.isFile())return t();const a=El.dirname(e);ut.stat(a,(o,s)=>{if(o)return o.code==="ENOENT"?vl.mkdirs(a,l=>{if(l)return t(l);n()}):t(o);s.isDirectory()?n():ut.readdir(a,l=>{if(l)return t(l)})})})}function Pd(e){let t;try{t=ut.statSync(e)}catch{}if(t&&t.isFile())return;const n=El.dirname(e);try{ut.statSync(n).isDirectory()||ut.readdirSync(n)}catch(r){if(r&&r.code==="ENOENT")vl.mkdirsSync(n);else throw r}ut.writeFileSync(e,"")}var xd={createFile:Nd(Dd),createFileSync:Pd};const Fd=Ce.fromCallback,yl=le,lt=be,wl=Ye,Ld=xt.pathExists,{areIdentical:_l}=rn;function Ud(e,t,n){function r(i,a){lt.link(i,a,o=>{if(o)return n(o);n(null)})}lt.lstat(t,(i,a)=>{lt.lstat(e,(o,s)=>{if(o)return o.message=o.message.replace("lstat","ensureLink"),n(o);if(a&&_l(s,a))return n(null);const l=yl.dirname(t);Ld(l,(h,c)=>{if(h)return n(h);if(c)return r(e,t);wl.mkdirs(l,u=>{if(u)return n(u);r(e,t)})})})})}function kd(e,t){let n;try{n=lt.lstatSync(t)}catch{}try{const a=lt.lstatSync(e);if(n&&_l(a,n))return}catch(a){throw a.message=a.message.replace("lstat","ensureLink"),a}const r=yl.dirname(t);return lt.existsSync(r)||wl.mkdirsSync(r),lt.linkSync(e,t)}var Md={createLink:Fd(Ud),createLinkSync:kd};const ct=le,Cn=be,Bd=xt.pathExists;function qd(e,t,n){if(ct.isAbsolute(e))return Cn.lstat(e,r=>r?(r.message=r.message.replace("lstat","ensureSymlink"),n(r)):n(null,{toCwd:e,toDst:e}));{const r=ct.dirname(t),i=ct.join(r,e);return Bd(i,(a,o)=>a?n(a):o?n(null,{toCwd:i,toDst:e}):Cn.lstat(e,s=>s?(s.message=s.message.replace("lstat","ensureSymlink"),n(s)):n(null,{toCwd:e,toDst:ct.relative(r,e)})))}}function Hd(e,t){let n;if(ct.isAbsolute(e)){if(n=Cn.existsSync(e),!n)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{const r=ct.dirname(t),i=ct.join(r,e);if(n=Cn.existsSync(i),n)return{toCwd:i,toDst:e};if(n=Cn.existsSync(e),!n)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:ct.relative(r,e)}}}var jd={symlinkPaths:qd,symlinkPathsSync:Hd};const Al=be;function Gd(e,t,n){if(n=typeof t=="function"?t:n,t=typeof t=="function"?!1:t,t)return n(null,t);Al.lstat(e,(r,i)=>{if(r)return n(null,"file");t=i&&i.isDirectory()?"dir":"file",n(null,t)})}function Vd(e,t){let n;if(t)return t;try{n=Al.lstatSync(e)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}var Wd={symlinkType:Gd,symlinkTypeSync:Vd};const Yd=Ce.fromCallback,Sl=le,Me=Pt,Tl=Ye,Xd=Tl.mkdirs,zd=Tl.mkdirsSync,Cl=jd,Kd=Cl.symlinkPaths,Jd=Cl.symlinkPathsSync,bl=Wd,Qd=bl.symlinkType,Zd=bl.symlinkTypeSync,eh=xt.pathExists,{areIdentical:Rl}=rn;function th(e,t,n,r){r=typeof n=="function"?n:r,n=typeof n=="function"?!1:n,Me.lstat(t,(i,a)=>{!i&&a.isSymbolicLink()?Promise.all([Me.stat(e),Me.stat(t)]).then(([o,s])=>{if(Rl(o,s))return r(null);fo(e,t,n,r)}):fo(e,t,n,r)})}function fo(e,t,n,r){Kd(e,t,(i,a)=>{if(i)return r(i);e=a.toDst,Qd(a.toCwd,n,(o,s)=>{if(o)return r(o);const l=Sl.dirname(t);eh(l,(h,c)=>{if(h)return r(h);if(c)return Me.symlink(e,t,s,r);Xd(l,u=>{if(u)return r(u);Me.symlink(e,t,s,r)})})})})}function nh(e,t,n){let r;try{r=Me.lstatSync(t)}catch{}if(r&&r.isSymbolicLink()){const s=Me.statSync(e),l=Me.statSync(t);if(Rl(s,l))return}const i=Jd(e,t);e=i.toDst,n=Zd(i.toCwd,n);const a=Sl.dirname(t);return Me.existsSync(a)||zd(a),Me.symlinkSync(e,t,n)}var rh={createSymlink:Yd(th),createSymlinkSync:nh};const{createFile:ho,createFileSync:po}=xd,{createLink:mo,createLinkSync:go}=Md,{createSymlink:Eo,createSymlinkSync:vo}=rh;var ih={createFile:ho,createFileSync:po,ensureFile:ho,ensureFileSync:po,createLink:mo,createLinkSync:go,ensureLink:mo,ensureLinkSync:go,createSymlink:Eo,createSymlinkSync:vo,ensureSymlink:Eo,ensureSymlinkSync:vo};function ah(e,{EOL:t=`
`,finalEOL:n=!0,replacer:r=null,spaces:i}={}){const a=n?t:"";return JSON.stringify(e,r,i).replace(/\n/g,t)+a}function oh(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}var la={stringify:ah,stripBom:oh};let Jt;try{Jt=be}catch{Jt=pt}const Fr=Ce,{stringify:Il,stripBom:$l}=la;async function sh(e,t={}){typeof t=="string"&&(t={encoding:t});const n=t.fs||Jt,r="throws"in t?t.throws:!0;let i=await Fr.fromCallback(n.readFile)(e,t);i=$l(i);let a;try{a=JSON.parse(i,t?t.reviver:null)}catch(o){if(r)throw o.message=`${e}: ${o.message}`,o;return null}return a}const lh=Fr.fromPromise(sh);function uh(e,t={}){typeof t=="string"&&(t={encoding:t});const n=t.fs||Jt,r="throws"in t?t.throws:!0;try{let i=n.readFileSync(e,t);return i=$l(i),JSON.parse(i,t.reviver)}catch(i){if(r)throw i.message=`${e}: ${i.message}`,i;return null}}async function ch(e,t,n={}){const r=n.fs||Jt,i=Il(t,n);await Fr.fromCallback(r.writeFile)(e,i,n)}const fh=Fr.fromPromise(ch);function dh(e,t,n={}){const r=n.fs||Jt,i=Il(t,n);return r.writeFileSync(e,i,n)}const hh={readFile:lh,readFileSync:uh,writeFile:fh,writeFileSync:dh};var ph=hh;const ur=ph;var mh={readJson:ur.readFile,readJsonSync:ur.readFileSync,writeJson:ur.writeFile,writeJsonSync:ur.writeFileSync};const gh=Ce.fromCallback,bn=be,Ol=le,Nl=Ye,Eh=xt.pathExists;function vh(e,t,n,r){typeof n=="function"&&(r=n,n="utf8");const i=Ol.dirname(e);Eh(i,(a,o)=>{if(a)return r(a);if(o)return bn.writeFile(e,t,n,r);Nl.mkdirs(i,s=>{if(s)return r(s);bn.writeFile(e,t,n,r)})})}function yh(e,...t){const n=Ol.dirname(e);if(bn.existsSync(n))return bn.writeFileSync(e,...t);Nl.mkdirsSync(n),bn.writeFileSync(e,...t)}var ua={outputFile:gh(vh),outputFileSync:yh};const{stringify:wh}=la,{outputFile:_h}=ua;async function Ah(e,t,n={}){const r=wh(t,n);await _h(e,r,n)}var Sh=Ah;const{stringify:Th}=la,{outputFileSync:Ch}=ua;function bh(e,t,n){const r=Th(t,n);Ch(e,r,n)}var Rh=bh;const Ih=Ce.fromPromise,Te=mh;Te.outputJson=Ih(Sh);Te.outputJsonSync=Rh;Te.outputJSON=Te.outputJson;Te.outputJSONSync=Te.outputJsonSync;Te.writeJSON=Te.writeJson;Te.writeJSONSync=Te.writeJsonSync;Te.readJSON=Te.readJson;Te.readJSONSync=Te.readJsonSync;var $h=Te;const Oh=be,qi=le,Nh=oa.copy,Dl=xr.remove,Dh=Ye.mkdirp,Ph=xt.pathExists,yo=rn;function xh(e,t,n,r){typeof n=="function"&&(r=n,n={}),n=n||{};const i=n.overwrite||n.clobber||!1;yo.checkPaths(e,t,"move",n,(a,o)=>{if(a)return r(a);const{srcStat:s,isChangingCase:l=!1}=o;yo.checkParentPaths(e,s,t,"move",h=>{if(h)return r(h);if(Fh(t))return wo(e,t,i,l,r);Dh(qi.dirname(t),c=>c?r(c):wo(e,t,i,l,r))})})}function Fh(e){const t=qi.dirname(e);return qi.parse(t).root===t}function wo(e,t,n,r,i){if(r)return gi(e,t,n,i);if(n)return Dl(t,a=>a?i(a):gi(e,t,n,i));Ph(t,(a,o)=>a?i(a):o?i(new Error("dest already exists.")):gi(e,t,n,i))}function gi(e,t,n,r){Oh.rename(e,t,i=>i?i.code!=="EXDEV"?r(i):Lh(e,t,n,r):r())}function Lh(e,t,n,r){Nh(e,t,{overwrite:n,errorOnExist:!0},a=>a?r(a):Dl(e,r))}var Uh=xh;const Pl=be,Hi=le,kh=oa.copySync,xl=xr.removeSync,Mh=Ye.mkdirpSync,_o=rn;function Bh(e,t,n){n=n||{};const r=n.overwrite||n.clobber||!1,{srcStat:i,isChangingCase:a=!1}=_o.checkPathsSync(e,t,"move",n);return _o.checkParentPathsSync(e,i,t,"move"),qh(t)||Mh(Hi.dirname(t)),Hh(e,t,r,a)}function qh(e){const t=Hi.dirname(e);return Hi.parse(t).root===t}function Hh(e,t,n,r){if(r)return Ei(e,t,n);if(n)return xl(t),Ei(e,t,n);if(Pl.existsSync(t))throw new Error("dest already exists.");return Ei(e,t,n)}function Ei(e,t,n){try{Pl.renameSync(e,t)}catch(r){if(r.code!=="EXDEV")throw r;return jh(e,t,n)}}function jh(e,t,n){return kh(e,t,{overwrite:n,errorOnExist:!0}),xl(e)}var Gh=Bh;const Vh=Ce.fromCallback;var Wh={move:Vh(Uh),moveSync:Gh},mt={...Pt,...oa,...Od,...ih,...$h,...Ye,...Wh,...ua,...xt,...xr},St={},ye={},ca={},qe={};function Fl(e){return typeof e>"u"||e===null}function Yh(e){return typeof e=="object"&&e!==null}function Xh(e){return Array.isArray(e)?e:Fl(e)?[]:[e]}function zh(e,t){var n,r,i,a;if(t)for(a=Object.keys(t),n=0,r=a.length;n<r;n+=1)i=a[n],e[i]=t[i];return e}function Kh(e,t){var n="",r;for(r=0;r<t;r+=1)n+=e;return n}function Jh(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}qe.isNothing=Fl;qe.isObject=Yh;qe.toArray=Xh;qe.repeat=Kh;qe.isNegativeZero=Jh;qe.extend=zh;function Ll(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),r+" "+n):r}function Fn(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Ll(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Fn.prototype=Object.create(Error.prototype);Fn.prototype.constructor=Fn;Fn.prototype.toString=function(t){return this.name+": "+Ll(this,t)};var jn=Fn,Sn=qe;function vi(e,t,n,r,i){var a="",o="",s=Math.floor(i/2)-1;return r-t>s&&(a=" ... ",t=r-s+a.length),n-r>s&&(o=" ...",n=r+s-o.length),{str:a+e.slice(t,n).replace(/\t/g,"")+o,pos:r-t+a.length}}function yi(e,t){return Sn.repeat(" ",t-e.length)+e}function Qh(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],a,o=-1;a=n.exec(e.buffer);)i.push(a.index),r.push(a.index+a[0].length),e.position<=a.index&&o<0&&(o=r.length-2);o<0&&(o=r.length-1);var s="",l,h,c=Math.min(e.line+t.linesAfter,i.length).toString().length,u=t.maxLength-(t.indent+c+3);for(l=1;l<=t.linesBefore&&!(o-l<0);l++)h=vi(e.buffer,r[o-l],i[o-l],e.position-(r[o]-r[o-l]),u),s=Sn.repeat(" ",t.indent)+yi((e.line-l+1).toString(),c)+" | "+h.str+`
`+s;for(h=vi(e.buffer,r[o],i[o],e.position,u),s+=Sn.repeat(" ",t.indent)+yi((e.line+1).toString(),c)+" | "+h.str+`
`,s+=Sn.repeat("-",t.indent+c+3+h.pos)+`^
`,l=1;l<=t.linesAfter&&!(o+l>=i.length);l++)h=vi(e.buffer,r[o+l],i[o+l],e.position-(r[o]-r[o+l]),u),s+=Sn.repeat(" ",t.indent)+yi((e.line+l+1).toString(),c)+" | "+h.str+`
`;return s.replace(/\n$/,"")}var Zh=Qh,Ao=jn,ep=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],tp=["scalar","sequence","mapping"];function np(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(r){t[String(r)]=n})}),t}function rp(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(ep.indexOf(n)===-1)throw new Ao('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=np(t.styleAliases||null),tp.indexOf(this.kind)===-1)throw new Ao('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Re=rp,hn=jn,wi=Re;function So(e,t){var n=[];return e[t].forEach(function(r){var i=n.length;n.forEach(function(a,o){a.tag===r.tag&&a.kind===r.kind&&a.multi===r.multi&&(i=o)}),n[i]=r}),n}function ip(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function r(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(r);return e}function ji(e){return this.extend(e)}ji.prototype.extend=function(t){var n=[],r=[];if(t instanceof wi)r.push(t);else if(Array.isArray(t))r=r.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(r=r.concat(t.explicit));else throw new hn("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(a){if(!(a instanceof wi))throw new hn("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(a.loadKind&&a.loadKind!=="scalar")throw new hn("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(a.multi)throw new hn("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(a){if(!(a instanceof wi))throw new hn("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(ji.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=So(i,"implicit"),i.compiledExplicit=So(i,"explicit"),i.compiledTypeMap=ip(i.compiledImplicit,i.compiledExplicit),i};var Ul=ji,ap=Re,kl=new ap("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),op=Re,Ml=new op("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),sp=Re,Bl=new sp("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),lp=Ul,ql=new lp({explicit:[kl,Ml,Bl]}),up=Re;function cp(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function fp(){return null}function dp(e){return e===null}var Hl=new up("tag:yaml.org,2002:null",{kind:"scalar",resolve:cp,construct:fp,predicate:dp,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),hp=Re;function pp(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function mp(e){return e==="true"||e==="True"||e==="TRUE"}function gp(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var jl=new hp("tag:yaml.org,2002:bool",{kind:"scalar",resolve:pp,construct:mp,predicate:gp,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"}),Ep=qe,vp=Re;function yp(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function wp(e){return 48<=e&&e<=55}function _p(e){return 48<=e&&e<=57}function Ap(e){if(e===null)return!1;var t=e.length,n=0,r=!1,i;if(!t)return!1;if(i=e[n],(i==="-"||i==="+")&&(i=e[++n]),i==="0"){if(n+1===t)return!0;if(i=e[++n],i==="b"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!yp(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!wp(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<t;n++)if(i=e[n],i!=="_"){if(!_p(e.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}function Sp(e){var t=e,n=1,r;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),r=t[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),t=t.slice(1),r=t[0]),t==="0")return 0;if(r==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function Tp(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Ep.isNegativeZero(e)}var Gl=new vp("tag:yaml.org,2002:int",{kind:"scalar",resolve:Ap,construct:Sp,predicate:Tp,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Vl=qe,Cp=Re,bp=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Rp(e){return!(e===null||!bp.test(e)||e[e.length-1]==="_")}function Ip(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var $p=/^[-+]?[0-9]+e/;function Op(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Vl.isNegativeZero(e))return"-0.0";return n=e.toString(10),$p.test(n)?n.replace("e",".e"):n}function Np(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Vl.isNegativeZero(e))}var Wl=new Cp("tag:yaml.org,2002:float",{kind:"scalar",resolve:Rp,construct:Ip,predicate:Np,represent:Op,defaultStyle:"lowercase"}),Yl=ql.extend({implicit:[Hl,jl,Gl,Wl]}),Xl=Yl,Dp=Re,zl=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Kl=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Pp(e){return e===null?!1:zl.exec(e)!==null||Kl.exec(e)!==null}function xp(e){var t,n,r,i,a,o,s,l=0,h=null,c,u,d;if(t=zl.exec(e),t===null&&(t=Kl.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(a=+t[4],o=+t[5],s=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(c=+t[10],u=+(t[11]||0),h=(c*60+u)*6e4,t[9]==="-"&&(h=-h)),d=new Date(Date.UTC(n,r,i,a,o,s,l)),h&&d.setTime(d.getTime()-h),d}function Fp(e){return e.toISOString()}var Jl=new Dp("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Pp,construct:xp,instanceOf:Date,represent:Fp}),Lp=Re;function Up(e){return e==="<<"||e===null}var Ql=new Lp("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Up}),kp=Re,fa=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Mp(e){if(e===null)return!1;var t,n,r=0,i=e.length,a=fa;for(n=0;n<i;n++)if(t=a.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;r+=6}return r%8===0}function Bp(e){var t,n,r=e.replace(/[\r\n=]/g,""),i=r.length,a=fa,o=0,s=[];for(t=0;t<i;t++)t%4===0&&t&&(s.push(o>>16&255),s.push(o>>8&255),s.push(o&255)),o=o<<6|a.indexOf(r.charAt(t));return n=i%4*6,n===0?(s.push(o>>16&255),s.push(o>>8&255),s.push(o&255)):n===18?(s.push(o>>10&255),s.push(o>>2&255)):n===12&&s.push(o>>4&255),new Uint8Array(s)}function qp(e){var t="",n=0,r,i,a=e.length,o=fa;for(r=0;r<a;r++)r%3===0&&r&&(t+=o[n>>18&63],t+=o[n>>12&63],t+=o[n>>6&63],t+=o[n&63]),n=(n<<8)+e[r];return i=a%3,i===0?(t+=o[n>>18&63],t+=o[n>>12&63],t+=o[n>>6&63],t+=o[n&63]):i===2?(t+=o[n>>10&63],t+=o[n>>4&63],t+=o[n<<2&63],t+=o[64]):i===1&&(t+=o[n>>2&63],t+=o[n<<4&63],t+=o[64],t+=o[64]),t}function Hp(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var Zl=new kp("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Mp,construct:Bp,predicate:Hp,represent:qp}),jp=Re,Gp=Object.prototype.hasOwnProperty,Vp=Object.prototype.toString;function Wp(e){if(e===null)return!0;var t=[],n,r,i,a,o,s=e;for(n=0,r=s.length;n<r;n+=1){if(i=s[n],o=!1,Vp.call(i)!=="[object Object]")return!1;for(a in i)if(Gp.call(i,a))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(a)===-1)t.push(a);else return!1}return!0}function Yp(e){return e!==null?e:[]}var eu=new jp("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Wp,construct:Yp}),Xp=Re,zp=Object.prototype.toString;function Kp(e){if(e===null)return!0;var t,n,r,i,a,o=e;for(a=new Array(o.length),t=0,n=o.length;t<n;t+=1){if(r=o[t],zp.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;a[t]=[i[0],r[i[0]]]}return!0}function Jp(e){if(e===null)return[];var t,n,r,i,a,o=e;for(a=new Array(o.length),t=0,n=o.length;t<n;t+=1)r=o[t],i=Object.keys(r),a[t]=[i[0],r[i[0]]];return a}var tu=new Xp("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Kp,construct:Jp}),Qp=Re,Zp=Object.prototype.hasOwnProperty;function em(e){if(e===null)return!0;var t,n=e;for(t in n)if(Zp.call(n,t)&&n[t]!==null)return!1;return!0}function tm(e){return e!==null?e:{}}var nu=new Qp("tag:yaml.org,2002:set",{kind:"mapping",resolve:em,construct:tm}),da=Xl.extend({implicit:[Jl,Ql],explicit:[Zl,eu,tu,nu]}),Ct=qe,ru=jn,nm=Zh,rm=da,dt=Object.prototype.hasOwnProperty,Sr=1,iu=2,au=3,Tr=4,_i=1,im=2,To=3,am=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,om=/[\x85\u2028\u2029]/,sm=/[,\[\]\{\}]/,ou=/^(?:!|!!|![a-z\-]+!)$/i,su=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Co(e){return Object.prototype.toString.call(e)}function We(e){return e===10||e===13}function $t(e){return e===9||e===32}function Ne(e){return e===9||e===32||e===10||e===13}function jt(e){return e===44||e===91||e===93||e===123||e===125}function lm(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function um(e){return e===120?2:e===117?4:e===85?8:0}function cm(e){return 48<=e&&e<=57?e-48:-1}function bo(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function fm(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var lu=new Array(256),uu=new Array(256);for(var Ut=0;Ut<256;Ut++)lu[Ut]=bo(Ut)?1:0,uu[Ut]=bo(Ut);function dm(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||rm,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function cu(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=nm(n),new ru(t,n)}function G(e,t){throw cu(e,t)}function Cr(e,t){e.onWarning&&e.onWarning.call(null,cu(e,t))}var Ro={YAML:function(t,n,r){var i,a,o;t.version!==null&&G(t,"duplication of %YAML directive"),r.length!==1&&G(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&G(t,"ill-formed argument of the YAML directive"),a=parseInt(i[1],10),o=parseInt(i[2],10),a!==1&&G(t,"unacceptable YAML version of the document"),t.version=r[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&Cr(t,"unsupported YAML version of the document")},TAG:function(t,n,r){var i,a;r.length!==2&&G(t,"TAG directive accepts exactly two arguments"),i=r[0],a=r[1],ou.test(i)||G(t,"ill-formed tag handle (first argument) of the TAG directive"),dt.call(t.tagMap,i)&&G(t,'there is a previously declared suffix for "'+i+'" tag handle'),su.test(a)||G(t,"ill-formed tag prefix (second argument) of the TAG directive");try{a=decodeURIComponent(a)}catch{G(t,"tag prefix is malformed: "+a)}t.tagMap[i]=a}};function ft(e,t,n,r){var i,a,o,s;if(t<n){if(s=e.input.slice(t,n),r)for(i=0,a=s.length;i<a;i+=1)o=s.charCodeAt(i),o===9||32<=o&&o<=1114111||G(e,"expected valid JSON character");else am.test(s)&&G(e,"the stream contains non-printable characters");e.result+=s}}function Io(e,t,n,r){var i,a,o,s;for(Ct.isObject(n)||G(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),o=0,s=i.length;o<s;o+=1)a=i[o],dt.call(t,a)||(t[a]=n[a],r[a]=!0)}function Gt(e,t,n,r,i,a,o,s,l){var h,c;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),h=0,c=i.length;h<c;h+=1)Array.isArray(i[h])&&G(e,"nested arrays are not supported inside keys"),typeof i=="object"&&Co(i[h])==="[object Object]"&&(i[h]="[object Object]");if(typeof i=="object"&&Co(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(a))for(h=0,c=a.length;h<c;h+=1)Io(e,t,a[h],n);else Io(e,t,a,n);else!e.json&&!dt.call(n,i)&&dt.call(t,i)&&(e.line=o||e.line,e.lineStart=s||e.lineStart,e.position=l||e.position,G(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:a}):t[i]=a,delete n[i];return t}function ha(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):G(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function ue(e,t,n){for(var r=0,i=e.input.charCodeAt(e.position);i!==0;){for(;$t(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(We(i))for(ha(e),i=e.input.charCodeAt(e.position),r++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return n!==-1&&r!==0&&e.lineIndent<n&&Cr(e,"deficient indentation"),r}function Lr(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||Ne(n)))}function pa(e,t){t===1?e.result+=" ":t>1&&(e.result+=Ct.repeat(`
`,t-1))}function hm(e,t,n){var r,i,a,o,s,l,h,c,u=e.kind,d=e.result,p;if(p=e.input.charCodeAt(e.position),Ne(p)||jt(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(i=e.input.charCodeAt(e.position+1),Ne(i)||n&&jt(i)))return!1;for(e.kind="scalar",e.result="",a=o=e.position,s=!1;p!==0;){if(p===58){if(i=e.input.charCodeAt(e.position+1),Ne(i)||n&&jt(i))break}else if(p===35){if(r=e.input.charCodeAt(e.position-1),Ne(r))break}else{if(e.position===e.lineStart&&Lr(e)||n&&jt(p))break;if(We(p))if(l=e.line,h=e.lineStart,c=e.lineIndent,ue(e,!1,-1),e.lineIndent>=t){s=!0,p=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=l,e.lineStart=h,e.lineIndent=c;break}}s&&(ft(e,a,o,!1),pa(e,e.line-l),a=o=e.position,s=!1),$t(p)||(o=e.position+1),p=e.input.charCodeAt(++e.position)}return ft(e,a,o,!1),e.result?!0:(e.kind=u,e.result=d,!1)}function pm(e,t){var n,r,i;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(ft(e,r,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)r=e.position,e.position++,i=e.position;else return!0;else We(n)?(ft(e,r,i,!0),pa(e,ue(e,!1,t)),r=i=e.position):e.position===e.lineStart&&Lr(e)?G(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);G(e,"unexpected end of the stream within a single quoted scalar")}function mm(e,t){var n,r,i,a,o,s;if(s=e.input.charCodeAt(e.position),s!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;(s=e.input.charCodeAt(e.position))!==0;){if(s===34)return ft(e,n,e.position,!0),e.position++,!0;if(s===92){if(ft(e,n,e.position,!0),s=e.input.charCodeAt(++e.position),We(s))ue(e,!1,t);else if(s<256&&lu[s])e.result+=uu[s],e.position++;else if((o=um(s))>0){for(i=o,a=0;i>0;i--)s=e.input.charCodeAt(++e.position),(o=lm(s))>=0?a=(a<<4)+o:G(e,"expected hexadecimal character");e.result+=fm(a),e.position++}else G(e,"unknown escape sequence");n=r=e.position}else We(s)?(ft(e,n,r,!0),pa(e,ue(e,!1,t)),n=r=e.position):e.position===e.lineStart&&Lr(e)?G(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}G(e,"unexpected end of the stream within a double quoted scalar")}function gm(e,t){var n=!0,r,i,a,o=e.tag,s,l=e.anchor,h,c,u,d,p,y=Object.create(null),w,A,b,E;if(E=e.input.charCodeAt(e.position),E===91)c=93,p=!1,s=[];else if(E===123)c=125,p=!0,s={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),E=e.input.charCodeAt(++e.position);E!==0;){if(ue(e,!0,t),E=e.input.charCodeAt(e.position),E===c)return e.position++,e.tag=o,e.anchor=l,e.kind=p?"mapping":"sequence",e.result=s,!0;n?E===44&&G(e,"expected the node content, but found ','"):G(e,"missed comma between flow collection entries"),A=w=b=null,u=d=!1,E===63&&(h=e.input.charCodeAt(e.position+1),Ne(h)&&(u=d=!0,e.position++,ue(e,!0,t))),r=e.line,i=e.lineStart,a=e.position,Qt(e,t,Sr,!1,!0),A=e.tag,w=e.result,ue(e,!0,t),E=e.input.charCodeAt(e.position),(d||e.line===r)&&E===58&&(u=!0,E=e.input.charCodeAt(++e.position),ue(e,!0,t),Qt(e,t,Sr,!1,!0),b=e.result),p?Gt(e,s,y,A,w,b,r,i,a):u?s.push(Gt(e,null,y,A,w,b,r,i,a)):s.push(w),ue(e,!0,t),E=e.input.charCodeAt(e.position),E===44?(n=!0,E=e.input.charCodeAt(++e.position)):n=!1}G(e,"unexpected end of the stream within a flow collection")}function Em(e,t){var n,r,i=_i,a=!1,o=!1,s=t,l=0,h=!1,c,u;if(u=e.input.charCodeAt(e.position),u===124)r=!1;else if(u===62)r=!0;else return!1;for(e.kind="scalar",e.result="";u!==0;)if(u=e.input.charCodeAt(++e.position),u===43||u===45)_i===i?i=u===43?To:im:G(e,"repeat of a chomping mode identifier");else if((c=cm(u))>=0)c===0?G(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?G(e,"repeat of an indentation width identifier"):(s=t+c-1,o=!0);else break;if($t(u)){do u=e.input.charCodeAt(++e.position);while($t(u));if(u===35)do u=e.input.charCodeAt(++e.position);while(!We(u)&&u!==0)}for(;u!==0;){for(ha(e),e.lineIndent=0,u=e.input.charCodeAt(e.position);(!o||e.lineIndent<s)&&u===32;)e.lineIndent++,u=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>s&&(s=e.lineIndent),We(u)){l++;continue}if(e.lineIndent<s){i===To?e.result+=Ct.repeat(`
`,a?1+l:l):i===_i&&a&&(e.result+=`
`);break}for(r?$t(u)?(h=!0,e.result+=Ct.repeat(`
`,a?1+l:l)):h?(h=!1,e.result+=Ct.repeat(`
`,l+1)):l===0?a&&(e.result+=" "):e.result+=Ct.repeat(`
`,l):e.result+=Ct.repeat(`
`,a?1+l:l),a=!0,o=!0,l=0,n=e.position;!We(u)&&u!==0;)u=e.input.charCodeAt(++e.position);ft(e,n,e.position,!1)}return!0}function $o(e,t){var n,r=e.tag,i=e.anchor,a=[],o,s=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,G(e,"tab characters must not be used in indentation")),!(l!==45||(o=e.input.charCodeAt(e.position+1),!Ne(o))));){if(s=!0,e.position++,ue(e,!0,-1)&&e.lineIndent<=t){a.push(null),l=e.input.charCodeAt(e.position);continue}if(n=e.line,Qt(e,t,au,!1,!0),a.push(e.result),ue(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&l!==0)G(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return s?(e.tag=r,e.anchor=i,e.kind="sequence",e.result=a,!0):!1}function vm(e,t,n){var r,i,a,o,s,l,h=e.tag,c=e.anchor,u={},d=Object.create(null),p=null,y=null,w=null,A=!1,b=!1,E;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=u),E=e.input.charCodeAt(e.position);E!==0;){if(!A&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,G(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),a=e.line,(E===63||E===58)&&Ne(r))E===63?(A&&(Gt(e,u,d,p,y,null,o,s,l),p=y=w=null),b=!0,A=!0,i=!0):A?(A=!1,i=!0):G(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,E=r;else{if(o=e.line,s=e.lineStart,l=e.position,!Qt(e,n,iu,!1,!0))break;if(e.line===a){for(E=e.input.charCodeAt(e.position);$t(E);)E=e.input.charCodeAt(++e.position);if(E===58)E=e.input.charCodeAt(++e.position),Ne(E)||G(e,"a whitespace character is expected after the key-value separator within a block mapping"),A&&(Gt(e,u,d,p,y,null,o,s,l),p=y=w=null),b=!0,A=!1,i=!1,p=e.tag,y=e.result;else if(b)G(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=h,e.anchor=c,!0}else if(b)G(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=h,e.anchor=c,!0}if((e.line===a||e.lineIndent>t)&&(A&&(o=e.line,s=e.lineStart,l=e.position),Qt(e,t,Tr,!0,i)&&(A?y=e.result:w=e.result),A||(Gt(e,u,d,p,y,w,o,s,l),p=y=w=null),ue(e,!0,-1),E=e.input.charCodeAt(e.position)),(e.line===a||e.lineIndent>t)&&E!==0)G(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return A&&Gt(e,u,d,p,y,null,o,s,l),b&&(e.tag=h,e.anchor=c,e.kind="mapping",e.result=u),b}function ym(e){var t,n=!1,r=!1,i,a,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&G(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(n=!0,o=e.input.charCodeAt(++e.position)):o===33?(r=!0,i="!!",o=e.input.charCodeAt(++e.position)):i="!",t=e.position,n){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(a=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):G(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!Ne(o);)o===33&&(r?G(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),ou.test(i)||G(e,"named tag handle cannot contain such characters"),r=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);a=e.input.slice(t,e.position),sm.test(a)&&G(e,"tag suffix cannot contain flow indicator characters")}a&&!su.test(a)&&G(e,"tag name cannot contain such characters: "+a);try{a=decodeURIComponent(a)}catch{G(e,"tag name is malformed: "+a)}return n?e.tag=a:dt.call(e.tagMap,i)?e.tag=e.tagMap[i]+a:i==="!"?e.tag="!"+a:i==="!!"?e.tag="tag:yaml.org,2002:"+a:G(e,'undeclared tag handle "'+i+'"'),!0}function wm(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&G(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Ne(n)&&!jt(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&G(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function _m(e){var t,n,r;if(r=e.input.charCodeAt(e.position),r!==42)return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!Ne(r)&&!jt(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&G(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),dt.call(e.anchorMap,n)||G(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],ue(e,!0,-1),!0}function Qt(e,t,n,r,i){var a,o,s,l=1,h=!1,c=!1,u,d,p,y,w,A;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,a=o=s=Tr===n||au===n,r&&ue(e,!0,-1)&&(h=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;ym(e)||wm(e);)ue(e,!0,-1)?(h=!0,s=a,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):s=!1;if(s&&(s=h||i),(l===1||Tr===n)&&(Sr===n||iu===n?w=t:w=t+1,A=e.position-e.lineStart,l===1?s&&($o(e,A)||vm(e,A,w))||gm(e,w)?c=!0:(o&&Em(e,w)||pm(e,w)||mm(e,w)?c=!0:_m(e)?(c=!0,(e.tag!==null||e.anchor!==null)&&G(e,"alias node should not have any properties")):hm(e,w,Sr===n)&&(c=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(c=s&&$o(e,A))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&G(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),u=0,d=e.implicitTypes.length;u<d;u+=1)if(y=e.implicitTypes[u],y.resolve(e.result)){e.result=y.construct(e.result),e.tag=y.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(dt.call(e.typeMap[e.kind||"fallback"],e.tag))y=e.typeMap[e.kind||"fallback"][e.tag];else for(y=null,p=e.typeMap.multi[e.kind||"fallback"],u=0,d=p.length;u<d;u+=1)if(e.tag.slice(0,p[u].tag.length)===p[u].tag){y=p[u];break}y||G(e,"unknown tag !<"+e.tag+">"),e.result!==null&&y.kind!==e.kind&&G(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+y.kind+'", not "'+e.kind+'"'),y.resolve(e.result,e.tag)?(e.result=y.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):G(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||c}function Am(e){var t=e.position,n,r,i,a=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(ue(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(a=!0,o=e.input.charCodeAt(++e.position),n=e.position;o!==0&&!Ne(o);)o=e.input.charCodeAt(++e.position);for(r=e.input.slice(n,e.position),i=[],r.length<1&&G(e,"directive name must not be less than one character in length");o!==0;){for(;$t(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!We(o));break}if(We(o))break;for(n=e.position;o!==0&&!Ne(o);)o=e.input.charCodeAt(++e.position);i.push(e.input.slice(n,e.position))}o!==0&&ha(e),dt.call(Ro,r)?Ro[r](e,r,i):Cr(e,'unknown document directive "'+r+'"')}if(ue(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,ue(e,!0,-1)):a&&G(e,"directives end mark is expected"),Qt(e,e.lineIndent-1,Tr,!1,!0),ue(e,!0,-1),e.checkLineBreaks&&om.test(e.input.slice(t,e.position))&&Cr(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Lr(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,ue(e,!0,-1));return}if(e.position<e.length-1)G(e,"end of the stream or a document separator is expected");else return}function fu(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new dm(e,t),r=e.indexOf("\0");for(r!==-1&&(n.position=r,G(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)Am(n);return n.documents}function Sm(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var r=fu(e,n);if(typeof t!="function")return r;for(var i=0,a=r.length;i<a;i+=1)t(r[i])}function Tm(e,t){var n=fu(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new ru("expected a single document in the stream, but found more")}}ca.loadAll=Sm;ca.load=Tm;var du={},Ur=qe,Gn=jn,Cm=da,hu=Object.prototype.toString,pu=Object.prototype.hasOwnProperty,ma=65279,bm=9,Ln=10,Rm=13,Im=32,$m=33,Om=34,Gi=35,Nm=37,Dm=38,Pm=39,xm=42,mu=44,Fm=45,br=58,Lm=61,Um=62,km=63,Mm=64,gu=91,Eu=93,Bm=96,vu=123,qm=124,yu=125,Se={};Se[0]="\\0";Se[7]="\\a";Se[8]="\\b";Se[9]="\\t";Se[10]="\\n";Se[11]="\\v";Se[12]="\\f";Se[13]="\\r";Se[27]="\\e";Se[34]='\\"';Se[92]="\\\\";Se[133]="\\N";Se[160]="\\_";Se[8232]="\\L";Se[8233]="\\P";var Hm=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],jm=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Gm(e,t){var n,r,i,a,o,s,l;if(t===null)return{};for(n={},r=Object.keys(t),i=0,a=r.length;i<a;i+=1)o=r[i],s=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=e.compiledTypeMap.fallback[o],l&&pu.call(l.styleAliases,s)&&(s=l.styleAliases[s]),n[o]=s;return n}function Vm(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else if(e<=4294967295)n="U",r=8;else throw new Gn("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+Ur.repeat("0",r-t.length)+t}var Wm=1,Un=2;function Ym(e){this.schema=e.schema||Cm,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Ur.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=Gm(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Un:Wm,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Oo(e,t){for(var n=Ur.repeat(" ",t),r=0,i=-1,a="",o,s=e.length;r<s;)i=e.indexOf(`
`,r),i===-1?(o=e.slice(r),r=s):(o=e.slice(r,i+1),r=i+1),o.length&&o!==`
`&&(a+=n),a+=o;return a}function Vi(e,t){return`
`+Ur.repeat(" ",e.indent*t)}function Xm(e,t){var n,r,i;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(i=e.implicitTypes[n],i.resolve(t))return!0;return!1}function Rr(e){return e===Im||e===bm}function kn(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==ma||65536<=e&&e<=1114111}function No(e){return kn(e)&&e!==ma&&e!==Rm&&e!==Ln}function Do(e,t,n){var r=No(e),i=r&&!Rr(e);return(n?r:r&&e!==mu&&e!==gu&&e!==Eu&&e!==vu&&e!==yu)&&e!==Gi&&!(t===br&&!i)||No(t)&&!Rr(t)&&e===Gi||t===br&&i}function zm(e){return kn(e)&&e!==ma&&!Rr(e)&&e!==Fm&&e!==km&&e!==br&&e!==mu&&e!==gu&&e!==Eu&&e!==vu&&e!==yu&&e!==Gi&&e!==Dm&&e!==xm&&e!==$m&&e!==qm&&e!==Lm&&e!==Um&&e!==Pm&&e!==Om&&e!==Nm&&e!==Mm&&e!==Bm}function Km(e){return!Rr(e)&&e!==br}function Tn(e,t){var n=e.charCodeAt(t),r;return n>=55296&&n<=56319&&t+1<e.length&&(r=e.charCodeAt(t+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}function wu(e){var t=/^\n* /;return t.test(e)}var _u=1,Wi=2,Au=3,Su=4,Ht=5;function Jm(e,t,n,r,i,a,o,s){var l,h=0,c=null,u=!1,d=!1,p=r!==-1,y=-1,w=zm(Tn(e,0))&&Km(Tn(e,e.length-1));if(t||o)for(l=0;l<e.length;h>=65536?l+=2:l++){if(h=Tn(e,l),!kn(h))return Ht;w=w&&Do(h,c,s),c=h}else{for(l=0;l<e.length;h>=65536?l+=2:l++){if(h=Tn(e,l),h===Ln)u=!0,p&&(d=d||l-y-1>r&&e[y+1]!==" ",y=l);else if(!kn(h))return Ht;w=w&&Do(h,c,s),c=h}d=d||p&&l-y-1>r&&e[y+1]!==" "}return!u&&!d?w&&!o&&!i(e)?_u:a===Un?Ht:Wi:n>9&&wu(e)?Ht:o?a===Un?Ht:Wi:d?Su:Au}function Qm(e,t,n,r,i){e.dump=function(){if(t.length===0)return e.quotingType===Un?'""':"''";if(!e.noCompatMode&&(Hm.indexOf(t)!==-1||jm.test(t)))return e.quotingType===Un?'"'+t+'"':"'"+t+"'";var a=e.indent*Math.max(1,n),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-a),s=r||e.flowLevel>-1&&n>=e.flowLevel;function l(h){return Xm(e,h)}switch(Jm(t,s,e.indent,o,l,e.quotingType,e.forceQuotes&&!r,i)){case _u:return t;case Wi:return"'"+t.replace(/'/g,"''")+"'";case Au:return"|"+Po(t,e.indent)+xo(Oo(t,a));case Su:return">"+Po(t,e.indent)+xo(Oo(Zm(t,o),a));case Ht:return'"'+e0(t)+'"';default:throw new Gn("impossible error: invalid scalar style")}}()}function Po(e,t){var n=wu(e)?String(t):"",r=e[e.length-1]===`
`,i=r&&(e[e.length-2]===`
`||e===`
`),a=i?"+":r?"":"-";return n+a+`
`}function xo(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function Zm(e,t){for(var n=/(\n+)([^\n]*)/g,r=function(){var h=e.indexOf(`
`);return h=h!==-1?h:e.length,n.lastIndex=h,Fo(e.slice(0,h),t)}(),i=e[0]===`
`||e[0]===" ",a,o;o=n.exec(e);){var s=o[1],l=o[2];a=l[0]===" ",r+=s+(!i&&!a&&l!==""?`
`:"")+Fo(l,t),i=a}return r}function Fo(e,t){if(e===""||e[0]===" ")return e;for(var n=/ [^ ]/g,r,i=0,a,o=0,s=0,l="";r=n.exec(e);)s=r.index,s-i>t&&(a=o>i?o:s,l+=`
`+e.slice(i,a),i=a+1),o=s;return l+=`
`,e.length-i>t&&o>i?l+=e.slice(i,o)+`
`+e.slice(o+1):l+=e.slice(i),l.slice(1)}function e0(e){for(var t="",n=0,r,i=0;i<e.length;n>=65536?i+=2:i++)n=Tn(e,i),r=Se[n],!r&&kn(n)?(t+=e[i],n>=65536&&(t+=e[i+1])):t+=r||Vm(n);return t}function t0(e,t,n){var r="",i=e.tag,a,o,s;for(a=0,o=n.length;a<o;a+=1)s=n[a],e.replacer&&(s=e.replacer.call(n,String(a),s)),(tt(e,t,s,!1,!1)||typeof s>"u"&&tt(e,t,null,!1,!1))&&(r!==""&&(r+=","+(e.condenseFlow?"":" ")),r+=e.dump);e.tag=i,e.dump="["+r+"]"}function Lo(e,t,n,r){var i="",a=e.tag,o,s,l;for(o=0,s=n.length;o<s;o+=1)l=n[o],e.replacer&&(l=e.replacer.call(n,String(o),l)),(tt(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&tt(e,t+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=Vi(e,t)),e.dump&&Ln===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=a,e.dump=i||"[]"}function n0(e,t,n){var r="",i=e.tag,a=Object.keys(n),o,s,l,h,c;for(o=0,s=a.length;o<s;o+=1)c="",r!==""&&(c+=", "),e.condenseFlow&&(c+='"'),l=a[o],h=n[l],e.replacer&&(h=e.replacer.call(n,l,h)),tt(e,t,l,!1,!1)&&(e.dump.length>1024&&(c+="? "),c+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),tt(e,t,h,!1,!1)&&(c+=e.dump,r+=c));e.tag=i,e.dump="{"+r+"}"}function r0(e,t,n,r){var i="",a=e.tag,o=Object.keys(n),s,l,h,c,u,d;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new Gn("sortKeys must be a boolean or a function");for(s=0,l=o.length;s<l;s+=1)d="",(!r||i!=="")&&(d+=Vi(e,t)),h=o[s],c=n[h],e.replacer&&(c=e.replacer.call(n,h,c)),tt(e,t+1,h,!0,!0,!0)&&(u=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,u&&(e.dump&&Ln===e.dump.charCodeAt(0)?d+="?":d+="? "),d+=e.dump,u&&(d+=Vi(e,t)),tt(e,t+1,c,!0,u)&&(e.dump&&Ln===e.dump.charCodeAt(0)?d+=":":d+=": ",d+=e.dump,i+=d));e.tag=a,e.dump=i||"{}"}function Uo(e,t,n){var r,i,a,o,s,l;for(i=n?e.explicitTypes:e.implicitTypes,a=0,o=i.length;a<o;a+=1)if(s=i[a],(s.instanceOf||s.predicate)&&(!s.instanceOf||typeof t=="object"&&t instanceof s.instanceOf)&&(!s.predicate||s.predicate(t))){if(n?s.multi&&s.representName?e.tag=s.representName(t):e.tag=s.tag:e.tag="?",s.represent){if(l=e.styleMap[s.tag]||s.defaultStyle,hu.call(s.represent)==="[object Function]")r=s.represent(t,l);else if(pu.call(s.represent,l))r=s.represent[l](t,l);else throw new Gn("!<"+s.tag+'> tag resolver accepts not "'+l+'" style');e.dump=r}return!0}return!1}function tt(e,t,n,r,i,a,o){e.tag=null,e.dump=n,Uo(e,n,!1)||Uo(e,n,!0);var s=hu.call(e.dump),l=r,h;r&&(r=e.flowLevel<0||e.flowLevel>t);var c=s==="[object Object]"||s==="[object Array]",u,d;if(c&&(u=e.duplicates.indexOf(n),d=u!==-1),(e.tag!==null&&e.tag!=="?"||d||e.indent!==2&&t>0)&&(i=!1),d&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(c&&d&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),s==="[object Object]")r&&Object.keys(e.dump).length!==0?(r0(e,t,e.dump,i),d&&(e.dump="&ref_"+u+e.dump)):(n0(e,t,e.dump),d&&(e.dump="&ref_"+u+" "+e.dump));else if(s==="[object Array]")r&&e.dump.length!==0?(e.noArrayIndent&&!o&&t>0?Lo(e,t-1,e.dump,i):Lo(e,t,e.dump,i),d&&(e.dump="&ref_"+u+e.dump)):(t0(e,t,e.dump),d&&(e.dump="&ref_"+u+" "+e.dump));else if(s==="[object String]")e.tag!=="?"&&Qm(e,e.dump,t,a,l);else{if(s==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Gn("unacceptable kind of an object to dump "+s)}e.tag!==null&&e.tag!=="?"&&(h=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?h="!"+h:h.slice(0,18)==="tag:yaml.org,2002:"?h="!!"+h.slice(18):h="!<"+h+">",e.dump=h+" "+e.dump)}return!0}function i0(e,t){var n=[],r=[],i,a;for(Yi(e,n,r),i=0,a=r.length;i<a;i+=1)t.duplicates.push(n[r[i]]);t.usedDuplicates=new Array(a)}function Yi(e,t,n){var r,i,a;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,a=e.length;i<a;i+=1)Yi(e[i],t,n);else for(r=Object.keys(e),i=0,a=r.length;i<a;i+=1)Yi(e[r[i]],t,n)}function a0(e,t){t=t||{};var n=new Ym(t);n.noRefs||i0(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),tt(n,0,r,!0,!0)?n.dump+`
`:""}du.dump=a0;var Tu=ca,o0=du;function ga(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}ye.Type=Re;ye.Schema=Ul;ye.FAILSAFE_SCHEMA=ql;ye.JSON_SCHEMA=Yl;ye.CORE_SCHEMA=Xl;ye.DEFAULT_SCHEMA=da;ye.load=Tu.load;ye.loadAll=Tu.loadAll;ye.dump=o0.dump;ye.YAMLException=jn;ye.types={binary:Zl,float:Wl,map:Bl,null:Hl,pairs:tu,set:nu,timestamp:Jl,bool:jl,int:Gl,merge:Ql,omap:eu,seq:Ml,str:kl};ye.safeLoad=ga("safeLoad","load");ye.safeLoadAll=ga("safeLoadAll","loadAll");ye.safeDump=ga("safeDump","dump");var kr={};Object.defineProperty(kr,"__esModule",{value:!0});kr.Lazy=void 0;class s0{constructor(t){this._value=null,this.creator=t}get hasValue(){return this.creator==null}get value(){if(this.creator==null)return this._value;const t=this.creator();return this.value=t,t}set value(t){this._value=t,this.creator=null}}kr.Lazy=s0;var Xi={exports:{}};const l0="2.0.0",Cu=256,u0=Number.MAX_SAFE_INTEGER||9007199254740991,c0=16,f0=Cu-6,d0=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Mr={MAX_LENGTH:Cu,MAX_SAFE_COMPONENT_LENGTH:c0,MAX_SAFE_BUILD_LENGTH:f0,MAX_SAFE_INTEGER:u0,RELEASE_TYPES:d0,SEMVER_SPEC_VERSION:l0,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const h0=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var Br=h0;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Mr,a=Br;t=e.exports={};const o=t.re=[],s=t.safeRe=[],l=t.src=[],h=t.t={};let c=0;const u="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[u,r]],p=w=>{for(const[A,b]of d)w=w.split(`${A}*`).join(`${A}{0,${b}}`).split(`${A}+`).join(`${A}{1,${b}}`);return w},y=(w,A,b)=>{const E=p(A),C=c++;a(w,C,A),h[w]=C,l[C]=A,o[C]=new RegExp(A,b?"g":void 0),s[C]=new RegExp(E,b?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*"),y("NUMERICIDENTIFIERLOOSE","\\d+"),y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${u}*`),y("MAINVERSION",`(${l[h.NUMERICIDENTIFIER]})\\.(${l[h.NUMERICIDENTIFIER]})\\.(${l[h.NUMERICIDENTIFIER]})`),y("MAINVERSIONLOOSE",`(${l[h.NUMERICIDENTIFIERLOOSE]})\\.(${l[h.NUMERICIDENTIFIERLOOSE]})\\.(${l[h.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASEIDENTIFIER",`(?:${l[h.NUMERICIDENTIFIER]}|${l[h.NONNUMERICIDENTIFIER]})`),y("PRERELEASEIDENTIFIERLOOSE",`(?:${l[h.NUMERICIDENTIFIERLOOSE]}|${l[h.NONNUMERICIDENTIFIER]})`),y("PRERELEASE",`(?:-(${l[h.PRERELEASEIDENTIFIER]}(?:\\.${l[h.PRERELEASEIDENTIFIER]})*))`),y("PRERELEASELOOSE",`(?:-?(${l[h.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[h.PRERELEASEIDENTIFIERLOOSE]})*))`),y("BUILDIDENTIFIER",`${u}+`),y("BUILD",`(?:\\+(${l[h.BUILDIDENTIFIER]}(?:\\.${l[h.BUILDIDENTIFIER]})*))`),y("FULLPLAIN",`v?${l[h.MAINVERSION]}${l[h.PRERELEASE]}?${l[h.BUILD]}?`),y("FULL",`^${l[h.FULLPLAIN]}$`),y("LOOSEPLAIN",`[v=\\s]*${l[h.MAINVERSIONLOOSE]}${l[h.PRERELEASELOOSE]}?${l[h.BUILD]}?`),y("LOOSE",`^${l[h.LOOSEPLAIN]}$`),y("GTLT","((?:<|>)?=?)"),y("XRANGEIDENTIFIERLOOSE",`${l[h.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),y("XRANGEIDENTIFIER",`${l[h.NUMERICIDENTIFIER]}|x|X|\\*`),y("XRANGEPLAIN",`[v=\\s]*(${l[h.XRANGEIDENTIFIER]})(?:\\.(${l[h.XRANGEIDENTIFIER]})(?:\\.(${l[h.XRANGEIDENTIFIER]})(?:${l[h.PRERELEASE]})?${l[h.BUILD]}?)?)?`),y("XRANGEPLAINLOOSE",`[v=\\s]*(${l[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[h.XRANGEIDENTIFIERLOOSE]})(?:${l[h.PRERELEASELOOSE]})?${l[h.BUILD]}?)?)?`),y("XRANGE",`^${l[h.GTLT]}\\s*${l[h.XRANGEPLAIN]}$`),y("XRANGELOOSE",`^${l[h.GTLT]}\\s*${l[h.XRANGEPLAINLOOSE]}$`),y("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),y("COERCERTL",l[h.COERCE],!0),y("LONETILDE","(?:~>?)"),y("TILDETRIM",`(\\s*)${l[h.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",y("TILDE",`^${l[h.LONETILDE]}${l[h.XRANGEPLAIN]}$`),y("TILDELOOSE",`^${l[h.LONETILDE]}${l[h.XRANGEPLAINLOOSE]}$`),y("LONECARET","(?:\\^)"),y("CARETTRIM",`(\\s*)${l[h.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",y("CARET",`^${l[h.LONECARET]}${l[h.XRANGEPLAIN]}$`),y("CARETLOOSE",`^${l[h.LONECARET]}${l[h.XRANGEPLAINLOOSE]}$`),y("COMPARATORLOOSE",`^${l[h.GTLT]}\\s*(${l[h.LOOSEPLAIN]})$|^$`),y("COMPARATOR",`^${l[h.GTLT]}\\s*(${l[h.FULLPLAIN]})$|^$`),y("COMPARATORTRIM",`(\\s*)${l[h.GTLT]}\\s*(${l[h.LOOSEPLAIN]}|${l[h.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",y("HYPHENRANGE",`^\\s*(${l[h.XRANGEPLAIN]})\\s+-\\s+(${l[h.XRANGEPLAIN]})\\s*$`),y("HYPHENRANGELOOSE",`^\\s*(${l[h.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[h.XRANGEPLAINLOOSE]})\\s*$`),y("STAR","(<|>)?=?\\s*\\*"),y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Xi,Xi.exports);var Vn=Xi.exports;const p0=Object.freeze({loose:!0}),m0=Object.freeze({}),g0=e=>e?typeof e!="object"?p0:e:m0;var Ea=g0;const ko=/^[0-9]+$/,bu=(e,t)=>{const n=ko.test(e),r=ko.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},E0=(e,t)=>bu(t,e);var Ru={compareIdentifiers:bu,rcompareIdentifiers:E0};const cr=Br,{MAX_LENGTH:Mo,MAX_SAFE_INTEGER:fr}=Mr,{safeRe:Bo,t:qo}=Vn,v0=Ea,{compareIdentifiers:kt}=Ru;let y0=class Ve{constructor(t,n){if(n=v0(n),t instanceof Ve){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Mo)throw new TypeError(`version is longer than ${Mo} characters`);cr("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?Bo[qo.LOOSE]:Bo[qo.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>fr||this.major<0)throw new TypeError("Invalid major version");if(this.minor>fr||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>fr||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const a=+i;if(a>=0&&a<fr)return a}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(cr("SemVer.compare",this.version,this.options,t),!(t instanceof Ve)){if(typeof t=="string"&&t===this.version)return 0;t=new Ve(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Ve||(t=new Ve(t,this.options)),kt(this.major,t.major)||kt(this.minor,t.minor)||kt(this.patch,t.patch)}comparePre(t){if(t instanceof Ve||(t=new Ve(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(cr("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return kt(r,i)}while(++n)}compareBuild(t){t instanceof Ve||(t=new Ve(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(cr("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return kt(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let a=this.prerelease.length;for(;--a>=0;)typeof this.prerelease[a]=="number"&&(this.prerelease[a]++,a=-2);if(a===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let a=[n,i];r===!1&&(a=[n]),kt(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Ie=y0;const Ho=Ie,w0=(e,t,n=!1)=>{if(e instanceof Ho)return e;try{return new Ho(e,t)}catch(r){if(!n)return null;throw r}};var an=w0;const _0=an,A0=(e,t)=>{const n=_0(e,t);return n?n.version:null};var S0=A0;const T0=an,C0=(e,t)=>{const n=T0(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};var b0=C0;const jo=Ie,R0=(e,t,n,r,i)=>{typeof n=="string"&&(i=r,r=n,n=void 0);try{return new jo(e instanceof jo?e.version:e,n).inc(t,r,i).version}catch{return null}};var I0=R0;const Go=an,$0=(e,t)=>{const n=Go(e,null,!0),r=Go(t,null,!0),i=n.compare(r);if(i===0)return null;const a=i>0,o=a?n:r,s=a?r:n,l=!!o.prerelease.length;if(!!s.prerelease.length&&!l)return!s.patch&&!s.minor?"major":o.patch?"patch":o.minor?"minor":"major";const c=l?"pre":"";return n.major!==r.major?c+"major":n.minor!==r.minor?c+"minor":n.patch!==r.patch?c+"patch":"prerelease"};var O0=$0;const N0=Ie,D0=(e,t)=>new N0(e,t).major;var P0=D0;const x0=Ie,F0=(e,t)=>new x0(e,t).minor;var L0=F0;const U0=Ie,k0=(e,t)=>new U0(e,t).patch;var M0=k0;const B0=an,q0=(e,t)=>{const n=B0(e,t);return n&&n.prerelease.length?n.prerelease:null};var H0=q0;const Vo=Ie,j0=(e,t,n)=>new Vo(e,n).compare(new Vo(t,n));var He=j0;const G0=He,V0=(e,t,n)=>G0(t,e,n);var W0=V0;const Y0=He,X0=(e,t)=>Y0(e,t,!0);var z0=X0;const Wo=Ie,K0=(e,t,n)=>{const r=new Wo(e,n),i=new Wo(t,n);return r.compare(i)||r.compareBuild(i)};var va=K0;const J0=va,Q0=(e,t)=>e.sort((n,r)=>J0(n,r,t));var Z0=Q0;const eg=va,tg=(e,t)=>e.sort((n,r)=>eg(r,n,t));var ng=tg;const rg=He,ig=(e,t,n)=>rg(e,t,n)>0;var qr=ig;const ag=He,og=(e,t,n)=>ag(e,t,n)<0;var ya=og;const sg=He,lg=(e,t,n)=>sg(e,t,n)===0;var Iu=lg;const ug=He,cg=(e,t,n)=>ug(e,t,n)!==0;var $u=cg;const fg=He,dg=(e,t,n)=>fg(e,t,n)>=0;var wa=dg;const hg=He,pg=(e,t,n)=>hg(e,t,n)<=0;var _a=pg;const mg=Iu,gg=$u,Eg=qr,vg=wa,yg=ya,wg=_a,_g=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return mg(e,n,r);case"!=":return gg(e,n,r);case">":return Eg(e,n,r);case">=":return vg(e,n,r);case"<":return yg(e,n,r);case"<=":return wg(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var Ou=_g;const Ag=Ie,Sg=an,{safeRe:dr,t:hr}=Vn,Tg=(e,t)=>{if(e instanceof Ag)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let n=null;if(!t.rtl)n=e.match(dr[hr.COERCE]);else{let r;for(;(r=dr[hr.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)(!n||r.index+r[0].length!==n.index+n[0].length)&&(n=r),dr[hr.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;dr[hr.COERCERTL].lastIndex=-1}return n===null?null:Sg(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)};var Cg=Tg,Ai,Yo;function bg(){return Yo||(Yo=1,Ai=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),Ai}var Rg=K;K.Node=Nt;K.create=K;function K(e){var t=this;if(t instanceof K||(t=new K),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}K.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};K.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};K.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};K.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)$g(this,arguments[e]);return this.length};K.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Og(this,arguments[e]);return this.length};K.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};K.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};K.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};K.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};K.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};K.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};K.prototype.map=function(e,t){t=t||this;for(var n=new K,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};K.prototype.mapReverse=function(e,t){t=t||this;for(var n=new K,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};K.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};K.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};K.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};K.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};K.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new K;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};K.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new K;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};K.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var a=[],r=0;i&&r<t;r++)a.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=Ig(this,i,n[r]);return a};K.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function Ig(e,t,n){var r=t===e.head?new Nt(n,null,t,e):new Nt(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function $g(e,t){e.tail=new Nt(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Og(e,t){e.head=new Nt(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Nt(e,t,n,r){if(!(this instanceof Nt))return new Nt(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{bg()(K)}catch{}const Ng=Rg,bt=Symbol("max"),Qe=Symbol("length"),Mt=Symbol("lengthCalculator"),Rn=Symbol("allowStale"),Rt=Symbol("maxAge"),Ke=Symbol("dispose"),Xo=Symbol("noDisposeOnSet"),pe=Symbol("lruList"),ke=Symbol("cache"),Nu=Symbol("updateAgeOnGet"),Si=()=>1;class Dg{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[bt]=t.max||1/0;const n=t.length||Si;if(this[Mt]=typeof n!="function"?Si:n,this[Rn]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Rt]=t.maxAge||0,this[Ke]=t.dispose,this[Xo]=t.noDisposeOnSet||!1,this[Nu]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[bt]=t||1/0,pn(this)}get max(){return this[bt]}set allowStale(t){this[Rn]=!!t}get allowStale(){return this[Rn]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Rt]=t,pn(this)}get maxAge(){return this[Rt]}set lengthCalculator(t){typeof t!="function"&&(t=Si),t!==this[Mt]&&(this[Mt]=t,this[Qe]=0,this[pe].forEach(n=>{n.length=this[Mt](n.value,n.key),this[Qe]+=n.length})),pn(this)}get lengthCalculator(){return this[Mt]}get length(){return this[Qe]}get itemCount(){return this[pe].length}rforEach(t,n){n=n||this;for(let r=this[pe].tail;r!==null;){const i=r.prev;zo(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[pe].head;r!==null;){const i=r.next;zo(this,t,r,n),r=i}}keys(){return this[pe].toArray().map(t=>t.key)}values(){return this[pe].toArray().map(t=>t.value)}reset(){this[Ke]&&this[pe]&&this[pe].length&&this[pe].forEach(t=>this[Ke](t.key,t.value)),this[ke]=new Map,this[pe]=new Ng,this[Qe]=0}dump(){return this[pe].map(t=>Ir(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[pe]}set(t,n,r){if(r=r||this[Rt],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,a=this[Mt](n,t);if(this[ke].has(t)){if(a>this[bt])return Xt(this,this[ke].get(t)),!1;const l=this[ke].get(t).value;return this[Ke]&&(this[Xo]||this[Ke](t,l.value)),l.now=i,l.maxAge=r,l.value=n,this[Qe]+=a-l.length,l.length=a,this.get(t),pn(this),!0}const o=new Pg(t,n,a,i,r);return o.length>this[bt]?(this[Ke]&&this[Ke](t,n),!1):(this[Qe]+=o.length,this[pe].unshift(o),this[ke].set(t,this[pe].head),pn(this),!0)}has(t){if(!this[ke].has(t))return!1;const n=this[ke].get(t).value;return!Ir(this,n)}get(t){return Ti(this,t,!0)}peek(t){return Ti(this,t,!1)}pop(){const t=this[pe].tail;return t?(Xt(this,t),t.value):null}del(t){Xt(this,this[ke].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],a=i.e||0;if(a===0)this.set(i.k,i.v);else{const o=a-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[ke].forEach((t,n)=>Ti(this,n,!1))}}const Ti=(e,t,n)=>{const r=e[ke].get(t);if(r){const i=r.value;if(Ir(e,i)){if(Xt(e,r),!e[Rn])return}else n&&(e[Nu]&&(r.value.now=Date.now()),e[pe].unshiftNode(r));return i.value}},Ir=(e,t)=>{if(!t||!t.maxAge&&!e[Rt])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Rt]&&n>e[Rt]},pn=e=>{if(e[Qe]>e[bt])for(let t=e[pe].tail;e[Qe]>e[bt]&&t!==null;){const n=t.prev;Xt(e,t),t=n}},Xt=(e,t)=>{if(t){const n=t.value;e[Ke]&&e[Ke](n.key,n.value),e[Qe]-=n.length,e[ke].delete(n.key),e[pe].removeNode(t)}};class Pg{constructor(t,n,r,i,a){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=a||0}}const zo=(e,t,n,r)=>{let i=n.value;Ir(e,i)&&(Xt(e,n),e[Rn]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var xg=Dg,Ci,Ko;function je(){if(Ko)return Ci;Ko=1;class e{constructor($,F){if(F=r(F),$ instanceof e)return $.loose===!!F.loose&&$.includePrerelease===!!F.includePrerelease?$:new e($.raw,F);if($ instanceof i)return this.raw=$.value,this.set=[[$]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=$.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(U=>this.parseRange(U.trim())).filter(U=>U.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const U=this.set[0];if(this.set=this.set.filter(O=>!y(O[0])),this.set.length===0)this.set=[U];else if(this.set.length>1){for(const O of this.set)if(O.length===1&&w(O[0])){this.set=[O];break}}}this.format()}format(){return this.range=this.set.map($=>$.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange($){const U=((this.options.includePrerelease&&d)|(this.options.loose&&p))+":"+$,O=n.get(U);if(O)return O;const B=this.options.loose,L=B?s[l.HYPHENRANGELOOSE]:s[l.HYPHENRANGE];$=$.replace(L,q(this.options.includePrerelease)),a("hyphen replace",$),$=$.replace(s[l.COMPARATORTRIM],h),a("comparator trim",$),$=$.replace(s[l.TILDETRIM],c),a("tilde trim",$),$=$.replace(s[l.CARETTRIM],u),a("caret trim",$);let Y=$.split(" ").map(Z=>b(Z,this.options)).join(" ").split(/\s+/).map(Z=>k(Z,this.options));B&&(Y=Y.filter(Z=>(a("loose invalid filter",Z,this.options),!!Z.match(s[l.COMPARATORLOOSE])))),a("range list",Y);const V=new Map,J=Y.map(Z=>new i(Z,this.options));for(const Z of J){if(y(Z))return[Z];V.set(Z.value,Z)}V.size>1&&V.has("")&&V.delete("");const de=[...V.values()];return n.set(U,de),de}intersects($,F){if(!($ instanceof e))throw new TypeError("a Range is required");return this.set.some(U=>A(U,F)&&$.set.some(O=>A(O,F)&&U.every(B=>O.every(L=>B.intersects(L,F)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new o($,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(M(this.set[F],$,this.options))return!0;return!1}}Ci=e;const t=xg,n=new t({max:1e3}),r=Ea,i=Hr(),a=Br,o=Ie,{safeRe:s,t:l,comparatorTrimReplace:h,tildeTrimReplace:c,caretTrimReplace:u}=Vn,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:p}=Mr,y=N=>N.value==="<0.0.0-0",w=N=>N.value==="",A=(N,$)=>{let F=!0;const U=N.slice();let O=U.pop();for(;F&&U.length;)F=U.every(B=>O.intersects(B,$)),O=U.pop();return F},b=(N,$)=>(a("comp",N,$),N=H(N,$),a("caret",N),N=C(N,$),a("tildes",N),N=T(N,$),a("xrange",N),N=g(N,$),a("stars",N),N),E=N=>!N||N.toLowerCase()==="x"||N==="*",C=(N,$)=>N.trim().split(/\s+/).map(F=>R(F,$)).join(" "),R=(N,$)=>{const F=$.loose?s[l.TILDELOOSE]:s[l.TILDE];return N.replace(F,(U,O,B,L,Y)=>{a("tilde",N,U,O,B,L,Y);let V;return E(O)?V="":E(B)?V=`>=${O}.0.0 <${+O+1}.0.0-0`:E(L)?V=`>=${O}.${B}.0 <${O}.${+B+1}.0-0`:Y?(a("replaceTilde pr",Y),V=`>=${O}.${B}.${L}-${Y} <${O}.${+B+1}.0-0`):V=`>=${O}.${B}.${L} <${O}.${+B+1}.0-0`,a("tilde return",V),V})},H=(N,$)=>N.trim().split(/\s+/).map(F=>x(F,$)).join(" "),x=(N,$)=>{a("caret",N,$);const F=$.loose?s[l.CARETLOOSE]:s[l.CARET],U=$.includePrerelease?"-0":"";return N.replace(F,(O,B,L,Y,V)=>{a("caret",N,O,B,L,Y,V);let J;return E(B)?J="":E(L)?J=`>=${B}.0.0${U} <${+B+1}.0.0-0`:E(Y)?B==="0"?J=`>=${B}.${L}.0${U} <${B}.${+L+1}.0-0`:J=`>=${B}.${L}.0${U} <${+B+1}.0.0-0`:V?(a("replaceCaret pr",V),B==="0"?L==="0"?J=`>=${B}.${L}.${Y}-${V} <${B}.${L}.${+Y+1}-0`:J=`>=${B}.${L}.${Y}-${V} <${B}.${+L+1}.0-0`:J=`>=${B}.${L}.${Y}-${V} <${+B+1}.0.0-0`):(a("no pr"),B==="0"?L==="0"?J=`>=${B}.${L}.${Y}${U} <${B}.${L}.${+Y+1}-0`:J=`>=${B}.${L}.${Y}${U} <${B}.${+L+1}.0-0`:J=`>=${B}.${L}.${Y} <${+B+1}.0.0-0`),a("caret return",J),J})},T=(N,$)=>(a("replaceXRanges",N,$),N.split(/\s+/).map(F=>I(F,$)).join(" ")),I=(N,$)=>{N=N.trim();const F=$.loose?s[l.XRANGELOOSE]:s[l.XRANGE];return N.replace(F,(U,O,B,L,Y,V)=>{a("xRange",N,U,O,B,L,Y,V);const J=E(B),de=J||E(L),Z=de||E(Y),X=Z;return O==="="&&X&&(O=""),V=$.includePrerelease?"-0":"",J?O===">"||O==="<"?U="<0.0.0-0":U="*":O&&X?(de&&(L=0),Y=0,O===">"?(O=">=",de?(B=+B+1,L=0,Y=0):(L=+L+1,Y=0)):O==="<="&&(O="<",de?B=+B+1:L=+L+1),O==="<"&&(V="-0"),U=`${O+B}.${L}.${Y}${V}`):de?U=`>=${B}.0.0${V} <${+B+1}.0.0-0`:Z&&(U=`>=${B}.${L}.0${V} <${B}.${+L+1}.0-0`),a("xRange return",U),U})},g=(N,$)=>(a("replaceStars",N,$),N.trim().replace(s[l.STAR],"")),k=(N,$)=>(a("replaceGTE0",N,$),N.trim().replace(s[$.includePrerelease?l.GTE0PRE:l.GTE0],"")),q=N=>($,F,U,O,B,L,Y,V,J,de,Z,X,sn)=>(E(U)?F="":E(O)?F=`>=${U}.0.0${N?"-0":""}`:E(B)?F=`>=${U}.${O}.0${N?"-0":""}`:L?F=`>=${F}`:F=`>=${F}${N?"-0":""}`,E(J)?V="":E(de)?V=`<${+J+1}.0.0-0`:E(Z)?V=`<${J}.${+de+1}.0-0`:X?V=`<=${J}.${de}.${Z}-${X}`:N?V=`<${J}.${de}.${+Z+1}-0`:V=`<=${V}`,`${F} ${V}`.trim()),M=(N,$,F)=>{for(let U=0;U<N.length;U++)if(!N[U].test($))return!1;if($.prerelease.length&&!F.includePrerelease){for(let U=0;U<N.length;U++)if(a(N[U].semver),N[U].semver!==i.ANY&&N[U].semver.prerelease.length>0){const O=N[U].semver;if(O.major===$.major&&O.minor===$.minor&&O.patch===$.patch)return!0}return!1}return!0};return Ci}var bi,Jo;function Hr(){if(Jo)return bi;Jo=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,u){if(u=n(u),c instanceof t){if(c.loose===!!u.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,u),this.options=u,this.loose=!!u.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const u=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(u);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new s(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new s(c,this.options)}catch{return!1}return a(c,this.operator,this.semver,this.options)}intersects(c,u){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,u).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,u).test(c.semver):(u=n(u),u.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!u.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||a(this.semver,"<",c.semver,u)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||a(this.semver,">",c.semver,u)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}bi=t;const n=Ea,{safeRe:r,t:i}=Vn,a=Ou,o=Br,s=Ie,l=je();return bi}const Fg=je(),Lg=(e,t,n)=>{try{t=new Fg(t,n)}catch{return!1}return t.test(e)};var jr=Lg;const Ug=je(),kg=(e,t)=>new Ug(e,t).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));var Mg=kg;const Bg=Ie,qg=je(),Hg=(e,t,n)=>{let r=null,i=null,a=null;try{a=new qg(t,n)}catch{return null}return e.forEach(o=>{a.test(o)&&(!r||i.compare(o)===-1)&&(r=o,i=new Bg(r,n))}),r};var jg=Hg;const Gg=Ie,Vg=je(),Wg=(e,t,n)=>{let r=null,i=null,a=null;try{a=new Vg(t,n)}catch{return null}return e.forEach(o=>{a.test(o)&&(!r||i.compare(o)===1)&&(r=o,i=new Gg(r,n))}),r};var Yg=Wg;const Ri=Ie,Xg=je(),Qo=qr,zg=(e,t)=>{e=new Xg(e,t);let n=new Ri("0.0.0");if(e.test(n)||(n=new Ri("0.0.0-0"),e.test(n)))return n;n=null;for(let r=0;r<e.set.length;++r){const i=e.set[r];let a=null;i.forEach(o=>{const s=new Ri(o.semver.version);switch(o.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!a||Qo(s,a))&&(a=s);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),a&&(!n||Qo(n,a))&&(n=a)}return n&&e.test(n)?n:null};var Kg=zg;const Jg=je(),Qg=(e,t)=>{try{return new Jg(e,t).range||"*"}catch{return null}};var Zg=Qg;const eE=Ie,Du=Hr(),{ANY:tE}=Du,nE=je(),rE=jr,Zo=qr,es=ya,iE=_a,aE=wa,oE=(e,t,n,r)=>{e=new eE(e,r),t=new nE(t,r);let i,a,o,s,l;switch(n){case">":i=Zo,a=iE,o=es,s=">",l=">=";break;case"<":i=es,a=aE,o=Zo,s="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(rE(e,t,r))return!1;for(let h=0;h<t.set.length;++h){const c=t.set[h];let u=null,d=null;if(c.forEach(p=>{p.semver===tE&&(p=new Du(">=0.0.0")),u=u||p,d=d||p,i(p.semver,u.semver,r)?u=p:o(p.semver,d.semver,r)&&(d=p)}),u.operator===s||u.operator===l||(!d.operator||d.operator===s)&&a(e,d.semver))return!1;if(d.operator===l&&o(e,d.semver))return!1}return!0};var Aa=oE;const sE=Aa,lE=(e,t,n)=>sE(e,t,">",n);var uE=lE;const cE=Aa,fE=(e,t,n)=>cE(e,t,"<",n);var dE=fE;const ts=je(),hE=(e,t,n)=>(e=new ts(e,n),t=new ts(t,n),e.intersects(t,n));var pE=hE;const mE=jr,gE=He;var EE=(e,t,n)=>{const r=[];let i=null,a=null;const o=e.sort((c,u)=>gE(c,u,n));for(const c of o)mE(c,t,n)?(a=c,i||(i=c)):(a&&r.push([i,a]),a=null,i=null);i&&r.push([i,null]);const s=[];for(const[c,u]of r)c===u?s.push(c):!u&&c===o[0]?s.push("*"):u?c===o[0]?s.push(`<=${u}`):s.push(`${c} - ${u}`):s.push(`>=${c}`);const l=s.join(" || "),h=typeof t.raw=="string"?t.raw:String(t);return l.length<h.length?l:t};const ns=je(),Sa=Hr(),{ANY:Ii}=Sa,mn=jr,Ta=He,vE=(e,t,n={})=>{if(e===t)return!0;e=new ns(e,n),t=new ns(t,n);let r=!1;e:for(const i of e.set){for(const a of t.set){const o=wE(i,a,n);if(r=r||o!==null,o)continue e}if(r)return!1}return!0},yE=[new Sa(">=0.0.0-0")],rs=[new Sa(">=0.0.0")],wE=(e,t,n)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===Ii){if(t.length===1&&t[0].semver===Ii)return!0;n.includePrerelease?e=yE:e=rs}if(t.length===1&&t[0].semver===Ii){if(n.includePrerelease)return!0;t=rs}const r=new Set;let i,a;for(const p of e)p.operator===">"||p.operator===">="?i=is(i,p,n):p.operator==="<"||p.operator==="<="?a=as(a,p,n):r.add(p.semver);if(r.size>1)return null;let o;if(i&&a){if(o=Ta(i.semver,a.semver,n),o>0)return null;if(o===0&&(i.operator!==">="||a.operator!=="<="))return null}for(const p of r){if(i&&!mn(p,String(i),n)||a&&!mn(p,String(a),n))return null;for(const y of t)if(!mn(p,String(y),n))return!1;return!0}let s,l,h,c,u=a&&!n.includePrerelease&&a.semver.prerelease.length?a.semver:!1,d=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;u&&u.prerelease.length===1&&a.operator==="<"&&u.prerelease[0]===0&&(u=!1);for(const p of t){if(c=c||p.operator===">"||p.operator===">=",h=h||p.operator==="<"||p.operator==="<=",i){if(d&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===d.major&&p.semver.minor===d.minor&&p.semver.patch===d.patch&&(d=!1),p.operator===">"||p.operator===">="){if(s=is(i,p,n),s===p&&s!==i)return!1}else if(i.operator===">="&&!mn(i.semver,String(p),n))return!1}if(a){if(u&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===u.major&&p.semver.minor===u.minor&&p.semver.patch===u.patch&&(u=!1),p.operator==="<"||p.operator==="<="){if(l=as(a,p,n),l===p&&l!==a)return!1}else if(a.operator==="<="&&!mn(a.semver,String(p),n))return!1}if(!p.operator&&(a||i)&&o!==0)return!1}return!(i&&h&&!a&&o!==0||a&&c&&!i&&o!==0||d||u)},is=(e,t,n)=>{if(!e)return t;const r=Ta(e.semver,t.semver,n);return r>0?e:r<0||t.operator===">"&&e.operator===">="?t:e},as=(e,t,n)=>{if(!e)return t;const r=Ta(e.semver,t.semver,n);return r<0?e:r>0||t.operator==="<"&&e.operator==="<="?t:e};var _E=vE;const $i=Vn,os=Mr,AE=Ie,ss=Ru,SE=an,TE=S0,CE=b0,bE=I0,RE=O0,IE=P0,$E=L0,OE=M0,NE=H0,DE=He,PE=W0,xE=z0,FE=va,LE=Z0,UE=ng,kE=qr,ME=ya,BE=Iu,qE=$u,HE=wa,jE=_a,GE=Ou,VE=Cg,WE=Hr(),YE=je(),XE=jr,zE=Mg,KE=jg,JE=Yg,QE=Kg,ZE=Zg,ev=Aa,tv=uE,nv=dE,rv=pE,iv=EE,av=_E;var Pu={parse:SE,valid:TE,clean:CE,inc:bE,diff:RE,major:IE,minor:$E,patch:OE,prerelease:NE,compare:DE,rcompare:PE,compareLoose:xE,compareBuild:FE,sort:LE,rsort:UE,gt:kE,lt:ME,eq:BE,neq:qE,gte:HE,lte:jE,cmp:GE,coerce:VE,Comparator:WE,Range:YE,satisfies:XE,toComparators:zE,maxSatisfying:KE,minSatisfying:JE,minVersion:QE,validRange:ZE,outside:ev,gtr:tv,ltr:nv,intersects:rv,simplifyRange:iv,subset:av,SemVer:AE,re:$i.re,src:$i.src,tokens:$i.t,SEMVER_SPEC_VERSION:os.SEMVER_SPEC_VERSION,RELEASE_TYPES:os.RELEASE_TYPES,compareIdentifiers:ss.compareIdentifiers,rcompareIdentifiers:ss.rcompareIdentifiers},Zt={},$r={exports:{}};$r.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=1,a=2,o=9007199254740991,s="[object Arguments]",l="[object Array]",h="[object AsyncFunction]",c="[object Boolean]",u="[object Date]",d="[object Error]",p="[object Function]",y="[object GeneratorFunction]",w="[object Map]",A="[object Number]",b="[object Null]",E="[object Object]",C="[object Promise]",R="[object Proxy]",H="[object RegExp]",x="[object Set]",T="[object String]",I="[object Symbol]",g="[object Undefined]",k="[object WeakMap]",q="[object ArrayBuffer]",M="[object DataView]",N="[object Float32Array]",$="[object Float64Array]",F="[object Int8Array]",U="[object Int16Array]",O="[object Int32Array]",B="[object Uint8Array]",L="[object Uint8ClampedArray]",Y="[object Uint16Array]",V="[object Uint32Array]",J=/[\\^$.*+?()[\]{}|]/g,de=/^\[object .+?Constructor\]$/,Z=/^(?:0|[1-9]\d*)$/,X={};X[N]=X[$]=X[F]=X[U]=X[O]=X[B]=X[L]=X[Y]=X[V]=!0,X[s]=X[l]=X[q]=X[c]=X[M]=X[u]=X[d]=X[p]=X[w]=X[A]=X[E]=X[H]=X[x]=X[T]=X[k]=!1;var sn=typeof Be=="object"&&Be&&Be.Object===Object&&Be,m=typeof self=="object"&&self&&self.Object===Object&&self,f=sn||m||Function("return this")(),D=t&&!t.nodeType&&t,S=D&&!0&&e&&!e.nodeType&&e,z=S&&S.exports===D,te=z&&sn.process,ae=function(){try{return te&&te.binding&&te.binding("util")}catch{}}(),ge=ae&&ae.isTypedArray;function $e(v,_){for(var P=-1,j=v==null?0:v.length,ee=0,W=[];++P<j;){var oe=v[P];_(oe,P,v)&&(W[ee++]=oe)}return W}function nt(v,_){for(var P=-1,j=_.length,ee=v.length;++P<j;)v[ee+P]=_[P];return v}function fe(v,_){for(var P=-1,j=v==null?0:v.length;++P<j;)if(_(v[P],P,v))return!0;return!1}function Fe(v,_){for(var P=-1,j=Array(v);++P<v;)j[P]=_(P);return j}function ei(v){return function(_){return v(_)}}function zn(v,_){return v.has(_)}function ln(v,_){return v==null?void 0:v[_]}function Kn(v){var _=-1,P=Array(v.size);return v.forEach(function(j,ee){P[++_]=[ee,j]}),P}function Vu(v,_){return function(P){return v(_(P))}}function Wu(v){var _=-1,P=Array(v.size);return v.forEach(function(j){P[++_]=j}),P}var Yu=Array.prototype,Xu=Function.prototype,Jn=Object.prototype,ti=f["__core-js_shared__"],ba=Xu.toString,Ge=Jn.hasOwnProperty,Ra=function(){var v=/[^.]+$/.exec(ti&&ti.keys&&ti.keys.IE_PROTO||"");return v?"Symbol(src)_1."+v:""}(),Ia=Jn.toString,zu=RegExp("^"+ba.call(Ge).replace(J,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$a=z?f.Buffer:void 0,Qn=f.Symbol,Oa=f.Uint8Array,Na=Jn.propertyIsEnumerable,Ku=Yu.splice,gt=Qn?Qn.toStringTag:void 0,Da=Object.getOwnPropertySymbols,Ju=$a?$a.isBuffer:void 0,Qu=Vu(Object.keys,Object),ni=Ft(f,"DataView"),un=Ft(f,"Map"),ri=Ft(f,"Promise"),ii=Ft(f,"Set"),ai=Ft(f,"WeakMap"),cn=Ft(Object,"create"),Zu=yt(ni),ec=yt(un),tc=yt(ri),nc=yt(ii),rc=yt(ai),Pa=Qn?Qn.prototype:void 0,oi=Pa?Pa.valueOf:void 0;function Et(v){var _=-1,P=v==null?0:v.length;for(this.clear();++_<P;){var j=v[_];this.set(j[0],j[1])}}function ic(){this.__data__=cn?cn(null):{},this.size=0}function ac(v){var _=this.has(v)&&delete this.__data__[v];return this.size-=_?1:0,_}function oc(v){var _=this.__data__;if(cn){var P=_[v];return P===r?void 0:P}return Ge.call(_,v)?_[v]:void 0}function sc(v){var _=this.__data__;return cn?_[v]!==void 0:Ge.call(_,v)}function lc(v,_){var P=this.__data__;return this.size+=this.has(v)?0:1,P[v]=cn&&_===void 0?r:_,this}Et.prototype.clear=ic,Et.prototype.delete=ac,Et.prototype.get=oc,Et.prototype.has=sc,Et.prototype.set=lc;function Xe(v){var _=-1,P=v==null?0:v.length;for(this.clear();++_<P;){var j=v[_];this.set(j[0],j[1])}}function uc(){this.__data__=[],this.size=0}function cc(v){var _=this.__data__,P=er(_,v);if(P<0)return!1;var j=_.length-1;return P==j?_.pop():Ku.call(_,P,1),--this.size,!0}function fc(v){var _=this.__data__,P=er(_,v);return P<0?void 0:_[P][1]}function dc(v){return er(this.__data__,v)>-1}function hc(v,_){var P=this.__data__,j=er(P,v);return j<0?(++this.size,P.push([v,_])):P[j][1]=_,this}Xe.prototype.clear=uc,Xe.prototype.delete=cc,Xe.prototype.get=fc,Xe.prototype.has=dc,Xe.prototype.set=hc;function vt(v){var _=-1,P=v==null?0:v.length;for(this.clear();++_<P;){var j=v[_];this.set(j[0],j[1])}}function pc(){this.size=0,this.__data__={hash:new Et,map:new(un||Xe),string:new Et}}function mc(v){var _=tr(this,v).delete(v);return this.size-=_?1:0,_}function gc(v){return tr(this,v).get(v)}function Ec(v){return tr(this,v).has(v)}function vc(v,_){var P=tr(this,v),j=P.size;return P.set(v,_),this.size+=P.size==j?0:1,this}vt.prototype.clear=pc,vt.prototype.delete=mc,vt.prototype.get=gc,vt.prototype.has=Ec,vt.prototype.set=vc;function Zn(v){var _=-1,P=v==null?0:v.length;for(this.__data__=new vt;++_<P;)this.add(v[_])}function yc(v){return this.__data__.set(v,r),this}function wc(v){return this.__data__.has(v)}Zn.prototype.add=Zn.prototype.push=yc,Zn.prototype.has=wc;function rt(v){var _=this.__data__=new Xe(v);this.size=_.size}function _c(){this.__data__=new Xe,this.size=0}function Ac(v){var _=this.__data__,P=_.delete(v);return this.size=_.size,P}function Sc(v){return this.__data__.get(v)}function Tc(v){return this.__data__.has(v)}function Cc(v,_){var P=this.__data__;if(P instanceof Xe){var j=P.__data__;if(!un||j.length<n-1)return j.push([v,_]),this.size=++P.size,this;P=this.__data__=new vt(j)}return P.set(v,_),this.size=P.size,this}rt.prototype.clear=_c,rt.prototype.delete=Ac,rt.prototype.get=Sc,rt.prototype.has=Tc,rt.prototype.set=Cc;function bc(v,_){var P=nr(v),j=!P&&qc(v),ee=!P&&!j&&si(v),W=!P&&!j&&!ee&&Ha(v),oe=P||j||ee||W,he=oe?Fe(v.length,String):[],Ee=he.length;for(var ne in v)(_||Ge.call(v,ne))&&!(oe&&(ne=="length"||ee&&(ne=="offset"||ne=="parent")||W&&(ne=="buffer"||ne=="byteLength"||ne=="byteOffset")||Lc(ne,Ee)))&&he.push(ne);return he}function er(v,_){for(var P=v.length;P--;)if(ka(v[P][0],_))return P;return-1}function Rc(v,_,P){var j=_(v);return nr(v)?j:nt(j,P(v))}function fn(v){return v==null?v===void 0?g:b:gt&&gt in Object(v)?xc(v):Bc(v)}function xa(v){return dn(v)&&fn(v)==s}function Fa(v,_,P,j,ee){return v===_?!0:v==null||_==null||!dn(v)&&!dn(_)?v!==v&&_!==_:Ic(v,_,P,j,Fa,ee)}function Ic(v,_,P,j,ee,W){var oe=nr(v),he=nr(_),Ee=oe?l:it(v),ne=he?l:it(_);Ee=Ee==s?E:Ee,ne=ne==s?E:ne;var De=Ee==E,Le=ne==E,we=Ee==ne;if(we&&si(v)){if(!si(_))return!1;oe=!0,De=!1}if(we&&!De)return W||(W=new rt),oe||Ha(v)?La(v,_,P,j,ee,W):Dc(v,_,Ee,P,j,ee,W);if(!(P&i)){var Pe=De&&Ge.call(v,"__wrapped__"),xe=Le&&Ge.call(_,"__wrapped__");if(Pe||xe){var at=Pe?v.value():v,ze=xe?_.value():_;return W||(W=new rt),ee(at,ze,P,j,W)}}return we?(W||(W=new rt),Pc(v,_,P,j,ee,W)):!1}function $c(v){if(!qa(v)||kc(v))return!1;var _=Ma(v)?zu:de;return _.test(yt(v))}function Oc(v){return dn(v)&&Ba(v.length)&&!!X[fn(v)]}function Nc(v){if(!Mc(v))return Qu(v);var _=[];for(var P in Object(v))Ge.call(v,P)&&P!="constructor"&&_.push(P);return _}function La(v,_,P,j,ee,W){var oe=P&i,he=v.length,Ee=_.length;if(he!=Ee&&!(oe&&Ee>he))return!1;var ne=W.get(v);if(ne&&W.get(_))return ne==_;var De=-1,Le=!0,we=P&a?new Zn:void 0;for(W.set(v,_),W.set(_,v);++De<he;){var Pe=v[De],xe=_[De];if(j)var at=oe?j(xe,Pe,De,_,v,W):j(Pe,xe,De,v,_,W);if(at!==void 0){if(at)continue;Le=!1;break}if(we){if(!fe(_,function(ze,wt){if(!zn(we,wt)&&(Pe===ze||ee(Pe,ze,P,j,W)))return we.push(wt)})){Le=!1;break}}else if(!(Pe===xe||ee(Pe,xe,P,j,W))){Le=!1;break}}return W.delete(v),W.delete(_),Le}function Dc(v,_,P,j,ee,W,oe){switch(P){case M:if(v.byteLength!=_.byteLength||v.byteOffset!=_.byteOffset)return!1;v=v.buffer,_=_.buffer;case q:return!(v.byteLength!=_.byteLength||!W(new Oa(v),new Oa(_)));case c:case u:case A:return ka(+v,+_);case d:return v.name==_.name&&v.message==_.message;case H:case T:return v==_+"";case w:var he=Kn;case x:var Ee=j&i;if(he||(he=Wu),v.size!=_.size&&!Ee)return!1;var ne=oe.get(v);if(ne)return ne==_;j|=a,oe.set(v,_);var De=La(he(v),he(_),j,ee,W,oe);return oe.delete(v),De;case I:if(oi)return oi.call(v)==oi.call(_)}return!1}function Pc(v,_,P,j,ee,W){var oe=P&i,he=Ua(v),Ee=he.length,ne=Ua(_),De=ne.length;if(Ee!=De&&!oe)return!1;for(var Le=Ee;Le--;){var we=he[Le];if(!(oe?we in _:Ge.call(_,we)))return!1}var Pe=W.get(v);if(Pe&&W.get(_))return Pe==_;var xe=!0;W.set(v,_),W.set(_,v);for(var at=oe;++Le<Ee;){we=he[Le];var ze=v[we],wt=_[we];if(j)var ja=oe?j(wt,ze,we,_,v,W):j(ze,wt,we,v,_,W);if(!(ja===void 0?ze===wt||ee(ze,wt,P,j,W):ja)){xe=!1;break}at||(at=we=="constructor")}if(xe&&!at){var rr=v.constructor,ir=_.constructor;rr!=ir&&"constructor"in v&&"constructor"in _&&!(typeof rr=="function"&&rr instanceof rr&&typeof ir=="function"&&ir instanceof ir)&&(xe=!1)}return W.delete(v),W.delete(_),xe}function Ua(v){return Rc(v,Gc,Fc)}function tr(v,_){var P=v.__data__;return Uc(_)?P[typeof _=="string"?"string":"hash"]:P.map}function Ft(v,_){var P=ln(v,_);return $c(P)?P:void 0}function xc(v){var _=Ge.call(v,gt),P=v[gt];try{v[gt]=void 0;var j=!0}catch{}var ee=Ia.call(v);return j&&(_?v[gt]=P:delete v[gt]),ee}var Fc=Da?function(v){return v==null?[]:(v=Object(v),$e(Da(v),function(_){return Na.call(v,_)}))}:Vc,it=fn;(ni&&it(new ni(new ArrayBuffer(1)))!=M||un&&it(new un)!=w||ri&&it(ri.resolve())!=C||ii&&it(new ii)!=x||ai&&it(new ai)!=k)&&(it=function(v){var _=fn(v),P=_==E?v.constructor:void 0,j=P?yt(P):"";if(j)switch(j){case Zu:return M;case ec:return w;case tc:return C;case nc:return x;case rc:return k}return _});function Lc(v,_){return _=_??o,!!_&&(typeof v=="number"||Z.test(v))&&v>-1&&v%1==0&&v<_}function Uc(v){var _=typeof v;return _=="string"||_=="number"||_=="symbol"||_=="boolean"?v!=="__proto__":v===null}function kc(v){return!!Ra&&Ra in v}function Mc(v){var _=v&&v.constructor,P=typeof _=="function"&&_.prototype||Jn;return v===P}function Bc(v){return Ia.call(v)}function yt(v){if(v!=null){try{return ba.call(v)}catch{}try{return v+""}catch{}}return""}function ka(v,_){return v===_||v!==v&&_!==_}var qc=xa(function(){return arguments}())?xa:function(v){return dn(v)&&Ge.call(v,"callee")&&!Na.call(v,"callee")},nr=Array.isArray;function Hc(v){return v!=null&&Ba(v.length)&&!Ma(v)}var si=Ju||Wc;function jc(v,_){return Fa(v,_)}function Ma(v){if(!qa(v))return!1;var _=fn(v);return _==p||_==y||_==h||_==R}function Ba(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=o}function qa(v){var _=typeof v;return v!=null&&(_=="object"||_=="function")}function dn(v){return v!=null&&typeof v=="object"}var Ha=ge?ei(ge):Oc;function Gc(v){return Hc(v)?bc(v):Nc(v)}function Vc(){return[]}function Wc(){return!1}e.exports=jc})($r,$r.exports);var ov=$r.exports;Object.defineProperty(Zt,"__esModule",{value:!0});Zt.createTempUpdateFile=Zt.DownloadedUpdateHelper=void 0;const sv=Mn,lv=pt,ls=ov,Tt=mt,In=le;class uv{constructor(t){this.cacheDir=t,this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,this._downloadedFileInfo=null}get downloadedFileInfo(){return this._downloadedFileInfo}get file(){return this._file}get packageFile(){return this._packageFile}get cacheDirForPendingUpdate(){return In.join(this.cacheDir,"pending")}async validateDownloadedPath(t,n,r,i){if(this.versionInfo!=null&&this.file===t&&this.fileInfo!=null)return ls(this.versionInfo,n)&&ls(this.fileInfo.info,r.info)&&await(0,Tt.pathExists)(t)?t:null;const a=await this.getValidCachedUpdateFile(r,i);return a===null?null:(i.info(`Update has already been downloaded to ${t}).`),this._file=a,a)}async setDownloadedFile(t,n,r,i,a,o){this._file=t,this._packageFile=n,this.versionInfo=r,this.fileInfo=i,this._downloadedFileInfo={fileName:a,sha512:i.info.sha512,isAdminRightsRequired:i.info.isAdminRightsRequired===!0},o&&await(0,Tt.outputJson)(this.getUpdateInfoFile(),this._downloadedFileInfo)}async clear(){this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,await this.cleanCacheDirForPendingUpdate()}async cleanCacheDirForPendingUpdate(){try{await(0,Tt.emptyDir)(this.cacheDirForPendingUpdate)}catch{}}async getValidCachedUpdateFile(t,n){var r;const i=this.getUpdateInfoFile();if(!await(0,Tt.pathExists)(i))return null;let o;try{o=await(0,Tt.readJson)(i)}catch(c){let u="No cached update info available";return c.code!=="ENOENT"&&(await this.cleanCacheDirForPendingUpdate(),u+=` (error on read: ${c.message})`),n.info(u),null}if(!((r=(o==null?void 0:o.fileName)!==null)!==null&&r!==void 0?r:!1))return n.warn("Cached update info is corrupted: no fileName, directory for cached update will be cleaned"),await this.cleanCacheDirForPendingUpdate(),null;if(t.info.sha512!==o.sha512)return n.info(`Cached update sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${o.sha512}, expected: ${t.info.sha512}. Directory for cached update will be cleaned`),await this.cleanCacheDirForPendingUpdate(),null;const l=In.join(this.cacheDirForPendingUpdate,o.fileName);if(!await(0,Tt.pathExists)(l))return n.info("Cached update file doesn't exist"),null;const h=await cv(l);return t.info.sha512!==h?(n.warn(`Sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${h}, expected: ${t.info.sha512}`),await this.cleanCacheDirForPendingUpdate(),null):(this._downloadedFileInfo=o,l)}getUpdateInfoFile(){return In.join(this.cacheDirForPendingUpdate,"update-info.json")}}Zt.DownloadedUpdateHelper=uv;function cv(e,t="sha512",n="base64",r){return new Promise((i,a)=>{const o=(0,sv.createHash)(t);o.on("error",a).setEncoding(n),(0,lv.createReadStream)(e,{...r,highWaterMark:1024*1024}).on("error",a).on("end",()=>{o.end(),i(o.read())}).pipe(o,{end:!1})})}async function fv(e,t,n){let r=0,i=In.join(t,e);for(let a=0;a<3;a++)try{return await(0,Tt.unlink)(i),i}catch(o){if(o.code==="ENOENT")return i;n.warn(`Error on remove temp update file: ${o}`),i=In.join(t,`${r++}-${e}`)}return i}Zt.createTempUpdateFile=fv;var Gr={},Vr={};Object.defineProperty(Vr,"__esModule",{value:!0});Vr.getAppCacheDir=void 0;const Oi=le,dv=ea;function hv(){const e=(0,dv.homedir)();let t;return process.platform==="win32"?t=process.env.LOCALAPPDATA||Oi.join(e,"AppData","Local"):process.platform==="darwin"?t=Oi.join(e,"Library","Caches"):t=process.env.XDG_CACHE_HOME||Oi.join(e,".cache"),t}Vr.getAppCacheDir=hv;Object.defineProperty(Gr,"__esModule",{value:!0});Gr.ElectronAppAdapter=void 0;const us=le,pv=Vr;class mv{constructor(t=Ze.app){this.app=t}whenReady(){return this.app.whenReady()}get version(){return this.app.getVersion()}get name(){return this.app.getName()}get isPackaged(){return this.app.isPackaged===!0}get appUpdateConfigPath(){return this.isPackaged?us.join(process.resourcesPath,"app-update.yml"):us.join(this.app.getAppPath(),"dev-app-update.yml")}get userDataPath(){return this.app.getPath("userData")}get baseCachePath(){return(0,pv.getAppCacheDir)()}quit(){this.app.quit()}relaunch(){this.app.relaunch()}onQuit(t){this.app.once("quit",(n,r)=>t(r))}}Gr.ElectronAppAdapter=mv;var xu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ElectronHttpExecutor=e.getNetSession=e.NET_SESSION_NAME=void 0;const t=ce();e.NET_SESSION_NAME="electron-updater";function n(){return Ze.session.fromPartition(e.NET_SESSION_NAME,{cache:!1})}e.getNetSession=n;class r extends t.HttpExecutor{constructor(a){super(),this.proxyLoginCallback=a,this.cachedSession=null}async download(a,o,s){return await s.cancellationToken.createPromise((l,h,c)=>{const u={headers:s.headers||void 0,redirect:"manual"};(0,t.configureRequestUrl)(a,u),(0,t.configureRequestOptions)(u),this.doDownload(u,{destination:o,options:s,onCancel:c,callback:d=>{d==null?l(o):h(d)},responseHandler:null},0)})}createRequest(a,o){a.headers&&a.headers.Host&&(a.host=a.headers.Host,delete a.headers.Host),this.cachedSession==null&&(this.cachedSession=n());const s=Ze.net.request({...a,session:this.cachedSession});return s.on("response",o),this.proxyLoginCallback!=null&&s.on("login",this.proxyLoginCallback),s}addRedirectHandlers(a,o,s,l,h){a.on("redirect",(c,u,d)=>{a.abort(),l>this.maxRedirects?s(this.createMaxRedirectError()):h(t.HttpExecutor.prepareRedirectUrlOptions(d,o))})}}e.ElectronHttpExecutor=r})(xu);var Wn={},Ae={},gv=1/0,Ev="[object Symbol]",Fu=/[\\^$.*+?()[\]{}|]/g,vv=RegExp(Fu.source),yv=typeof Be=="object"&&Be&&Be.Object===Object&&Be,wv=typeof self=="object"&&self&&self.Object===Object&&self,_v=yv||wv||Function("return this")(),Av=Object.prototype,Sv=Av.toString,cs=_v.Symbol,fs=cs?cs.prototype:void 0,ds=fs?fs.toString:void 0;function Tv(e){if(typeof e=="string")return e;if(bv(e))return ds?ds.call(e):"";var t=e+"";return t=="0"&&1/e==-gv?"-0":t}function Cv(e){return!!e&&typeof e=="object"}function bv(e){return typeof e=="symbol"||Cv(e)&&Sv.call(e)==Ev}function Rv(e){return e==null?"":Tv(e)}function Iv(e){return e=Rv(e),e&&vv.test(e)?e.replace(Fu,"\\$&"):e}var $v=Iv;Object.defineProperty(Ae,"__esModule",{value:!0});Ae.blockmapFiles=Ae.getChannelFilename=Ae.newUrlFromBase=Ae.newBaseUrl=void 0;const Lu=nn,Ov=$v;function Nv(e){const t=new Lu.URL(e);return t.pathname.endsWith("/")||(t.pathname+="/"),t}Ae.newBaseUrl=Nv;function zi(e,t,n=!1){const r=new Lu.URL(e,t),i=t.search;return i!=null&&i.length!==0?r.search=i:n&&(r.search=`noCache=${Date.now().toString(32)}`),r}Ae.newUrlFromBase=zi;function Dv(e){return`${e}.yml`}Ae.getChannelFilename=Dv;function Pv(e,t,n){const r=zi(`${e.pathname}.blockmap`,e);return[zi(`${e.pathname.replace(new RegExp(Ov(n),"g"),t)}.blockmap`,e),r]}Ae.blockmapFiles=Pv;var se={};Object.defineProperty(se,"__esModule",{value:!0});se.resolveFiles=se.getFileList=se.parseUpdateInfo=se.findFile=se.Provider=void 0;const ht=ce(),xv=ye,hs=Ae;class Fv{constructor(t){this.runtimeOptions=t,this.requestHeaders=null,this.executor=t.executor}get isUseMultipleRangeRequest(){return this.runtimeOptions.isUseMultipleRangeRequest!==!1}getChannelFilePrefix(){if(this.runtimeOptions.platform==="linux"){const t=process.env.TEST_UPDATER_ARCH||process.arch;return"-linux"+(t==="x64"?"":`-${t}`)}else return this.runtimeOptions.platform==="darwin"?"-mac":""}getDefaultChannelName(){return this.getCustomChannelName("latest")}getCustomChannelName(t){return`${t}${this.getChannelFilePrefix()}`}get fileExtraDownloadHeaders(){return null}setRequestHeaders(t){this.requestHeaders=t}httpRequest(t,n,r){return this.executor.request(this.createRequestOptions(t,n),r)}createRequestOptions(t,n){const r={};return this.requestHeaders==null?n!=null&&(r.headers=n):r.headers=n==null?this.requestHeaders:{...this.requestHeaders,...n},(0,ht.configureRequestUrl)(t,r),r}}se.Provider=Fv;function Lv(e,t,n){if(e.length===0)throw(0,ht.newError)("No files provided","ERR_UPDATER_NO_FILES_PROVIDED");const r=e.find(i=>i.url.pathname.toLowerCase().endsWith(`.${t}`));return r??(n==null?e[0]:e.find(i=>!n.some(a=>i.url.pathname.toLowerCase().endsWith(`.${a}`))))}se.findFile=Lv;function Uv(e,t,n){if(e==null)throw(0,ht.newError)(`Cannot parse update info from ${t} in the latest release artifacts (${n}): rawData: null`,"ERR_UPDATER_INVALID_UPDATE_INFO");let r;try{r=(0,xv.load)(e)}catch(i){throw(0,ht.newError)(`Cannot parse update info from ${t} in the latest release artifacts (${n}): ${i.stack||i.message}, rawData: ${e}`,"ERR_UPDATER_INVALID_UPDATE_INFO")}return r}se.parseUpdateInfo=Uv;function Uu(e){const t=e.files;if(t!=null&&t.length>0)return t;if(e.path!=null)return[{url:e.path,sha2:e.sha2,sha512:e.sha512}];throw(0,ht.newError)(`No files provided: ${(0,ht.safeStringifyJson)(e)}`,"ERR_UPDATER_NO_FILES_PROVIDED")}se.getFileList=Uu;function kv(e,t,n=r=>r){const i=Uu(e).map(s=>{if(s.sha2==null&&s.sha512==null)throw(0,ht.newError)(`Update info doesn't contain nor sha256 neither sha512 checksum: ${(0,ht.safeStringifyJson)(s)}`,"ERR_UPDATER_NO_CHECKSUM");return{url:(0,hs.newUrlFromBase)(n(s.url),t),info:s}}),a=e.packages,o=a==null?null:a[process.arch]||a.ia32;return o!=null&&(i[0].packageInfo={...o,path:(0,hs.newUrlFromBase)(n(o.path),t).href}),i}se.resolveFiles=kv;Object.defineProperty(Wn,"__esModule",{value:!0});Wn.GenericProvider=void 0;const ps=ce(),Ni=Ae,Di=se;class Mv extends Di.Provider{constructor(t,n,r){super(r),this.configuration=t,this.updater=n,this.baseUrl=(0,Ni.newBaseUrl)(this.configuration.url)}get channel(){const t=this.updater.channel||this.configuration.channel;return t==null?this.getDefaultChannelName():this.getCustomChannelName(t)}async getLatestVersion(){const t=(0,Ni.getChannelFilename)(this.channel),n=(0,Ni.newUrlFromBase)(t,this.baseUrl,this.updater.isAddNoCacheQuery);for(let r=0;;r++)try{return(0,Di.parseUpdateInfo)(await this.httpRequest(n),t,n)}catch(i){if(i instanceof ps.HttpError&&i.statusCode===404)throw(0,ps.newError)(`Cannot find channel "${t}" update info: ${i.stack||i.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");if(i.code==="ECONNREFUSED"&&r<3){await new Promise((a,o)=>{try{setTimeout(a,1e3*r)}catch(s){o(s)}});continue}throw i}}resolveFiles(t){return(0,Di.resolveFiles)(t,this.baseUrl)}}Wn.GenericProvider=Mv;var en={},Wr={};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.BitbucketProvider=void 0;const ms=ce(),Pi=Ae,xi=se;class Bv extends xi.Provider{constructor(t,n,r){super({...r,isUseMultipleRangeRequest:!1}),this.configuration=t,this.updater=n;const{owner:i,slug:a}=t;this.baseUrl=(0,Pi.newBaseUrl)(`https://api.bitbucket.org/2.0/repositories/${i}/${a}/downloads`)}get channel(){return this.updater.channel||this.configuration.channel||"latest"}async getLatestVersion(){const t=new ms.CancellationToken,n=(0,Pi.getChannelFilename)(this.getCustomChannelName(this.channel)),r=(0,Pi.newUrlFromBase)(n,this.baseUrl,this.updater.isAddNoCacheQuery);try{const i=await this.httpRequest(r,void 0,t);return(0,xi.parseUpdateInfo)(i,n,r)}catch(i){throw(0,ms.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(t){return(0,xi.resolveFiles)(t,this.baseUrl)}toString(){const{owner:t,slug:n}=this.configuration;return`Bitbucket (owner: ${t}, slug: ${n}, channel: ${this.channel})`}}Wr.BitbucketProvider=Bv;var et={};Object.defineProperty(et,"__esModule",{value:!0});et.computeReleaseNotes=et.GitHubProvider=et.BaseGitHubProvider=void 0;const Je=ce(),$n=Pu,qv=nn,Vt=Ae,Ki=se,Fi=/\/tag\/([^/]+)$/;class ku extends Ki.Provider{constructor(t,n,r){super({...r,isUseMultipleRangeRequest:!1}),this.options=t,this.baseUrl=(0,Vt.newBaseUrl)((0,Je.githubUrl)(t,n));const i=n==="github.com"?"api.github.com":n;this.baseApiUrl=(0,Vt.newBaseUrl)((0,Je.githubUrl)(t,i))}computeGithubBasePath(t){const n=this.options.host;return n&&!["github.com","api.github.com"].includes(n)?`/api/v3${t}`:t}}et.BaseGitHubProvider=ku;class Hv extends ku{constructor(t,n,r){super(t,"github.com",r),this.options=t,this.updater=n}async getLatestVersion(){var t,n,r,i;const a=new Je.CancellationToken,o=await this.httpRequest((0,Vt.newUrlFromBase)(`${this.basePath}.atom`,this.baseUrl),{accept:"application/xml, application/atom+xml, text/xml, */*"},a),s=(0,Je.parseXml)(o);let l=s.element("entry",!1,"No published versions on GitHub"),h=null;try{if(this.updater.allowPrerelease){const w=((t=this.updater)===null||t===void 0?void 0:t.channel)||((n=$n.prerelease(this.updater.currentVersion))===null||n===void 0?void 0:n[0])||null;if(w===null)h=Fi.exec(l.element("link").attribute("href"))[1];else for(const A of s.getElements("entry")){const b=Fi.exec(A.element("link").attribute("href"));if(b===null)continue;const E=b[1],C=((r=$n.prerelease(E))===null||r===void 0?void 0:r[0])||null,R=!w||["alpha","beta"].includes(w),H=C!==null&&!["alpha","beta"].includes(String(C));if(R&&!H&&!(w==="beta"&&C==="alpha")){h=E;break}if(C&&C===w){h=E;break}}}else{h=await this.getLatestTagName(a);for(const w of s.getElements("entry"))if(Fi.exec(w.element("link").attribute("href"))[1]===h){l=w;break}}}catch(w){throw(0,Je.newError)(`Cannot parse releases feed: ${w.stack||w.message},
XML:
${o}`,"ERR_UPDATER_INVALID_RELEASE_FEED")}if(h==null)throw(0,Je.newError)("No published versions on GitHub","ERR_UPDATER_NO_PUBLISHED_VERSIONS");let c,u="",d="";const p=async w=>{u=(0,Vt.getChannelFilename)(w),d=(0,Vt.newUrlFromBase)(this.getBaseDownloadPath(String(h),u),this.baseUrl);const A=this.createRequestOptions(d);try{return await this.executor.request(A,a)}catch(b){throw b instanceof Je.HttpError&&b.statusCode===404?(0,Je.newError)(`Cannot find ${u} in the latest release artifacts (${d}): ${b.stack||b.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):b}};try{const w=this.updater.allowPrerelease?this.getCustomChannelName(String(((i=$n.prerelease(h))===null||i===void 0?void 0:i[0])||"latest")):this.getDefaultChannelName();c=await p(w)}catch(w){if(this.updater.allowPrerelease)c=await p(this.getDefaultChannelName());else throw w}const y=(0,Ki.parseUpdateInfo)(c,u,d);return y.releaseName==null&&(y.releaseName=l.elementValueOrEmpty("title")),y.releaseNotes==null&&(y.releaseNotes=Mu(this.updater.currentVersion,this.updater.fullChangelog,s,l)),{tag:h,...y}}async getLatestTagName(t){const n=this.options,r=n.host==null||n.host==="github.com"?(0,Vt.newUrlFromBase)(`${this.basePath}/latest`,this.baseUrl):new qv.URL(`${this.computeGithubBasePath(`/repos/${n.owner}/${n.repo}/releases`)}/latest`,this.baseApiUrl);try{const i=await this.httpRequest(r,{Accept:"application/json"},t);return i==null?null:JSON.parse(i).tag_name}catch(i){throw(0,Je.newError)(`Unable to find latest version on GitHub (${r}), please ensure a production release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return`/${this.options.owner}/${this.options.repo}/releases`}resolveFiles(t){return(0,Ki.resolveFiles)(t,this.baseUrl,n=>this.getBaseDownloadPath(t.tag,n.replace(/ /g,"-")))}getBaseDownloadPath(t,n){return`${this.basePath}/download/${t}/${n}`}}et.GitHubProvider=Hv;function gs(e){const t=e.elementValueOrEmpty("content");return t==="No content."?"":t}function Mu(e,t,n,r){if(!t)return gs(r);const i=[];for(const a of n.getElements("entry")){const o=/\/tag\/v?([^/]+)$/.exec(a.element("link").attribute("href"))[1];$n.lt(e,o)&&i.push({version:o,note:gs(a)})}return i.sort((a,o)=>$n.rcompare(a.version,o.version))}et.computeReleaseNotes=Mu;var Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.KeygenProvider=void 0;const Es=ce(),Li=Ae,Ui=se;class jv extends Ui.Provider{constructor(t,n,r){super({...r,isUseMultipleRangeRequest:!1}),this.configuration=t,this.updater=n,this.baseUrl=(0,Li.newBaseUrl)(`https://api.keygen.sh/v1/accounts/${this.configuration.account}/artifacts?product=${this.configuration.product}`)}get channel(){return this.updater.channel||this.configuration.channel||"stable"}async getLatestVersion(){const t=new Es.CancellationToken,n=(0,Li.getChannelFilename)(this.getCustomChannelName(this.channel)),r=(0,Li.newUrlFromBase)(n,this.baseUrl,this.updater.isAddNoCacheQuery);try{const i=await this.httpRequest(r,{Accept:"application/vnd.api+json","Keygen-Version":"1.1"},t);return(0,Ui.parseUpdateInfo)(i,n,r)}catch(i){throw(0,Es.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${i.stack||i.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(t){return(0,Ui.resolveFiles)(t,this.baseUrl)}toString(){const{account:t,product:n,platform:r}=this.configuration;return`Keygen (account: ${t}, product: ${n}, platform: ${r}, channel: ${this.channel})`}}Yr.KeygenProvider=jv;var Xr={};Object.defineProperty(Xr,"__esModule",{value:!0});Xr.PrivateGitHubProvider=void 0;const Bt=ce(),Gv=ye,Vv=le,vs=nn,ys=Ae,Wv=et,Yv=se;class Xv extends Wv.BaseGitHubProvider{constructor(t,n,r,i){super(t,"api.github.com",i),this.updater=n,this.token=r}createRequestOptions(t,n){const r=super.createRequestOptions(t,n);return r.redirect="manual",r}async getLatestVersion(){const t=new Bt.CancellationToken,n=(0,ys.getChannelFilename)(this.getDefaultChannelName()),r=await this.getLatestVersionInfo(t),i=r.assets.find(s=>s.name===n);if(i==null)throw(0,Bt.newError)(`Cannot find ${n} in the release ${r.html_url||r.name}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");const a=new vs.URL(i.url);let o;try{o=(0,Gv.load)(await this.httpRequest(a,this.configureHeaders("application/octet-stream"),t))}catch(s){throw s instanceof Bt.HttpError&&s.statusCode===404?(0,Bt.newError)(`Cannot find ${n} in the latest release artifacts (${a}): ${s.stack||s.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):s}return o.assets=r.assets,o}get fileExtraDownloadHeaders(){return this.configureHeaders("application/octet-stream")}configureHeaders(t){return{accept:t,authorization:`token ${this.token}`}}async getLatestVersionInfo(t){const n=this.updater.allowPrerelease;let r=this.basePath;n||(r=`${r}/latest`);const i=(0,ys.newUrlFromBase)(r,this.baseUrl);try{const a=JSON.parse(await this.httpRequest(i,this.configureHeaders("application/vnd.github.v3+json"),t));return n?a.find(o=>o.prerelease)||a[0]:a}catch(a){throw(0,Bt.newError)(`Unable to find latest version on GitHub (${i}), please ensure a production release exists: ${a.stack||a.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return this.computeGithubBasePath(`/repos/${this.options.owner}/${this.options.repo}/releases`)}resolveFiles(t){return(0,Yv.getFileList)(t).map(n=>{const r=Vv.posix.basename(n.url).replace(/ /g,"-"),i=t.assets.find(a=>a!=null&&a.name===r);if(i==null)throw(0,Bt.newError)(`Cannot find asset "${r}" in: ${JSON.stringify(t.assets,null,2)}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new vs.URL(i.url),info:n}})}}Xr.PrivateGitHubProvider=Xv;Object.defineProperty(en,"__esModule",{value:!0});en.createClient=en.isUrlProbablySupportMultiRangeRequests=void 0;const pr=ce(),zv=Wr,ws=Wn,Kv=et,Jv=Yr,Qv=Xr;function Bu(e){return!e.includes("s3.amazonaws.com")}en.isUrlProbablySupportMultiRangeRequests=Bu;function Zv(e,t,n){if(typeof e=="string")throw(0,pr.newError)("Please pass PublishConfiguration object","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");const r=e.provider;switch(r){case"github":{const i=e,a=(i.private?process.env.GH_TOKEN||process.env.GITHUB_TOKEN:null)||i.token;return a==null?new Kv.GitHubProvider(i,t,n):new Qv.PrivateGitHubProvider(i,t,a,n)}case"bitbucket":return new zv.BitbucketProvider(e,t,n);case"keygen":return new Jv.KeygenProvider(e,t,n);case"s3":case"spaces":return new ws.GenericProvider({provider:"generic",url:(0,pr.getS3LikeProviderBaseUrl)(e),channel:e.channel||null},t,{...n,isUseMultipleRangeRequest:!1});case"generic":{const i=e;return new ws.GenericProvider(i,t,{...n,isUseMultipleRangeRequest:i.useMultipleRangeRequest!==!1&&Bu(i.url)})}case"custom":{const i=e,a=i.updateProvider;if(!a)throw(0,pr.newError)("Custom provider not specified","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");return new a(i,t,n)}default:throw(0,pr.newError)(`Unsupported provider: ${r}`,"ERR_UPDATER_UNSUPPORTED_PROVIDER")}}en.createClient=Zv;var _s;function Ca(){if(_s)return St;_s=1,Object.defineProperty(St,"__esModule",{value:!0}),St.NoOpLogger=St.AppUpdater=void 0;const e=ce(),t=Mn,n=qs,r=mt,i=ye,a=kr,o=le,s=Pu,l=Zt,h=Gr,c=xu,u=Wn,d=on(),p=en;let y=class qu extends n.EventEmitter{constructor(E,C){super(),this.autoDownload=!0,this.autoInstallOnAppQuit=!0,this.autoRunAppAfterInstall=!0,this.allowPrerelease=!1,this.fullChangelog=!1,this.allowDowngrade=!1,this.disableWebInstaller=!1,this.forceDevUpdateConfig=!1,this._channel=null,this.downloadedUpdateHelper=null,this.requestHeaders=null,this._logger=console,this.signals=new d.UpdaterSignal(this),this._appUpdateConfigPath=null,this.clientPromise=null,this.stagingUserIdPromise=new a.Lazy(()=>this.getOrCreateStagingUserId()),this.configOnDisk=new a.Lazy(()=>this.loadUpdateConfig()),this.checkForUpdatesPromise=null,this.updateInfoAndProvider=null,this._testOnlyOptions=null,this.on("error",x=>{this._logger.error(`Error: ${x.stack||x.message}`)}),C==null?(this.app=new h.ElectronAppAdapter,this.httpExecutor=new c.ElectronHttpExecutor((x,T)=>this.emit("login",x,T))):(this.app=C,this.httpExecutor=null);const R=this.app.version,H=(0,s.parse)(R);if(H==null)throw(0,e.newError)(`App version is not a valid semver version: "${R}"`,"ERR_UPDATER_INVALID_VERSION");this.currentVersion=H,this.allowPrerelease=w(H),E!=null&&(this.setFeedURL(E),typeof E!="string"&&E.requestHeaders&&(this.requestHeaders=E.requestHeaders))}get channel(){return this._channel}set channel(E){if(this._channel!=null){if(typeof E!="string")throw(0,e.newError)(`Channel must be a string, but got: ${E}`,"ERR_UPDATER_INVALID_CHANNEL");if(E.length===0)throw(0,e.newError)("Channel must be not an empty string","ERR_UPDATER_INVALID_CHANNEL")}this._channel=E,this.allowDowngrade=!0}addAuthHeader(E){this.requestHeaders=Object.assign({},this.requestHeaders,{authorization:E})}get netSession(){return(0,c.getNetSession)()}get logger(){return this._logger}set logger(E){this._logger=E??new A}set updateConfigPath(E){this.clientPromise=null,this._appUpdateConfigPath=E,this.configOnDisk=new a.Lazy(()=>this.loadUpdateConfig())}getFeedURL(){return"Deprecated. Do not use it."}setFeedURL(E){const C=this.createProviderRuntimeOptions();let R;typeof E=="string"?R=new u.GenericProvider({provider:"generic",url:E},this,{...C,isUseMultipleRangeRequest:(0,p.isUrlProbablySupportMultiRangeRequests)(E)}):R=(0,p.createClient)(E,this,C),this.clientPromise=Promise.resolve(R)}checkForUpdates(){if(!this.isUpdaterActive())return Promise.resolve(null);let E=this.checkForUpdatesPromise;if(E!=null)return this._logger.info("Checking for update (already in progress)"),E;const C=()=>this.checkForUpdatesPromise=null;return this._logger.info("Checking for update"),E=this.doCheckForUpdates().then(R=>(C(),R)).catch(R=>{throw C(),this.emit("error",R,`Cannot check for updates: ${(R.stack||R).toString()}`),R}),this.checkForUpdatesPromise=E,E}isUpdaterActive(){return this.app.isPackaged||this.forceDevUpdateConfig?!0:(this._logger.info("Skip checkForUpdates because application is not packed and dev update config is not forced"),!1)}checkForUpdatesAndNotify(E){return this.checkForUpdates().then(C=>C!=null&&C.downloadPromise?(C.downloadPromise.then(()=>{const R=qu.formatDownloadNotification(C.updateInfo.version,this.app.name,E);new Ze.Notification(R).show()}),C):(this._logger.debug!=null&&this._logger.debug("checkForUpdatesAndNotify called, downloadPromise is null"),C))}static formatDownloadNotification(E,C,R){return R==null&&(R={title:"A new update is ready to install",body:"{appName} version {version} has been downloaded and will be automatically installed on exit"}),R={title:R.title.replace("{appName}",C).replace("{version}",E),body:R.body.replace("{appName}",C).replace("{version}",E)},R}async isStagingMatch(E){const C=E.stagingPercentage;let R=C;if(R==null)return!0;if(R=parseInt(R,10),isNaN(R))return this._logger.warn(`Staging percentage is NaN: ${C}`),!0;R=R/100;const H=await this.stagingUserIdPromise.value,T=e.UUID.parse(H).readUInt32BE(12)/4294967295;return this._logger.info(`Staging percentage: ${R}, percentage: ${T}, user id: ${H}`),T<R}computeFinalHeaders(E){return this.requestHeaders!=null&&Object.assign(E,this.requestHeaders),E}async isUpdateAvailable(E){const C=(0,s.parse)(E.version);if(C==null)throw(0,e.newError)(`This file could not be downloaded, or the latest version (from update server) does not have a valid semver version: "${E.version}"`,"ERR_UPDATER_INVALID_VERSION");const R=this.currentVersion;if((0,s.eq)(C,R)||!await this.isStagingMatch(E))return!1;const x=(0,s.gt)(C,R),T=(0,s.lt)(C,R);return x?!0:this.allowDowngrade&&T}async getUpdateInfoAndProvider(){await this.app.whenReady(),this.clientPromise==null&&(this.clientPromise=this.configOnDisk.value.then(R=>(0,p.createClient)(R,this,this.createProviderRuntimeOptions())));const E=await this.clientPromise,C=await this.stagingUserIdPromise.value;return E.setRequestHeaders(this.computeFinalHeaders({"x-user-staging-id":C})),{info:await E.getLatestVersion(),provider:E}}createProviderRuntimeOptions(){return{isUseMultipleRangeRequest:!0,platform:this._testOnlyOptions==null?process.platform:this._testOnlyOptions.platform,executor:this.httpExecutor}}async doCheckForUpdates(){this.emit("checking-for-update");const E=await this.getUpdateInfoAndProvider(),C=E.info;if(!await this.isUpdateAvailable(C))return this._logger.info(`Update for version ${this.currentVersion} is not available (latest version: ${C.version}, downgrade is ${this.allowDowngrade?"allowed":"disallowed"}).`),this.emit("update-not-available",C),{versionInfo:C,updateInfo:C};this.updateInfoAndProvider=E,this.onUpdateAvailable(C);const R=new e.CancellationToken;return{versionInfo:C,updateInfo:C,cancellationToken:R,downloadPromise:this.autoDownload?this.downloadUpdate(R):null}}onUpdateAvailable(E){this._logger.info(`Found version ${E.version} (url: ${(0,e.asArray)(E.files).map(C=>C.url).join(", ")})`),this.emit("update-available",E)}downloadUpdate(E=new e.CancellationToken){const C=this.updateInfoAndProvider;if(C==null){const H=new Error("Please check update first");return this.dispatchError(H),Promise.reject(H)}this._logger.info(`Downloading update from ${(0,e.asArray)(C.info.files).map(H=>H.url).join(", ")}`);const R=H=>{if(!(H instanceof e.CancellationError))try{this.dispatchError(H)}catch(x){this._logger.warn(`Cannot dispatch error event: ${x.stack||x}`)}return H};try{return this.doDownloadUpdate({updateInfoAndProvider:C,requestHeaders:this.computeRequestHeaders(C.provider),cancellationToken:E,disableWebInstaller:this.disableWebInstaller}).catch(H=>{throw R(H)})}catch(H){return Promise.reject(R(H))}}dispatchError(E){this.emit("error",E,(E.stack||E).toString())}dispatchUpdateDownloaded(E){this.emit(d.UPDATE_DOWNLOADED,E)}async loadUpdateConfig(){return this._appUpdateConfigPath==null&&(this._appUpdateConfigPath=this.app.appUpdateConfigPath),(0,i.load)(await(0,r.readFile)(this._appUpdateConfigPath,"utf-8"))}computeRequestHeaders(E){const C=E.fileExtraDownloadHeaders;if(C!=null){const R=this.requestHeaders;return R==null?C:{...C,...R}}return this.computeFinalHeaders({accept:"*/*"})}async getOrCreateStagingUserId(){const E=o.join(this.app.userDataPath,".updaterId");try{const R=await(0,r.readFile)(E,"utf-8");if(e.UUID.check(R))return R;this._logger.warn(`Staging user id file exists, but content was invalid: ${R}`)}catch(R){R.code!=="ENOENT"&&this._logger.warn(`Couldn't read staging user ID, creating a blank one: ${R}`)}const C=e.UUID.v5((0,t.randomBytes)(4096),e.UUID.OID);this._logger.info(`Generated new staging user ID: ${C}`);try{await(0,r.outputFile)(E,C)}catch(R){this._logger.warn(`Couldn't write out staging user ID: ${R}`)}return C}get isAddNoCacheQuery(){const E=this.requestHeaders;if(E==null)return!0;for(const C of Object.keys(E)){const R=C.toLowerCase();if(R==="authorization"||R==="private-token")return!1}return!0}async getOrCreateDownloadHelper(){let E=this.downloadedUpdateHelper;if(E==null){const C=(await this.configOnDisk.value).updaterCacheDirName,R=this._logger;C==null&&R.error("updaterCacheDirName is not specified in app-update.yml Was app build using at least electron-builder 20.34.0?");const H=o.join(this.app.baseCachePath,C||this.app.name);R.debug!=null&&R.debug(`updater cache dir: ${H}`),E=new l.DownloadedUpdateHelper(H),this.downloadedUpdateHelper=E}return E}async executeDownload(E){const C=E.fileInfo,R={headers:E.downloadUpdateOptions.requestHeaders,cancellationToken:E.downloadUpdateOptions.cancellationToken,sha2:C.info.sha2,sha512:C.info.sha512};this.listenerCount(d.DOWNLOAD_PROGRESS)>0&&(R.onProgress=L=>this.emit(d.DOWNLOAD_PROGRESS,L));const H=E.downloadUpdateOptions.updateInfoAndProvider.info,x=H.version,T=C.packageInfo;function I(){const L=decodeURIComponent(E.fileInfo.url.pathname);return L.endsWith(`.${E.fileExtension}`)?o.basename(L):E.fileInfo.info.url}const g=await this.getOrCreateDownloadHelper(),k=g.cacheDirForPendingUpdate;await(0,r.mkdir)(k,{recursive:!0});const q=I();let M=o.join(k,q);const N=T==null?null:o.join(k,`package-${x}${o.extname(T.path)||".7z"}`),$=async L=>(await g.setDownloadedFile(M,N,H,C,q,L),await E.done({...H,downloadedFile:M}),N==null?[M]:[M,N]),F=this._logger,U=await g.validateDownloadedPath(M,H,C,F);if(U!=null)return M=U,await $(!1);const O=async()=>(await g.clear().catch(()=>{}),await(0,r.unlink)(M).catch(()=>{})),B=await(0,l.createTempUpdateFile)(`temp-${q}`,k,F);try{await E.task(B,R,N,O),await(0,r.rename)(B,M)}catch(L){throw await O(),L instanceof e.CancellationError&&(F.info("cancelled"),this.emit("update-cancelled",H)),L}return F.info(`New version ${x} has been downloaded to ${M}`),await $(!0)}};St.AppUpdater=y;function w(b){const E=(0,s.prerelease)(b);return E!=null&&E.length>0}class A{info(E){}warn(E){}error(E){}}return St.NoOpLogger=A,St}var gn={},En={},As;function zr(){if(As)return En;As=1,Object.defineProperty(En,"__esModule",{value:!0}),En.BaseUpdater=void 0;const e=Or,t=Ca();let n=class extends t.AppUpdater{constructor(i,a){super(i,a),this.quitAndInstallCalled=!1,this.quitHandlerAdded=!1}quitAndInstall(i=!1,a=!1){this._logger.info("Install on explicit quitAndInstall"),this.install(i,i?a:this.autoRunAppAfterInstall)?setImmediate(()=>{Ze.autoUpdater.emit("before-quit-for-update"),this.app.quit()}):this.quitAndInstallCalled=!1}executeDownload(i){return super.executeDownload({...i,done:a=>(this.dispatchUpdateDownloaded(a),this.addQuitHandler(),Promise.resolve())})}install(i=!1,a=!1){if(this.quitAndInstallCalled)return this._logger.warn("install call ignored: quitAndInstallCalled is set to true"),!1;const o=this.downloadedUpdateHelper,s=o==null?null:o.file,l=o==null?null:o.downloadedFileInfo;if(s==null||l==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;this.quitAndInstallCalled=!0;try{return this._logger.info(`Install: isSilent: ${i}, isForceRunAfter: ${a}`),this.doInstall({installerPath:s,isSilent:i,isForceRunAfter:a,isAdminRightsRequired:l.isAdminRightsRequired})}catch(h){return this.dispatchError(h),!1}}addQuitHandler(){this.quitHandlerAdded||!this.autoInstallOnAppQuit||(this.quitHandlerAdded=!0,this.app.onQuit(i=>{if(this.quitAndInstallCalled){this._logger.info("Update installer has already been triggered. Quitting application.");return}if(!this.autoInstallOnAppQuit){this._logger.info("Update will not be installed on quit because autoInstallOnAppQuit is set to false.");return}if(i!==0){this._logger.info(`Update will be not installed on quit because application is quitting with exit code ${i}`);return}this._logger.info("Auto install update on quit"),this.install(!0,!1)}))}wrapSudo(){const{name:i}=this.app,a=`"${i} would like to update"`,o=this.spawnSyncLog("which gksudo || which kdesudo || which pkexec || which beesu"),s=[o];return/kdesudo/i.test(o)?(s.push("--comment",a),s.push("-c")):/gksudo/i.test(o)?s.push("--message",a):/pkexec/i.test(o)&&s.push("--disable-internal-agent"),s.join(" ")}spawnSyncLog(i,a=[],o={}){return this._logger.info(`Executing: ${i} with args: ${a}`),(0,e.spawnSync)(i,a,{env:{...process.env,...o},encoding:"utf-8",shell:!0}).stdout.trim()}async spawnLog(i,a=[],o=void 0,s="ignore"){return this._logger.info(`Executing: ${i} with args: ${a}`),new Promise((l,h)=>{try{const c={stdio:s,env:o,detached:!0},u=(0,e.spawn)(i,a,c);u.on("error",d=>{h(d)}),u.unref(),u.pid!==void 0&&l(!0)}catch(c){h(c)}})}};return En.BaseUpdater=n,En}var Yn={},Xn={},Dt={},Kr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.computeOperations=e.OperationKind=void 0;var t;(function(s){s[s.COPY=0]="COPY",s[s.DOWNLOAD=1]="DOWNLOAD"})(t=e.OperationKind||(e.OperationKind={}));function n(s,l,h){const c=o(s.files),u=o(l.files);let d=null;const p=l.files[0],y=[],w=p.name,A=c.get(w);if(A==null)throw new Error(`no file ${w} in old blockmap`);const b=u.get(w);let E=0;const{checksumToOffset:C,checksumToOldSize:R}=a(c.get(w),A.offset,h);let H=p.offset;for(let x=0;x<b.checksums.length;H+=b.sizes[x],x++){const T=b.sizes[x],I=b.checksums[x];let g=C.get(I);g!=null&&R.get(I)!==T&&(h.warn(`Checksum ("${I}") matches, but size differs (old: ${R.get(I)}, new: ${T})`),g=void 0),g===void 0?(E++,d!=null&&d.kind===t.DOWNLOAD&&d.end===H?d.end+=T:(d={kind:t.DOWNLOAD,start:H,end:H+T},i(d,y,I,x))):d!=null&&d.kind===t.COPY&&d.end===g?d.end+=T:(d={kind:t.COPY,start:g,end:g+T},i(d,y,I,x))}return E>0&&h.info(`File${p.name==="file"?"":" "+p.name} has ${E} changed blocks`),y}e.computeOperations=n;const r=process.env.DIFFERENTIAL_DOWNLOAD_PLAN_BUILDER_VALIDATE_RANGES==="true";function i(s,l,h,c){if(r&&l.length!==0){const u=l[l.length-1];if(u.kind===s.kind&&s.start<u.end&&s.start>u.start){const d=[u.start,u.end,s.start,s.end].reduce((p,y)=>p<y?p:y);throw new Error(`operation (block index: ${c}, checksum: ${h}, kind: ${t[s.kind]}) overlaps previous operation (checksum: ${h}):
abs: ${u.start} until ${u.end} and ${s.start} until ${s.end}
rel: ${u.start-d} until ${u.end-d} and ${s.start-d} until ${s.end-d}`)}}l.push(s)}function a(s,l,h){const c=new Map,u=new Map;let d=l;for(let p=0;p<s.checksums.length;p++){const y=s.checksums[p],w=s.sizes[p],A=u.get(y);if(A===void 0)c.set(y,d),u.set(y,w);else if(h.debug!=null){const b=A===w?"(same size)":`(size: ${A}, this size: ${w})`;h.debug(`${y} duplicated in blockmap ${b}, it doesn't lead to broken differential downloader, just corresponding block will be skipped)`)}d+=w}return{checksumToOffset:c,checksumToOldSize:u}}function o(s){const l=new Map;for(const h of s)l.set(h.name,h);return l}})(Kr);Object.defineProperty(Dt,"__esModule",{value:!0});Dt.DataSplitter=Dt.copyData=void 0;const mr=ce(),ey=pt,ty=Bn,ny=Kr,Ss=Buffer.from(`\r
\r
`);var st;(function(e){e[e.INIT=0]="INIT",e[e.HEADER=1]="HEADER",e[e.BODY=2]="BODY"})(st||(st={}));function Hu(e,t,n,r,i){const a=(0,ey.createReadStream)("",{fd:n,autoClose:!1,start:e.start,end:e.end-1});a.on("error",r),a.once("end",i),a.pipe(t,{end:!1})}Dt.copyData=Hu;class ry extends ty.Writable{constructor(t,n,r,i,a,o){super(),this.out=t,this.options=n,this.partIndexToTaskIndex=r,this.partIndexToLength=a,this.finishHandler=o,this.partIndex=-1,this.headerListBuffer=null,this.readState=st.INIT,this.ignoreByteCount=0,this.remainingPartDataCount=0,this.actualPartLength=0,this.boundaryLength=i.length+4,this.ignoreByteCount=this.boundaryLength-2}get isFinished(){return this.partIndex===this.partIndexToLength.length}_write(t,n,r){if(this.isFinished){console.error(`Trailing ignored data: ${t.length} bytes`);return}this.handleData(t).then(r).catch(r)}async handleData(t){let n=0;if(this.ignoreByteCount!==0&&this.remainingPartDataCount!==0)throw(0,mr.newError)("Internal error","ERR_DATA_SPLITTER_BYTE_COUNT_MISMATCH");if(this.ignoreByteCount>0){const r=Math.min(this.ignoreByteCount,t.length);this.ignoreByteCount-=r,n=r}else if(this.remainingPartDataCount>0){const r=Math.min(this.remainingPartDataCount,t.length);this.remainingPartDataCount-=r,await this.processPartData(t,0,r),n=r}if(n!==t.length){if(this.readState===st.HEADER){const r=this.searchHeaderListEnd(t,n);if(r===-1)return;n=r,this.readState=st.BODY,this.headerListBuffer=null}for(;;){if(this.readState===st.BODY)this.readState=st.INIT;else{this.partIndex++;let o=this.partIndexToTaskIndex.get(this.partIndex);if(o==null)if(this.isFinished)o=this.options.end;else throw(0,mr.newError)("taskIndex is null","ERR_DATA_SPLITTER_TASK_INDEX_IS_NULL");const s=this.partIndex===0?this.options.start:this.partIndexToTaskIndex.get(this.partIndex-1)+1;if(s<o)await this.copyExistingData(s,o);else if(s>o)throw(0,mr.newError)("prevTaskIndex must be < taskIndex","ERR_DATA_SPLITTER_TASK_INDEX_ASSERT_FAILED");if(this.isFinished){this.onPartEnd(),this.finishHandler();return}if(n=this.searchHeaderListEnd(t,n),n===-1){this.readState=st.HEADER;return}}const r=this.partIndexToLength[this.partIndex],i=n+r,a=Math.min(i,t.length);if(await this.processPartStarted(t,n,a),this.remainingPartDataCount=r-(a-n),this.remainingPartDataCount>0)return;if(n=i+this.boundaryLength,n>=t.length){this.ignoreByteCount=this.boundaryLength-(t.length-i);return}}}}copyExistingData(t,n){return new Promise((r,i)=>{const a=()=>{if(t===n){r();return}const o=this.options.tasks[t];if(o.kind!==ny.OperationKind.COPY){i(new Error("Task kind must be COPY"));return}Hu(o,this.out,this.options.oldFileFd,i,()=>{t++,a()})};a()})}searchHeaderListEnd(t,n){const r=t.indexOf(Ss,n);if(r!==-1)return r+Ss.length;const i=n===0?t:t.slice(n);return this.headerListBuffer==null?this.headerListBuffer=i:this.headerListBuffer=Buffer.concat([this.headerListBuffer,i]),-1}onPartEnd(){const t=this.partIndexToLength[this.partIndex-1];if(this.actualPartLength!==t)throw(0,mr.newError)(`Expected length: ${t} differs from actual: ${this.actualPartLength}`,"ERR_DATA_SPLITTER_LENGTH_MISMATCH");this.actualPartLength=0}processPartStarted(t,n,r){return this.partIndex!==0&&this.onPartEnd(),this.processPartData(t,n,r)}processPartData(t,n,r){this.actualPartLength+=r-n;const i=this.out;return i.write(n===0&&t.length===r?t:t.slice(n,r))?Promise.resolve():new Promise((a,o)=>{i.on("error",o),i.once("drain",()=>{i.removeListener("error",o),a()})})}}Dt.DataSplitter=ry;var tn={};Object.defineProperty(tn,"__esModule",{value:!0});tn.checkIsRangesSupported=tn.executeTasksUsingMultipleRangeRequests=void 0;const Ji=ce(),Ts=Dt,Cs=Kr;function iy(e,t,n,r,i){const a=o=>{if(o>=t.length){e.fileMetadataBuffer!=null&&n.write(e.fileMetadataBuffer),n.end();return}const s=o+1e3;ay(e,{tasks:t,start:o,end:Math.min(t.length,s),oldFileFd:r},n,()=>a(s),i)};return a}tn.executeTasksUsingMultipleRangeRequests=iy;function ay(e,t,n,r,i){let a="bytes=",o=0;const s=new Map,l=[];for(let u=t.start;u<t.end;u++){const d=t.tasks[u];d.kind===Cs.OperationKind.DOWNLOAD&&(a+=`${d.start}-${d.end-1}, `,s.set(o,u),o++,l.push(d.end-d.start))}if(o<=1){const u=d=>{if(d>=t.end){r();return}const p=t.tasks[d++];if(p.kind===Cs.OperationKind.COPY)(0,Ts.copyData)(p,n,t.oldFileFd,i,()=>u(d));else{const y=e.createRequestOptions();y.headers.Range=`bytes=${p.start}-${p.end-1}`;const w=e.httpExecutor.createRequest(y,A=>{Qi(A,i)&&(A.pipe(n,{end:!1}),A.once("end",()=>u(d)))});e.httpExecutor.addErrorAndTimeoutHandlers(w,i),w.end()}};u(t.start);return}const h=e.createRequestOptions();h.headers.Range=a.substring(0,a.length-2);const c=e.httpExecutor.createRequest(h,u=>{if(!Qi(u,i))return;const d=(0,Ji.safeGetHeader)(u,"content-type"),p=/^multipart\/.+?(?:; boundary=(?:(?:"(.+)")|(?:([^\s]+))))$/i.exec(d);if(p==null){i(new Error(`Content-Type "multipart/byteranges" is expected, but got "${d}"`));return}const y=new Ts.DataSplitter(n,t,s,p[1]||p[2],l,r);y.on("error",i),u.pipe(y),u.on("end",()=>{setTimeout(()=>{c.abort(),i(new Error("Response ends without calling any handlers"))},1e4)})});e.httpExecutor.addErrorAndTimeoutHandlers(c,i),c.end()}function Qi(e,t){if(e.statusCode>=400)return t((0,Ji.createHttpError)(e)),!1;if(e.statusCode!==206){const n=(0,Ji.safeGetHeader)(e,"accept-ranges");if(n==null||n==="none")return t(new Error(`Server doesn't support Accept-Ranges (response code ${e.statusCode})`)),!1}return!0}tn.checkIsRangesSupported=Qi;var Jr={};Object.defineProperty(Jr,"__esModule",{value:!0});Jr.ProgressDifferentialDownloadCallbackTransform=void 0;const oy=Bn;var Wt;(function(e){e[e.COPY=0]="COPY",e[e.DOWNLOAD=1]="DOWNLOAD"})(Wt||(Wt={}));class sy extends oy.Transform{constructor(t,n,r){super(),this.progressDifferentialDownloadInfo=t,this.cancellationToken=n,this.onProgress=r,this.start=Date.now(),this.transferred=0,this.delta=0,this.expectedBytes=0,this.index=0,this.operationType=Wt.COPY,this.nextUpdate=this.start+1e3}_transform(t,n,r){if(this.cancellationToken.cancelled){r(new Error("cancelled"),null);return}if(this.operationType==Wt.COPY){r(null,t);return}this.transferred+=t.length,this.delta+=t.length;const i=Date.now();i>=this.nextUpdate&&this.transferred!==this.expectedBytes&&this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&(this.nextUpdate=i+1e3,this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((i-this.start)/1e3))}),this.delta=0),r(null,t)}beginFileCopy(){this.operationType=Wt.COPY}beginRangeDownload(){this.operationType=Wt.DOWNLOAD,this.expectedBytes+=this.progressDifferentialDownloadInfo.expectedByteCounts[this.index++]}endRangeDownload(){this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))})}_flush(t){if(this.cancellationToken.cancelled){t(new Error("cancelled"));return}this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,this.transferred=0,t(null)}}Jr.ProgressDifferentialDownloadCallbackTransform=sy;Object.defineProperty(Xn,"__esModule",{value:!0});Xn.DifferentialDownloader=void 0;const vn=ce(),ki=mt,ly=pt,uy=Dt,cy=nn,gr=Kr,bs=tn,fy=Jr;class dy{constructor(t,n,r){this.blockAwareFileInfo=t,this.httpExecutor=n,this.options=r,this.fileMetadataBuffer=null,this.logger=r.logger}createRequestOptions(){const t={headers:{...this.options.requestHeaders,accept:"*/*"}};return(0,vn.configureRequestUrl)(this.options.newUrl,t),(0,vn.configureRequestOptions)(t),t}doDownload(t,n){if(t.version!==n.version)throw new Error(`version is different (${t.version} - ${n.version}), full download is required`);const r=this.logger,i=(0,gr.computeOperations)(t,n,r);r.debug!=null&&r.debug(JSON.stringify(i,null,2));let a=0,o=0;for(const l of i){const h=l.end-l.start;l.kind===gr.OperationKind.DOWNLOAD?a+=h:o+=h}const s=this.blockAwareFileInfo.size;if(a+o+(this.fileMetadataBuffer==null?0:this.fileMetadataBuffer.length)!==s)throw new Error(`Internal error, size mismatch: downloadSize: ${a}, copySize: ${o}, newSize: ${s}`);return r.info(`Full: ${Rs(s)}, To download: ${Rs(a)} (${Math.round(a/(s/100))}%)`),this.downloadFile(i)}downloadFile(t){const n=[],r=()=>Promise.all(n.map(i=>(0,ki.close)(i.descriptor).catch(a=>{this.logger.error(`cannot close file "${i.path}": ${a}`)})));return this.doDownloadFile(t,n).then(r).catch(i=>r().catch(a=>{try{this.logger.error(`cannot close files: ${a}`)}catch(o){try{console.error(o)}catch{}}throw i}).then(()=>{throw i}))}async doDownloadFile(t,n){const r=await(0,ki.open)(this.options.oldFile,"r");n.push({descriptor:r,path:this.options.oldFile});const i=await(0,ki.open)(this.options.newFile,"w");n.push({descriptor:i,path:this.options.newFile});const a=(0,ly.createWriteStream)(this.options.newFile,{fd:i});await new Promise((o,s)=>{const l=[];let h;if(!this.options.isUseMultipleRangeRequest&&this.options.onProgress){const b=[];let E=0;for(const R of t)R.kind===gr.OperationKind.DOWNLOAD&&(b.push(R.end-R.start),E+=R.end-R.start);const C={expectedByteCounts:b,grandTotal:E};h=new fy.ProgressDifferentialDownloadCallbackTransform(C,this.options.cancellationToken,this.options.onProgress),l.push(h)}const c=new vn.DigestTransform(this.blockAwareFileInfo.sha512);c.isValidateOnEnd=!1,l.push(c),a.on("finish",()=>{a.close(()=>{n.splice(1,1);try{c.validate()}catch(b){s(b);return}o(void 0)})}),l.push(a);let u=null;for(const b of l)b.on("error",s),u==null?u=b:u=u.pipe(b);const d=l[0];let p;if(this.options.isUseMultipleRangeRequest){p=(0,bs.executeTasksUsingMultipleRangeRequests)(this,t,d,r,s),p(0);return}let y=0,w=null;this.logger.info(`Differential download: ${this.options.newUrl}`);const A=this.createRequestOptions();A.redirect="manual",p=b=>{var E,C;if(b>=t.length){this.fileMetadataBuffer!=null&&d.write(this.fileMetadataBuffer),d.end();return}const R=t[b++];if(R.kind===gr.OperationKind.COPY){h&&h.beginFileCopy(),(0,uy.copyData)(R,d,r,s,()=>p(b));return}const H=`bytes=${R.start}-${R.end-1}`;A.headers.range=H,(C=(E=this.logger)===null||E===void 0?void 0:E.debug)===null||C===void 0||C.call(E,`download range: ${H}`),h&&h.beginRangeDownload();const x=this.httpExecutor.createRequest(A,T=>{T.on("error",s),T.on("abort",()=>{s(new Error("response has been aborted by the server"))}),T.statusCode>=400&&s((0,vn.createHttpError)(T)),T.pipe(d,{end:!1}),T.once("end",()=>{h&&h.endRangeDownload(),++y===100?(y=0,setTimeout(()=>p(b),1e3)):p(b)})});x.on("redirect",(T,I,g)=>{this.logger.info(`Redirect to ${hy(g)}`),w=g,(0,vn.configureRequestUrl)(new cy.URL(w),A),x.followRedirect()}),this.httpExecutor.addErrorAndTimeoutHandlers(x,s),x.end()},p(0)})}async readRemoteBytes(t,n){const r=Buffer.allocUnsafe(n+1-t),i=this.createRequestOptions();i.headers.range=`bytes=${t}-${n}`;let a=0;if(await this.request(i,o=>{o.copy(r,a),a+=o.length}),a!==r.length)throw new Error(`Received data length ${a} is not equal to expected ${r.length}`);return r}request(t,n){return new Promise((r,i)=>{const a=this.httpExecutor.createRequest(t,o=>{(0,bs.checkIsRangesSupported)(o,i)&&(o.on("data",n),o.on("end",()=>r()))});this.httpExecutor.addErrorAndTimeoutHandlers(a,i),a.end()})}}Xn.DifferentialDownloader=dy;function Rs(e,t=" KB"){return new Intl.NumberFormat("en").format((e/1024).toFixed(2))+t}function hy(e){const t=e.indexOf("?");return t<0?e:e.substring(0,t)}Object.defineProperty(Yn,"__esModule",{value:!0});Yn.FileWithEmbeddedBlockMapDifferentialDownloader=void 0;const qt=mt,py=Xn,my=js;class gy extends py.DifferentialDownloader{async download(){const t=this.blockAwareFileInfo,n=t.size,r=n-(t.blockMapSize+4);this.fileMetadataBuffer=await this.readRemoteBytes(r,n-1);const i=ju(this.fileMetadataBuffer.slice(0,this.fileMetadataBuffer.length-4));await this.doDownload(await Ey(this.options.oldFile),i)}}Yn.FileWithEmbeddedBlockMapDifferentialDownloader=gy;function ju(e){return JSON.parse((0,my.inflateRawSync)(e).toString())}async function Ey(e){const t=await(0,qt.open)(e,"r");try{const n=(await(0,qt.fstat)(t)).size,r=Buffer.allocUnsafe(4);await(0,qt.read)(t,r,0,r.length,n-r.length);const i=Buffer.allocUnsafe(r.readUInt32BE(0));return await(0,qt.read)(t,i,0,i.length,n-r.length-i.length),await(0,qt.close)(t),ju(i)}catch(n){throw await(0,qt.close)(t),n}}var Is;function $s(){if(Is)return gn;Is=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.AppImageUpdater=void 0;const e=ce(),t=Or,n=mt,r=pt,i=le,a=zr(),o=Yn,s=on(),l=se;let h=class extends a.BaseUpdater{constructor(u,d){super(u,d)}isUpdaterActive(){return process.env.APPIMAGE==null?(process.env.SNAP==null?this._logger.warn("APPIMAGE env is not defined, current application is not an AppImage"):this._logger.info("SNAP env is defined, updater is disabled"),!1):super.isUpdaterActive()}doDownloadUpdate(u){const d=u.updateInfoAndProvider.provider,p=(0,l.findFile)(d.resolveFiles(u.updateInfoAndProvider.info),"AppImage",["rpm","deb"]);return this.executeDownload({fileExtension:"AppImage",fileInfo:p,downloadUpdateOptions:u,task:async(y,w)=>{const A=process.env.APPIMAGE;if(A==null)throw(0,e.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");let b=!1;try{const E={newUrl:p.url,oldFile:A,logger:this._logger,newFile:y,isUseMultipleRangeRequest:d.isUseMultipleRangeRequest,requestHeaders:u.requestHeaders,cancellationToken:u.cancellationToken};this.listenerCount(s.DOWNLOAD_PROGRESS)>0&&(E.onProgress=C=>this.emit(s.DOWNLOAD_PROGRESS,C)),await new o.FileWithEmbeddedBlockMapDifferentialDownloader(p.info,this.httpExecutor,E).download()}catch(E){this._logger.error(`Cannot download differentially, fallback to full download: ${E.stack||E}`),b=process.platform==="linux"}b&&await this.httpExecutor.download(p.url,y,w),await(0,n.chmod)(y,493)}})}doInstall(u){const d=process.env.APPIMAGE;if(d==null)throw(0,e.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(0,r.unlinkSync)(d);let p;const y=i.basename(d);i.basename(u.installerPath)===y||!/\d+\.\d+\.\d+/.test(y)?p=d:p=i.join(i.dirname(d),i.basename(u.installerPath)),(0,t.execFileSync)("mv",["-f",u.installerPath,p]),p!==d&&this.emit("appimage-filename-updated",p);const w={...process.env,APPIMAGE_SILENT_INSTALL:"true"};return u.isForceRunAfter?this.spawnLog(p,[],w):(w.APPIMAGE_EXIT_AFTER_INSTALL="true",(0,t.execFileSync)(p,[],{env:w})),!0}};return gn.AppImageUpdater=h,gn}var yn={},Os;function Ns(){if(Os)return yn;Os=1,Object.defineProperty(yn,"__esModule",{value:!0}),yn.DebUpdater=void 0;const e=zr(),t=on(),n=se;let r=class extends e.BaseUpdater{constructor(a,o){super(a,o)}doDownloadUpdate(a){const o=a.updateInfoAndProvider.provider,s=(0,n.findFile)(o.resolveFiles(a.updateInfoAndProvider.info),"deb",["AppImage","rpm"]);return this.executeDownload({fileExtension:"deb",fileInfo:s,downloadUpdateOptions:a,task:async(l,h)=>{this.listenerCount(t.DOWNLOAD_PROGRESS)>0&&(h.onProgress=c=>this.emit(t.DOWNLOAD_PROGRESS,c)),await this.httpExecutor.download(s.url,l,h)}})}doInstall(a){const o=this.wrapSudo(),s=/pkexec/i.test(o)?"":'"',l=["dpkg","-i",a.installerPath,"||","apt-get","install","-f","-y"];return this.spawnSyncLog(o,[`${s}/bin/bash`,"-c",`'${l.join(" ")}'${s}`]),a.isForceRunAfter&&this.app.relaunch(),!0}};return yn.DebUpdater=r,yn}var wn={},Ds;function Ps(){if(Ds)return wn;Ds=1,Object.defineProperty(wn,"__esModule",{value:!0}),wn.RpmUpdater=void 0;const e=zr(),t=on(),n=se;let r=class extends e.BaseUpdater{constructor(a,o){super(a,o)}doDownloadUpdate(a){const o=a.updateInfoAndProvider.provider,s=(0,n.findFile)(o.resolveFiles(a.updateInfoAndProvider.info),"rpm",["AppImage","deb"]);return this.executeDownload({fileExtension:"rpm",fileInfo:s,downloadUpdateOptions:a,task:async(l,h)=>{this.listenerCount(t.DOWNLOAD_PROGRESS)>0&&(h.onProgress=c=>this.emit(t.DOWNLOAD_PROGRESS,c)),await this.httpExecutor.download(s.url,l,h)}})}doInstall(a){const o=a.installerPath,s=this.wrapSudo(),l=/pkexec/i.test(s)?"":'"',h=this.spawnSyncLog("which zypper");let c;if(h)c=[h,"remove","-y",`'${this.app.name}'`,";",h,"clean","--all",";",h,"--no-refresh","install","--allow-unsigned-rpm","-y","-f",o];else{const u=this.spawnSyncLog("which dnf || which yum");c=[u,"-y","remove",`'${this.app.name}'`,";",u,"-y","install",o]}return this.spawnSyncLog(s,[`${l}/bin/bash`,"-c",`'${c.join(" ")}'${l}`]),a.isForceRunAfter&&this.app.relaunch(),!0}};return wn.RpmUpdater=r,wn}var _n={},xs;function Fs(){if(xs)return _n;xs=1,Object.defineProperty(_n,"__esModule",{value:!0}),_n.MacUpdater=void 0;const e=ce(),t=mt,n=pt,r=Kc,i=Ca(),a=se,o=Or,s=Mn;let l=class extends i.AppUpdater{constructor(c,u){super(c,u),this.nativeUpdater=Ze.autoUpdater,this.squirrelDownloadedUpdate=!1,this.nativeUpdater.on("error",d=>{this._logger.warn(d),this.emit("error",d)}),this.nativeUpdater.on("update-downloaded",()=>{this.squirrelDownloadedUpdate=!0})}debug(c){this._logger.debug!=null&&this._logger.debug(c)}async doDownloadUpdate(c){let u=c.updateInfoAndProvider.provider.resolveFiles(c.updateInfoAndProvider.info);const d=this._logger,p="sysctl.proc_translated";let y=!1;try{this.debug("Checking for macOS Rosetta environment"),y=(0,o.execFileSync)("sysctl",[p],{encoding:"utf8"}).includes(`${p}: 1`),d.info(`Checked for macOS Rosetta environment (isRosetta=${y})`)}catch(E){d.warn(`sysctl shell command to check for macOS Rosetta environment failed: ${E}`)}let w=!1;try{this.debug("Checking for arm64 in uname");const C=(0,o.execFileSync)("uname",["-a"],{encoding:"utf8"}).includes("ARM");d.info(`Checked 'uname -a': arm64=${C}`),w=w||C}catch(E){d.warn(`uname shell command to check for arm64 failed: ${E}`)}w=w||process.arch==="arm64"||y;const A=E=>{var C;return E.url.pathname.includes("arm64")||((C=E.info.url)===null||C===void 0?void 0:C.includes("arm64"))};w&&u.some(A)?u=u.filter(E=>w===A(E)):u=u.filter(E=>!A(E));const b=(0,a.findFile)(u,"zip",["pkg","dmg"]);if(b==null)throw(0,e.newError)(`ZIP file not provided: ${(0,e.safeStringifyJson)(u)}`,"ERR_UPDATER_ZIP_FILE_NOT_FOUND");return this.executeDownload({fileExtension:"zip",fileInfo:b,downloadUpdateOptions:c,task:(E,C)=>this.httpExecutor.download(b.url,E,C),done:E=>this.updateDownloaded(b,E)})}async updateDownloaded(c,u){var d,p;const y=u.downloadedFile,w=(d=c.info.size)!==null&&d!==void 0?d:(await(0,t.stat)(y)).size,A=this._logger,b=`fileToProxy=${c.url.href}`;this.debug(`Creating proxy server for native Squirrel.Mac (${b})`),(p=this.server)===null||p===void 0||p.close(),this.server=(0,r.createServer)(),this.debug(`Proxy server for native Squirrel.Mac is created (${b})`),this.server.on("close",()=>{A.info(`Proxy server for native Squirrel.Mac is closed (${b})`)});const E=C=>{const R=C.address();return typeof R=="string"?R:`http://127.0.0.1:${R==null?void 0:R.port}`};return await new Promise((C,R)=>{const H=(0,s.randomBytes)(64).toString("base64").replace(/\//g,"_").replace(/\+/g,"-"),x=Buffer.from(`autoupdater:${H}`,"ascii"),T=`/${(0,s.randomBytes)(64).toString("hex")}.zip`;this.server.on("request",(I,g)=>{const k=I.url;if(A.info(`${k} requested`),k==="/"){if(!I.headers.authorization||I.headers.authorization.indexOf("Basic ")===-1){g.statusCode=401,g.statusMessage="Invalid Authentication Credentials",g.end(),A.warn("No authenthication info");return}const N=I.headers.authorization.split(" ")[1],$=Buffer.from(N,"base64").toString("ascii"),[F,U]=$.split(":");if(F!=="autoupdater"||U!==H){g.statusCode=401,g.statusMessage="Invalid Authentication Credentials",g.end(),A.warn("Invalid authenthication credentials");return}const O=Buffer.from(`{ "url": "${E(this.server)}${T}" }`);g.writeHead(200,{"Content-Type":"application/json","Content-Length":O.length}),g.end(O);return}if(!k.startsWith(T)){A.warn(`${k} requested, but not supported`),g.writeHead(404),g.end();return}A.info(`${T} requested by Squirrel.Mac, pipe ${y}`);let q=!1;g.on("finish",()=>{q||(this.nativeUpdater.removeListener("error",R),C([]))});const M=(0,n.createReadStream)(y);M.on("error",N=>{try{g.end()}catch($){A.warn(`cannot end response: ${$}`)}q=!0,this.nativeUpdater.removeListener("error",R),R(new Error(`Cannot pipe "${y}": ${N}`))}),g.writeHead(200,{"Content-Type":"application/zip","Content-Length":w}),M.pipe(g)}),this.debug(`Proxy server for native Squirrel.Mac is starting to listen (${b})`),this.server.listen(0,"127.0.0.1",()=>{this.debug(`Proxy server for native Squirrel.Mac is listening (address=${E(this.server)}, ${b})`),this.nativeUpdater.setFeedURL({url:E(this.server),headers:{"Cache-Control":"no-cache",Authorization:`Basic ${x.toString("base64")}`}}),this.dispatchUpdateDownloaded(u),this.autoInstallOnAppQuit?(this.nativeUpdater.once("error",R),this.nativeUpdater.checkForUpdates()):C([])})})}quitAndInstall(){var c;this.squirrelDownloadedUpdate?(this.nativeUpdater.quitAndInstall(),(c=this.server)===null||c===void 0||c.close()):(this.nativeUpdater.on("update-downloaded",()=>{var u;this.nativeUpdater.quitAndInstall(),(u=this.server)===null||u===void 0||u.close()}),this.autoInstallOnAppQuit||this.nativeUpdater.checkForUpdates())}};return _n.MacUpdater=l,_n}var An={},Qr={};Object.defineProperty(Qr,"__esModule",{value:!0});Qr.GenericDifferentialDownloader=void 0;const vy=Xn;class yy extends vy.DifferentialDownloader{download(t,n){return this.doDownload(t,n)}}Qr.GenericDifferentialDownloader=yy;var Zr={};Object.defineProperty(Zr,"__esModule",{value:!0});Zr.verifySignature=void 0;const Ls=ce(),Gu=Or,wy=ea;function _y(e,t,n){return new Promise((r,i)=>{const a=t.replace(/'/g,"''");(0,Gu.execFile)("chcp 65001 >NUL & powershell.exe",["-NoProfile","-NonInteractive","-InputFormat","None","-Command",`"Get-AuthenticodeSignature -LiteralPath '${a}' | ConvertTo-Json -Compress"`],{shell:!0,timeout:20*1e3},(o,s,l)=>{try{if(o!=null||l){Us(n,o,l,i),r(null);return}const h=Ay(s);if(h.Status===0){const u=(0,Ls.parseDn)(h.SignerCertificate.Subject);let d=!1;for(const p of e){const y=(0,Ls.parseDn)(p);if(y.size?d=Array.from(y.keys()).every(A=>y.get(A)===u.get(A)):p===u.get("CN")&&(n.warn(`Signature validated using only CN ${p}. Please add your full Distinguished Name (DN) to publisherNames configuration`),d=!0),d){r(null);return}}}const c=`publisherNames: ${e.join(" | ")}, raw info: `+JSON.stringify(h,(u,d)=>u==="RawData"?void 0:d,2);n.warn(`Sign verification failed, installer signed with incorrect certificate: ${c}`),r(c)}catch(h){Us(n,h,null,i),r(null);return}})})}Zr.verifySignature=_y;function Ay(e){const t=JSON.parse(e);delete t.PrivateKey,delete t.IsOSBinary,delete t.SignatureType;const n=t.SignerCertificate;return n!=null&&(delete n.Archived,delete n.Extensions,delete n.Handle,delete n.HasPrivateKey,delete n.SubjectName),delete t.Path,t}function Us(e,t,n,r){if(Sy()){e.warn(`Cannot execute Get-AuthenticodeSignature: ${t||n}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}try{(0,Gu.execFileSync)("powershell.exe",["-NoProfile","-NonInteractive","-Command","ConvertTo-Json test"],{timeout:10*1e3})}catch(i){e.warn(`Cannot execute ConvertTo-Json: ${i.message}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}t!=null&&r(t),n&&r(new Error(`Cannot execute Get-AuthenticodeSignature, stderr: ${n}. Failing signature validation due to unknown stderr.`))}function Sy(){const e=wy.release();return e.startsWith("6.")&&!e.startsWith("6.3")}var ks;function Ms(){if(ks)return An;ks=1,Object.defineProperty(An,"__esModule",{value:!0}),An.NsisUpdater=void 0;const e=ce(),t=le,n=zr(),r=Yn,i=Qr,a=on(),o=Ae,s=se,l=mt,h=Zr,c=nn,u=js;let d=class extends n.BaseUpdater{constructor(y,w){super(y,w),this._verifyUpdateCodeSignature=(A,b)=>(0,h.verifySignature)(A,b,this._logger)}get verifyUpdateCodeSignature(){return this._verifyUpdateCodeSignature}set verifyUpdateCodeSignature(y){y&&(this._verifyUpdateCodeSignature=y)}doDownloadUpdate(y){const w=y.updateInfoAndProvider.provider,A=(0,s.findFile)(w.resolveFiles(y.updateInfoAndProvider.info),"exe");return this.executeDownload({fileExtension:"exe",downloadUpdateOptions:y,fileInfo:A,task:async(b,E,C,R)=>{const H=A.packageInfo,x=H!=null&&C!=null;if(x&&y.disableWebInstaller)throw(0,e.newError)(`Unable to download new version ${y.updateInfoAndProvider.info.version}. Web Installers are disabled`,"ERR_UPDATER_WEB_INSTALLER_DISABLED");!x&&!y.disableWebInstaller&&this._logger.warn("disableWebInstaller is set to false, you should set it to true if you do not plan on using a web installer. This will default to true in a future version."),(x||await this.differentialDownloadInstaller(A,y,b,w))&&await this.httpExecutor.download(A.url,b,E);const T=await this.verifySignature(b);if(T!=null)throw await R(),(0,e.newError)(`New version ${y.updateInfoAndProvider.info.version} is not signed by the application owner: ${T}`,"ERR_UPDATER_INVALID_SIGNATURE");if(x&&await this.differentialDownloadWebPackage(y,H,C,w))try{await this.httpExecutor.download(new c.URL(H.path),C,{headers:y.requestHeaders,cancellationToken:y.cancellationToken,sha512:H.sha512})}catch(I){try{await(0,l.unlink)(C)}catch{}throw I}}})}async verifySignature(y){let w;try{if(w=(await this.configOnDisk.value).publisherName,w==null)return null}catch(A){if(A.code==="ENOENT")return null;throw A}return await this._verifyUpdateCodeSignature(Array.isArray(w)?w:[w],y)}doInstall(y){const w=["--updated"];y.isSilent&&w.push("/S"),y.isForceRunAfter&&w.push("--force-run"),this.installDirectory&&w.push(`/D=${this.installDirectory}`);const A=this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.packageFile;A!=null&&w.push(`--package-file=${A}`);const b=()=>{this.spawnLog(t.join(process.resourcesPath,"elevate.exe"),[y.installerPath].concat(w)).catch(E=>this.dispatchError(E))};return y.isAdminRightsRequired?(this._logger.info("isAdminRightsRequired is set to true, run installer using elevate.exe"),b(),!0):(this.spawnLog(y.installerPath,w).catch(E=>{const C=E.code;this._logger.info(`Cannot run installer: error code: ${C}, error message: "${E.message}", will be executed again using elevate if EACCES"`),C==="UNKNOWN"||C==="EACCES"?b():this.dispatchError(E)}),!0)}async differentialDownloadInstaller(y,w,A,b){try{if(this._testOnlyOptions!=null&&!this._testOnlyOptions.isUseDifferentialDownload)return!0;const E=(0,o.blockmapFiles)(y.url,this.app.version,w.updateInfoAndProvider.info.version);this._logger.info(`Download block maps (old: "${E[0]}", new: ${E[1]})`);const C=async x=>{const T=await this.httpExecutor.downloadToBuffer(x,{headers:w.requestHeaders,cancellationToken:w.cancellationToken});if(T==null||T.length===0)throw new Error(`Blockmap "${x.href}" is empty`);try{return JSON.parse((0,u.gunzipSync)(T).toString())}catch(I){throw new Error(`Cannot parse blockmap "${x.href}", error: ${I}`)}},R={newUrl:y.url,oldFile:t.join(this.downloadedUpdateHelper.cacheDir,e.CURRENT_APP_INSTALLER_FILE_NAME),logger:this._logger,newFile:A,isUseMultipleRangeRequest:b.isUseMultipleRangeRequest,requestHeaders:w.requestHeaders,cancellationToken:w.cancellationToken};this.listenerCount(a.DOWNLOAD_PROGRESS)>0&&(R.onProgress=x=>this.emit(a.DOWNLOAD_PROGRESS,x));const H=await Promise.all(E.map(x=>C(x)));return await new i.GenericDifferentialDownloader(y.info,this.httpExecutor,R).download(H[0],H[1]),!1}catch(E){if(this._logger.error(`Cannot download differentially, fallback to full download: ${E.stack||E}`),this._testOnlyOptions!=null)throw E;return!0}}async differentialDownloadWebPackage(y,w,A,b){if(w.blockMapSize==null)return!0;try{const E={newUrl:new c.URL(w.path),oldFile:t.join(this.downloadedUpdateHelper.cacheDir,e.CURRENT_APP_PACKAGE_FILE_NAME),logger:this._logger,newFile:A,requestHeaders:this.requestHeaders,isUseMultipleRangeRequest:b.isUseMultipleRangeRequest,cancellationToken:y.cancellationToken};this.listenerCount(a.DOWNLOAD_PROGRESS)>0&&(E.onProgress=C=>this.emit(a.DOWNLOAD_PROGRESS,C)),await new r.FileWithEmbeddedBlockMapDifferentialDownloader(w,this.httpExecutor,E).download()}catch(E){return this._logger.error(`Cannot download differentially, fallback to full download: ${E.stack||E}`),process.platform==="win32"}return!1}};return An.NsisUpdater=d,An}var Bs;function on(){return Bs||(Bs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.UpdaterSignal=e.UPDATE_DOWNLOADED=e.DOWNLOAD_PROGRESS=e.NsisUpdater=e.MacUpdater=e.RpmUpdater=e.DebUpdater=e.AppImageUpdater=e.Provider=e.CancellationToken=e.NoOpLogger=e.AppUpdater=void 0;const t=ce();Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return t.CancellationToken}});const n=mt,r=le;var i=Ca();Object.defineProperty(e,"AppUpdater",{enumerable:!0,get:function(){return i.AppUpdater}}),Object.defineProperty(e,"NoOpLogger",{enumerable:!0,get:function(){return i.NoOpLogger}});var a=se;Object.defineProperty(e,"Provider",{enumerable:!0,get:function(){return a.Provider}});var o=$s();Object.defineProperty(e,"AppImageUpdater",{enumerable:!0,get:function(){return o.AppImageUpdater}});var s=Ns();Object.defineProperty(e,"DebUpdater",{enumerable:!0,get:function(){return s.DebUpdater}});var l=Ps();Object.defineProperty(e,"RpmUpdater",{enumerable:!0,get:function(){return l.RpmUpdater}});var h=Fs();Object.defineProperty(e,"MacUpdater",{enumerable:!0,get:function(){return h.MacUpdater}});var c=Ms();Object.defineProperty(e,"NsisUpdater",{enumerable:!0,get:function(){return c.NsisUpdater}});let u;function d(){if(process.platform==="win32")u=new(Ms()).NsisUpdater;else if(process.platform==="darwin")u=new(Fs()).MacUpdater;else{u=new($s()).AppImageUpdater;try{const w=r.join(process.resourcesPath,"package-type");if(!(0,n.existsSync)(w))return u;console.info("Checking for beta autoupdate feature for deb/rpm distributions");const A=(0,n.readFileSync)(w).toString().trim();switch(console.info("Found package-type:",A),A){case"deb":u=new(Ns()).DebUpdater;break;case"rpm":u=new(Ps()).RpmUpdater;break;default:break}}catch(w){console.warn("Unable to detect 'package-type' for autoUpdater (beta rpm/deb support). If you'd like to expand support, please consider contributing to electron-builder",w.message)}}return u}Object.defineProperty(e,"autoUpdater",{enumerable:!0,get:()=>u||d()}),e.DOWNLOAD_PROGRESS="download-progress",e.UPDATE_DOWNLOADED="update-downloaded";class p{constructor(A){this.emitter=A}login(A){y(this.emitter,"login",A)}progress(A){y(this.emitter,e.DOWNLOAD_PROGRESS,A)}updateDownloaded(A){y(this.emitter,e.UPDATE_DOWNLOADED,A)}updateCancelled(A){y(this.emitter,"update-cancelled",A)}}e.UpdaterSignal=p;function y(w,A,b){w.on(A,b)}}(li)),li}var Ue=on();function Ty(e){Ue.autoUpdater.setFeedURL({provider:"generic",url:"http://192.168.32.60:3001/release"});function t({action:n,updateInfo:r}){e.webContents.send("updateMessage",{action:n,updateInfo:r})}Ue.autoUpdater.on("error",n=>{t({action:"error",updateInfo:n})}),Ue.autoUpdater.on("checking-for-update",()=>{t({action:"checking",updateInfo:null})}),Ue.autoUpdater.autoDownload=!1,Ue.autoUpdater.on("update-available",n=>{t({action:"updateAva",updateInfo:n})}),Ue.autoUpdater.on("update-not-available",n=>{t({action:"updateNotAva",updateInfo:n})}),Ue.autoUpdater.on("download-progress",n=>{console.log(">>>",n.percent),e.webContents.send("downloadProgress",n)}),Ue.autoUpdater.on("update-downloaded",n=>{e.webContents.send("downloadProgress",{percent:100}),Ze.ipcMain.on("isUpdateNow",(r,i)=>{Ue.autoUpdater.quitAndInstall()})}),Ze.ipcMain.on("checkForUpdate",()=>{console.log(""),Ue.autoUpdater.checkForUpdates()}),Ze.ipcMain.on("downloadUpdate",()=>{Ue.autoUpdater.downloadUpdate()})}exports.autoUpdate=Ty;
