import{y as e,c as a,S as l,W as t,d as s,X as i,f as r,h as o,j as n,N as d,u as p,I as u,O as c,H as f,L as m,ac as b,o as v,i as y}from"./vxetable.d7bee61f.js";import{i as h,a as g,b as _,c as D}from"./index.5738a161.js";import{_ as S,q as w,R as x,f as U,s as j,t as A}from"./index.3f3cf4eb.js";import{F as C,a as R,b as k,c as q}from"./index.826bcf43.js";import"./echarts.d8b3161e.js";import"./moment.9709ab41.js";const P={class:"basic-info"},z={class:"info-container"},E={class:"right-box"},I={class:"avator-box"},N=["src"],V={key:1,src:"/fitsadmin/assets/avator.bb42aedd.png"};var B=S(e({__name:"BasicInfo",props:{userDetail:{type:null,required:!0}},setup(e){const b=e,v=a(),y=l({showAvator:!0,imageUrl:"",form:new C({rule:[{type:"input",field:"UserName",title:"用户名称",props:{placeholder:"请输入用户名称"},validate:[{required:!0,type:"string",message:"请输入用户名称"}]},{type:"input",field:"UserAccount",title:"用户账号",props:{placeholder:"请输入用户账号"},validate:[{required:!0,type:"string",message:"请输入用户账号"}]},{type:"datePicker",field:"birthday",title:"生日",props:{placeholder:"请选择日期"}},{type:"radio",field:"sex",title:"性别",options:[{value:"1",label:"男"},{value:"2",label:"女"},{label:"未知",value:"0"}]},{type:"input",field:"phone",title:"手机号码",props:{placeholder:"请输入手机号码"},validate:[{required:!0,type:"string",message:"请输入手机号码"},{validator:(e,a,l)=>h(a),message:"请输入正确的手机号"}]},{type:"input",field:"familynumber",title:"家庭号码",props:{placeholder:"请输入家庭号码"},validate:[{validator:(e,a,l)=>!a||g(a),message:"请输入正确的家庭号码"}]},{type:"input",field:"email",title:"电子邮件",props:{placeholder:"请输入电子邮箱"},validate:[{validator:(e,a,l)=>!a||_(a),message:"请输入正确的电子邮件"}]},{type:"input",field:"shortNum",title:"短号",props:{placeholder:"请输入短号"},validate:[{validator:(e,a,l)=>!a||D(a),message:"请输入正确的短号"}]}],option:{form:{labelPosition:"top",inline:!0},submitBtn:{innerText:"保存基本信息"},onSubmit:()=>{!async function(){const e=v.value.fApi.formData(),{Message:a,RetCode:l}=await w(e);l===x.SUCCESS&&U.success(a)}()}},col:2})}),{form:S,showAvator:A,imageUrl:k}=t(y);async function q(e){const{Message:a,RetCode:l,ReturnData:t}=await j(e.file);l===x.SUCCESS&&(U.success(a),k.value=t.headUrl)}function B(e){return"image/jpeg"!==e.type?(U.error("只能上传jpg格式文件！"),!1):!(e.size/1024/1024>2)||(U.error("文件大小不能超过2M"),!1)}return s((()=>b.userDetail),(e=>{v.value.fApi.setValue(e)})),window.onresize=()=>{document.documentElement.clientWidth>1157?A.value=!0:A.value=!1},(e,a)=>{const l=i("el-button"),t=i("el-upload");return r(),o("div",P,[n("div",z,[d(p(R),{form:p(S),ref_key:"FormRef",ref:v},null,8,["form"]),u(n("div",E,[d(t,{class:"avatar-uploader","show-file-list":!1,"before-upload":B,"http-request":q},{default:f((()=>[n("div",I,[p(k)?(r(),o("img",{key:0,src:p(k),class:"avatar"},null,8,N)):(r(),o("img",V))]),d(l,null,{default:f((()=>[m(" 上传头像 ")])),_:1})])),_:1})],512),[[c,p(A)]])])])}}}),[["__scopeId","data-v-967a0486"]]);const M={class:"organization"};var T=S(e({__name:"Organization",props:{userDetail:{type:null,required:!0}},setup(e){const t=e,i=a(null),n=l(new C({rule:[{type:"input",field:"office",title:"办公室",props:{placeholder:"请输入办公室"}},{type:"input",field:"officenumber",title:"办公号码",props:{placeholder:"请输入办公号码"},validate:[{validator:(e,a,l)=>!a||(g(a)||h(a)),message:"请输入正确的手机号或固话"}]},{type:"tree-search",component:b(k),field:"Department",name:"organization",title:"组织机构",props:{options:new q({select:{class:"mySelect",placeholder:"请选择组织机构"},input:{elementProps:{class:"myInput",placeholder:"部门搜索"}},tree:{class:"myTree",nodeKey:"id",defaultExpandAll:!1,data:[{id:"1",label:"总经办",children:[{id:"4",label:"业务部",children:[{id:"9",label:"业务A部"},{id:"11",label:"业务B部"}]}]},{id:"21",label:"研发部",children:[{id:"5",label:"研发1部"},{id:"6",label:"研发2部"}]},{id:"3",label:"财务部",children:[{id:"7",label:"财务1部"},{id:"8",label:"财务2部"}]}]}})}},{type:"select",field:"UserTag",title:"用户标签",props:{filterable:!0,placeholder:"请选择用户标签"},options:[{value:"1",label:"选项1"},{value:"2",label:"选项2"}]},{type:"datePicker",field:"onJobDate",title:"入职日期",props:{placeholder:"请选择入职日期"}},{type:"datePicker",field:"offJobDate",title:"离职日期",props:{placeholder:"请选择离职日期"}}],option:{form:{labelPosition:"top",inline:!0},submitBtn:{innerText:"保存信息"},onSubmit:e=>{!async function(){const e=i.value.fApi.formData(),{Message:a,RetCode:l}=await w(e);l===x.SUCCESS&&U.success(a)}()}},col:2}));return s((()=>t.userDetail),(e=>{i.value.fApi.setValue(e)})),(e,a)=>(r(),o("div",M,[d(p(R),{form:n,ref_key:"FormRef",ref:i},null,8,["form"])]))}}),[["__scopeId","data-v-7c2fce82"]]);const F={class:"user-container"},J=e({__name:"index",setup(e){const a=l({activeName:"info",userDetail:{}}),{activeName:s,userDetail:n}=t(a);return v((()=>{!async function(){const{ReturnData:e}=await A({});n.value=e}()})),(e,a)=>{const l=i("el-tab-pane"),t=i("el-tabs");return r(),o("div",F,[d(t,{modelValue:p(s),"onUpdate:modelValue":a[0]||(a[0]=e=>y(s)?s.value=e:null),"tab-position":"left",class:"demo-tabs"},{default:f((()=>[d(l,{label:"基本信息",name:"info"},{default:f((()=>[d(B,{userDetail:p(n)},null,8,["userDetail"])])),_:1}),d(l,{label:"组织关系",name:"reladddtion"},{default:f((()=>[d(T,{userDetail:p(n)},null,8,["userDetail"])])),_:1})])),_:1},8,["modelValue"])])}}});export{J as default};
