import{F as e,B as a,R as l,q as t,C as s,D as i,y as r,G as o,j as n,H as p,I as d,J as u}from"./index-c43510b8.js";import{E as c,a as f}from"./el-tab-pane-916b5f17.js";import{E as m,a as v,J as b,K as y,b as h,l as g,m as D,p as _,O as w,u as x,_ as S,$ as A,R as C,V as U,ah as j,d as R,A as k}from"./vxetable-1fe7c1fd.js";import{i as E,a as P,b as V,c as q}from"./index-feecb639.js";import"./echarts-1215139a.js";import"./index-39dad176.js";const z={class:"basic-info"},B={class:"info-container"},I={class:"right-box"},J={class:"avator-box"},M=["src"],N={key:1,src:"/fitsadmin/assets/avator-bb42aedd.png"},T=n(m({__name:"BasicInfo",props:{userDetail:{}},setup(n){const p=n,d=v(),u=b({showAvator:!0,imageUrl:"",form:new e({rule:[{type:"input",field:"UserName",title:"用户名称",props:{placeholder:"请输入用户名称"},validate:[{required:!0,type:"string",message:"请输入用户名称"}]},{type:"input",field:"UserAccount",title:"用户账号",props:{placeholder:"请输入用户账号"},validate:[{required:!0,type:"string",message:"请输入用户账号"}]},{type:"datePicker",field:"birthday",title:"生日",props:{placeholder:"请选择日期"}},{type:"radio",field:"sex",title:"性别",options:[{value:"1",label:"男"},{value:"2",label:"女"},{label:"未知",value:"0"}]},{type:"input",field:"phone",title:"手机号码",props:{placeholder:"请输入手机号码"},validate:[{required:!0,type:"string",message:"请输入手机号码"},{validator:(e,a,l)=>E(a),message:"请输入正确的手机号"}]},{type:"input",field:"familynumber",title:"家庭号码",props:{placeholder:"请输入家庭号码"},validate:[{validator:(e,a,l)=>!a||P(a),message:"请输入正确的家庭号码"}]},{type:"input",field:"email",title:"电子邮件",props:{placeholder:"请输入电子邮箱"},validate:[{validator:(e,a,l)=>!a||V(a),message:"请输入正确的电子邮件"}]},{type:"input",field:"shortNum",title:"短号",props:{placeholder:"请输入短号"},validate:[{validator:(e,a,l)=>!a||q(a),message:"请输入正确的短号"}]}],option:{form:{labelPosition:"top",inline:!0},submitBtn:{innerText:"保存基本信息"},onSubmit:()=>{!async function(){const e=d.value.fApi.formData(),{Message:s,RetCode:i}=await a(e);i===l.SUCCESS&&t.success(s)}()}},col:2})}),{form:c,showAvator:f,imageUrl:m}=y(u);async function j(e){const{Message:a,RetCode:s,ReturnData:r}=await i(e.file);s===l.SUCCESS&&(t.success(a),m.value=r.headUrl)}function R(e){return"image/jpeg"!==e.type?(t.error("只能上传jpg格式文件！"),!1):!(e.size/1024/1024>2)||(t.error("文件大小不能超过2M"),!1)}return h((()=>p.userDetail),(e=>{d.value.fApi.setValue(e)})),window.onresize=()=>{document.documentElement.clientWidth>1157?f.value=!0:f.value=!1},(e,a)=>{const l=r,t=o;return g(),D("div",z,[_("div",B,[w(x(s),{form:x(c),ref_key:"FormRef",ref:d},null,8,["form"]),S(_("div",I,[w(t,{class:"avatar-uploader","show-file-list":!1,"before-upload":R,"http-request":j},{default:C((()=>[_("div",J,[x(m)?(g(),D("img",{key:0,src:x(m),class:"avatar"},null,8,M)):(g(),D("img",N))]),w(l,null,{default:C((()=>[U(" 上传头像 ")])),_:1})])),_:1})],512),[[A,x(f)]])])])}}}),[["__scopeId","data-v-93c7b1c3"]]),F={class:"organization"},K=n(m({__name:"Organization",props:{userDetail:{}},setup(i){const r=i,o=v(null),n=b(new e({rule:[{type:"input",field:"office",title:"办公室",props:{placeholder:"请输入办公室"}},{type:"input",field:"officenumber",title:"办公号码",props:{placeholder:"请输入办公号码"},validate:[{validator:(e,a,l)=>!a||(P(a)||E(a)),message:"请输入正确的手机号或固话"}]},{type:"tree-search",component:j(p),field:"Department",name:"organization",title:"组织机构",props:{options:new d({select:{class:"mySelect",placeholder:"请选择组织机构"},input:{elementProps:{class:"myInput",placeholder:"部门搜索"}},tree:{class:"myTree",nodeKey:"id",defaultExpandAll:!1,data:[{id:"1",label:"总经办",children:[{id:"4",label:"业务部",children:[{id:"9",label:"业务A部"},{id:"11",label:"业务B部"}]}]},{id:"21",label:"研发部",children:[{id:"5",label:"研发1部"},{id:"6",label:"研发2部"}]},{id:"3",label:"财务部",children:[{id:"7",label:"财务1部"},{id:"8",label:"财务2部"}]}]}})}},{type:"select",field:"UserTag",title:"用户标签",props:{filterable:!0,placeholder:"请选择用户标签"},options:[{value:"1",label:"选项1"},{value:"2",label:"选项2"}]},{type:"datePicker",field:"onJobDate",title:"入职日期",props:{placeholder:"请选择入职日期"}},{type:"datePicker",field:"offJobDate",title:"离职日期",props:{placeholder:"请选择离职日期"}}],option:{form:{labelPosition:"top",inline:!0},submitBtn:{innerText:"保存信息"},onSubmit:e=>{!async function(){const e=o.value.fApi.formData(),{Message:s,RetCode:i}=await a(e);i===l.SUCCESS&&t.success(s)}()}},col:2}));return h((()=>r.userDetail),(e=>{o.value.fApi.setValue(e)})),(e,a)=>(g(),D("div",F,[w(x(s),{form:n,ref_key:"FormRef",ref:o},null,8,["form"])]))}}),[["__scopeId","data-v-87cf9a9e"]]),O={class:"user-container"},G=m({__name:"index",setup(e){const a=b({activeName:"info",userDetail:{}}),{activeName:l,userDetail:t}=y(a);return R((()=>{!async function(){const{ReturnData:e}=await u({});t.value=e}()})),(e,a)=>{const s=c,i=f;return g(),D("div",O,[w(i,{modelValue:x(l),"onUpdate:modelValue":a[0]||(a[0]=e=>k(l)?l.value=e:null),"tab-position":"left",class:"demo-tabs"},{default:C((()=>[w(s,{label:"基本信息",name:"info"},{default:C((()=>[w(T,{userDetail:x(t)},null,8,["userDetail"])])),_:1}),w(s,{label:"组织关系",name:"reladddtion"},{default:C((()=>[w(K,{userDetail:x(t)},null,8,["userDetail"])])),_:1})])),_:1},8,["modelValue"])])}}});export{G as default};
