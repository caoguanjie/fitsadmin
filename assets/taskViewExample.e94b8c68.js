import{y as t,c as e,o as a,q as o,Z as l,X as r,f as i,G as n,H as d,j as s,N as c,u,M as A,h as m,F as k,_ as C,K as B,i as I,an as v,ao as f}from"./vxetable.23d9f74f.js";import{h as g}from"./moment.9709ab41.js";import{a$ as D,b0 as p,a_ as E}from"./main.ec56d7a6.js";import{_ as h}from"./index.53c6c89d.js";import"./preact.module.c891d147.js";const M={class:"cal-container-task",id:"cal-container-task"},w={id:"dialogBox",class:"dialog-contain-style dialogBox"},y={class:"my-header2"},J={class:"headerTitle"},Q={class:"titleWeek"},Y={class:"titleDate"},x=["src"],S={class:"item-title"},O={key:0,class:"item-detail"},T={key:1,class:"item-detail"},b=(t=>(v("data-v-738f85ae"),t=t(),f(),t))((()=>s("div",{class:"card",id:"cal2"},null,-1))),H={id:"picker",style:{visibility:"hidden"}},N=t({name:"taskView"});var U=h(t({...N,setup(t){const v=e();let f,h,N,U=e(),G=e(!1),R=0,Z={date:"",week:""},V=e(),j=e(!1);const L=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAACcdJREFUeF7t3V1SGzsQhmENXsiBlQR2ghfBUL4KuUrZLCJkJeGsJN7I1KSG4IoTbI9Gf61Wv1xLI+nrfhA2DukcXyRAAmcT6MiGBEjgfAIAoTtI4EICAKE9SAAg9AAJhCXADRKWG7OMJAAQI4XmmGEJACQsN2YZSQAgRgrNMcMSAEhYbswykgBAjBSaY4YlAJCw3JhlJAGAGCk0xwxLACBhuTHLSAIAMVJojhmWAEDCcmOWkQQAYqTQHDMsAYCE5cYsIwkAxEihOWZYAgAJy41ZRhIAiJFCc8ywBAASlhuzjCQAECOF5phhCQAkLDdmGUkAIEYKzTHDEgBIWG7MMpIAQIwUmmOGJSAK5OvXr9dXV1f3Xdd9et/+3jn3f9/3L2HHYZa2BI564D/n3K1z7rWmHhABchTK5zMFfR2GYb3ZbCYwfDWawPPz8+04jj/OHG8/juP3x8fHJ8njiwDZ7XZTKNN3i0tf+2EY7kAi2R751t7tdvfOuW9zPdB13frh4WG6VUS+igPxDOYQBkhE2iLvokt7oO/7m7w7Ov90CSA/nXPXCw4MkgVh1T50IY6343Rddyd1i0gAGQOKCJKA0GqbEoJjOsM4jl+kXosUBTK9OF+tVtMNEvIFkpDUKpkTiuN9+y99368ljlIUyHTA3W4XcoPwmkSiOxKtGYlj2sVa6q1/CSA+72BdKg03SaLGLfGYBDhsAZl579u3ZiDxTUpwXCIcr33f30kdo/gNMh10u90+dV137peEvlmAxDcpgXGJcLhhGG4kfxcmAsTjN+m+JQWJb1IFx6XCIfn27iEuESDT4iAp2LEFl2oJxxSbGBCQFOzaQku1hkMcCEgKdW6BZVrEUQUQkBTo3sxLtIqjGiAgydzBGR/fMo6qgIAkYxdnenTrOKoDApJMnZzhsRZwVAkEJBm6OfEjreCoFghIEnd0wsdZwlE1EJAk7OpEj7KGo3ogIEnU2QkeYxGHCiAgSdDdkY+wikMNEJBEdnjEdMs4VAEBSUSXB061jkMdEJAEdnrANHD8Dk3007wBdXubwkflQ5PzmweOPzmpBAISv0YPGQWOv1NTCwQkIe1/eQ44PuajGghI0iEBx+ks1QMBSTwScJzPsAkgIAlHAo7L2TUDBCTLkYBjPrOmgIBkvuCHEeDwy6o5ICCZLzw45jM6jGgSCEjONwA4/HFMI5sFApKPjQCOZTiaBwKSPw0BjuU4TAABydv/yeLzH2bOdlANfyt3dpOJBzT9I9ZxVlY/4AiOODFmgFi8ScARh8PMj1gWbxJwxOMwCcTCTQKONDjMAmkZCTjS4TANpEUk4EiLwzyQlpCAIz0OgLxnqv0tYHDkwQGQo1y1IgFHPhwA+SdbbUjAkRcHQE7kqwUJOPLjAMiZjGtHAo4yOAByIedakYCjHA6AzGRdGxJwlMUBEI+8a0ECDo9iZRhi6tO8oflJIwFHaOXi5wHEM0MpJODwLFCmYQBZEGxpJOBYUJxMQwGyMNhSSMCxsDCZhgMkINjcSMARUJRMUwASGGwuJOAILEimaQCJCDY1ktVqdeuc+xaxpbepFv/6SGxm5+YDJDLZlEicc9eR2wFHbID/zAdIgkATIonaDTdHVHwnJwMkUabSSMCRqJDcIHmCnJ4qhQQc+WrKDZI429JIwJG4gNwgeQMteZOAI38tuUEyZZz7JgFHpsJxg5QJNudNAo5yNeQGyZx16psEHJkLxg1SNuBpte12+9R13ecEK++HYbjbbDb7BM/iER4JcIN4hBQzJNVnq472AJKYgiycC5CFgS0ZngHHYXmQLClExFiARIR3aWpGHCDJVLNTjwVIhrAL4ABJhroBpECoBXGApEA9uUEShiyAAyQJ68cNkjFMQRwgyVhXbpAE4VaAAyQJ6sgNkiHEhDjW4zheJ/iFIm8BJ6wzN0hEmKlwHD4+kvBjKSCJqOvxVIAEBpkax2EbIAksSKZpAAkINhcOkAQUI/MUgCwMODcOkCwsSObhAFkQcCkcIFlQlMxDAeIZcGkcIPEsTOZhAPEIWAoHSDyKk3kIQGYClsYBkswCZh4PkAsB1YIDJHJIAHIm+9pwgEQGCUBO5F4rDpCURwKQfzKvHQdIyiIByFHeWnCApBwSgLxnrQ0HSMogAYhzTisOkORHYh6IdhwgyYvENJBWcIAkHxKzQFrDAZI8SEwCaRUHSNIjMQekdRwgSYvEFBArOECSDokZINZwgCQNEhNArOIASTyS5oFYxwGSOCRNAwHH383BnxRajqVZIOA43QwgWYakSSDguNwEIPFH0hwQcPgVHyR+OTUFBBx+ReeFu39OzQABh3/Rj0dyk1zOrQkg4AjDwU0yn5t6IOCYL7LPCG6S0ympBgIOn9b3HwOSj1mpBQIO/8ZfMnJCslqtvjnnbpfMOzG2if/ERyUQcES27sx0kPwJSB0QcOTFcfzCnZvEOVVAwFEGB0gU3iDgKIsDJL8TUHGDgEMGB0gUAAGHLA7rSKq+QcBRBw7LSKoFAo66cFhFUiUQcNSJwyKS6oCAo24c1pBUBQQcOnBYQlINEHDowmEFSRVAwKEThwUk4kDAoRtH60hEgYCjDRwtIxEDAo62cLSKRATI8/Pz7TiOP2JbpOu6u4eHh9fY5zA/bQIp/z1J3/c3aXe37GnFgbyH93PZNj+OBkdsgnnnJ0Ty0vf9Ou9uzz+9OJDdbjf9c877mAODIya9cnNTIZGstwSQ6fa4Di2TZFihe7Y8LwWScRy/PD4+PknkKAFkDD0oOEKTk52XAMlr3/d3EqcoCiTm9Qc4JNoj3ZqRSMRehxQFMsW92+2md68W/UkZcKRrVMknRSBZ933/IrH34kC22+1T13WffQ8LDt+kdIwLQTIMw81ms9lLnLA4kPeApltk9oU6OCRaIv+aC5GI3R5TEsWBTIt6INl3Xbfml4D5m1VqBZ8/cyr57tUhFxEgByRXV1f3Xdd9OnpNsh/H8bvUW3pSzWJ53fdPVUw/ch9el04/Sk3fIL/U8A1SDMhxU0zfTaR+xrTcnJx9PoEqgMxvkxEkIJMAQGRyZ1UlCQBESaHYpkwCAJHJnVWVJAAQJYVimzIJAEQmd1ZVkgBAlBSKbcokABCZ3FlVSQIAUVIotimTAEBkcmdVJQkAREmh2KZMAgCRyZ1VlSQAECWFYpsyCQBEJndWVZIAQJQUim3KJAAQmdxZVUkCAFFSKLYpkwBAZHJnVSUJAERJodimTAIAkcmdVZUkABAlhWKbMgkARCZ3VlWSAECUFIptyiQAEJncWVVJAgBRUii2KZMAQGRyZ1UlCQBESaHYpkwCAJHJnVWVJAAQJYVimzIJAEQmd1ZVksAv9pZAMsicsiQAAAAASUVORK5CYII=",self.location).href;let F=e([{title:"工时",detail:"2h"},{title:"任务",detail:"任务内容任务内容任务内容任务内容任务内容任务内容任务内容任务内容"},{title:"工作内容",detail:"工作内容工作内容工作内容工作内容工作内容"}]);const K=t=>{switch(t){case"1":return"一";case"2":return"二";case"3":return"三";case"4":return"四";case"5":return"五";case"6":return"六";case"7":return"七";case"8":return"八";case"9":return"九";case"10":return"十";case"11":return"十一";case"12":return"十二"}};let z={locale:"zh-cn",initialView:"dayGridMonth",initialDate:g().format("YYYY-MM-DD"),plugins:[D,p],headerToolbar:{left:"PrevButton",center:"TitleButton",right:"NextButton"},contentHeight:"auto",businessHours:{daysOfWeek:[1,2,3,4,5],startTime:"00:00:00",endTime:"24:00:00"},events:[{id:"1",resourceId:"1",title:"5h 任务1",start:"2022-09-28",end:"2022-09-28",backgroundColor:"rgb(200 212 249)",textColor:"#666666"},{id:"2",resourceId:"2",title:"5h 任务2",start:"2022-10-04",end:"2022-10-04",backgroundColor:"rgb(200 212 249)",textColor:"#666666"},{id:"3",resourceId:"3",title:"5h 任务3",start:"2022-10-10",end:"2022-10-10",backgroundColor:"rgb(200 212 249)",textColor:"#666666"},{id:"3",resourceId:"3",title:"5h 任务3-1",start:"2022-10-10",end:"2022-10-10",backgroundColor:"rgb(200 212 249)",textColor:"#666666"},{id:"3",resourceId:"3",title:"5h 任务3-2",start:"2022-10-10",end:"2022-10-10",backgroundColor:"rgb(200 212 249)",textColor:"#666666"},{id:"3",resourceId:"3",title:"5h 任务3-3",start:"2022-10-10",end:"2022-10-10",backgroundColor:"rgb(200 212 249)",textColor:"#666666"},{id:"4",resourceId:"4",title:"4h 休年假",start:"2022-10-20",end:"2022-10-20",backgroundColor:"rgba(255, 153, 0, 0.16)",textColor:"#999999"}],eventBorderColor:"#ffffff00",slotLabelInterval:{hours:24},dayMaxEvents:3,schedulerLicenseKey:"GPL-My-Project-Is-Open-Source",customButtons:{PrevButton:{text:"< "+K(g().add(-1,"M").format("M"))+g().format("月,YYYY"),click:function(){X("prev")}},NextButton:{text:K(g().add(1,"M").format("M"))+g().format("月,YYYY")+" >",click:function(){X("next")}},TitleButton:{text:K(g().format("M"))+g().format("月,YYYY")}},dayCellClassNames:t=>t.isToday?["isDate","isToday"]:["isDate"],dayCellContent(t){W(t)},dayCellDidMount(t){q(t)},eventClick(t){_(t)},moreLinkContent(t){t.text="展开"+t.num+"个工时"}};a((()=>{var t;h=document.getElementById("cal2"),f=new E(h,z),f.render();let e=document.getElementsByClassName("click_date"),a=null==(t=document.querySelector(".fc-TitleButton-button"))?void 0:t.parentNode;null==a||a.appendChild(e[0])})),o((()=>{document.body.removeEventListener("click",P,!1)})),l((()=>{document.removeEventListener("click",P,!0)}));const P=t=>{t.target.closest(".cal2-popover")||($(),document.removeEventListener("click",P,!0))},W=t=>{let e=g(t.date).format("DD");t.dayNumberText=e},X=t=>{var e;$(),tt(),f.destroy();let a=g(f.currentData.currentDate).format("月,YYYY");V.value="","prev"==t?(z.initialDate=g(f.currentData.currentDate).add(-1,"M").format("YYYY-MM-DD"),z.customButtons.NextButton.text=K(g(f.currentData.currentDate).format("M"))+a+" >",z.customButtons.TitleButton.text=K(g(f.currentData.currentDate).add(-1,"M").format("M"))+a,z.customButtons.PrevButton.text="< "+K(g(f.currentData.currentDate).add(-2,"M").format("M"))+a):(z.initialDate=g(f.currentData.currentDate).add(1,"M").format("YYYY-MM-DD"),z.customButtons.NextButton.text=K(g(f.currentData.currentDate).add(2,"M").format("M"))+a+" >",z.customButtons.TitleButton.text=K(g(f.currentData.currentDate).add(1,"M").format("M"))+a,z.customButtons.PrevButton.text="< "+K(g(f.currentData.currentDate).format("M"))+a),f=new E(h,z),f.render();let o=null==(e=document.querySelector(".fc-TitleButton-button"))?void 0:e.parentNode;null==o||o.appendChild(N[0])},q=t=>{let e=t.el.children[0].children[0];if(6==Number(g(t.date).format("DD"))){let t="<div style='display:flex'><div class='lack'>缺</div></div>";e.innerHTML+=t}else if(14==Number(g(t.date).format("DD"))){let t="<div style='display:flex'><div class='work'>加</div></div>";e.innerHTML+=t}else if(20==Number(g(t.date).format("DD"))){let t="<div style='display:flex'><div class='vacation'>休</div></div>";e.innerHTML+=t}if(2==Number(g(t.date).format("DD"))){let e="<div>"+('<div class="tipboxClass">'+'<div class="tipOutClass"><div class="tipClass">!</div></div>'+"</div>")+'<div class="tipTextClass">未填写</div>'+"</div>";t.el.childNodes[0].children[1].innerHTML+=e}},_=t=>{document.body.addEventListener("click",P,!0),Z.date=g(t.event.start).format("DD"),Z.week="周"+K(g(t.event.start).day().toString()),G.value=!0;let e=t.el.getBoundingClientRect(),a=t.jsEvent.clientX,o=e.bottom-137+R,l=document.getElementById("cal-container-task"),r=null==l?void 0:l.getBoundingClientRect().height;r&&o+276>r+R&&(o-=o+276-(r+R)),U.value={modifiers:[{name:"offset",options:{offset:[a,o]}}]}},$=()=>{G.value=!1},tt=()=>{N=document.getElementsByClassName("click_date");let t=document.getElementById("picker");null==t||t.appendChild(N[0])};let et;const at=t=>{et&&clearTimeout(et),et=setTimeout((()=>{R=t.scrollTop}),100)};return(t,e)=>{const a=r("el-input"),o=r("el-popover"),l=r("el-button"),D=r("el-date-picker"),p=r("el-scrollbar");return i(),n(p,{onScroll:at,always:""},{default:d((()=>[s("div",M,[c(o,{"popper-class":"cal2-popover","virtual-ref":v.value,visible:u(G),"show-arrow":!1,"popper-options":u(U),width:"350px","virtual-triggering":""},{default:d((()=>[s("div",w,[s("div",y,[s("div",J,[s("div",Q,A(u(Z).week),1),s("div",Y,A(u(Z).date),1)]),s("img",{class:"dialong-button",src:u(L),onClick:$},null,8,x)]),(i(!0),m(k,null,C(u(F),((t,e)=>(i(),m("div",{class:"item",key:e},[s("div",S,A(t.title),1),"string"!=typeof t.detail||u(j)?"string"==typeof t.detail&&u(j)?(i(),m("div",T,[c(a,{modelValue:t.detail,"onUpdate:modelValue":e=>t.detail=e},null,8,["modelValue","onUpdate:modelValue"])])):B("v-if",!0):(i(),m("div",O,A(t.detail),1))])))),128))])])),_:1},8,["virtual-ref","visible","popper-options"]),c(l,{ref_key:"buttonRef",ref:v,style:{height:"0",visibility:"hidden"}},null,512),b,s("div",H,[c(D,{class:"click_date",modelValue:u(V),"onUpdate:modelValue":e[0]||(e[0]=t=>I(V)?V.value=t:V=t),type:"date",placeholder:"请选择日期",onChange:e[1]||(e[1]=t=>(()=>{var t;$(),tt();let e=g(V.value).format("月,YYYY");f.destroy(),z.initialDate=g(V.value).format("YYYY-MM-DD"),z.customButtons.TitleButton.text=K(g(V.value).format("M"))+e,z.customButtons.NextButton.text=K(g(V.value).add(1,"M").format("M"))+e+" >",z.customButtons.PrevButton.text="< "+K(g(V.value).add(-1,"M").format("M"))+e,f=new E(h,z),f.render();let a=null==(t=document.querySelector(".fc-TitleButton-button"))?void 0:t.parentNode;null==a||a.appendChild(N[0])})())},null,8,["modelValue"])])])])),_:1})}}}),[["__scopeId","data-v-738f85ae"]]);export{U as default};
