import{O as e,y as l,ax as a,j as t}from"./index-87a64822.js";import{u as s}from"./FitsTableProHook-941638e2.js";import{E as r,a as o,d as n,y as i,a6 as c,l as d,m as u,O as m,R as C,P as f,aj as p,V as h,W as v,u as b,az as N,aA as x,p as y}from"./vxetable-dc6e1f3b.js";import"./echarts-e0cca795.js";const w={class:"complex-report-table"},H=(e=>(N("data-v-e3e159fe"),e=e(),x(),e))((()=>y("div",{class:"empty-content"},[h(" 1、本表仅统计未签订预算项目费用"),y("br"),h(" 2、项目总费用为该项目已投入人力的总费用，含当前月份签单费用"),y("br"),h(" 3、当期合计为该项目统计时间段内已投入人力的费用合计"),y("br"),h(" 4、预建设，为项目未登记预算时，除售前支持以外的工作产生的成本（例如：预设计预开发）；"),y("br"),h(" 项目登记预算后，预建设费用归于项目建设预算。如未登记预算，则所有费用由业务员承担 ")],-1))),g=r({name:"ComplexReportTable"}),j=t(r({...g,setup(t){let r=o(0);const N=[{value:"0",label:"张铭新",data:[]},{value:"1",label:"张家建业务员",data:[]},{value:"2",label:"李志强业务员",data:[]},{value:"3",label:"说明",data:[]}],x=[{field:"job",title:"工作岗位",align:"center",headerClassName:"headerClass0",className:"columnClass0"},{field:"price",title:"单价(元/人天)",headerClassName:"headerClass1",className:"columnClass1"},{field:"stuff",title:"人员",align:"center",headerClassName:"headerClass2 ",className:"columnClass2"},{title:"合计",children:[{field:"totalCost",title:"费用",headerClassName:"headerClass3",className:"columnClass3"},{field:"totalHour",title:"工时(h)",headerClassName:"headerClass4",className:"columnClass4"}]},{title:"软件部工时项目-2022年批次",children:[{title:"FITS_PP_20220812_N_001",children:[{title:"总费用：120000",children:[{title:"售前支持",children:[{field:"softwareCost",title:"费用",headerClassName:"headerClass5",className:"columnClass5"},{field:"softwareHour",title:"工时(h)",headerClassName:"headerClass6",className:"columnClass6"}],titlePrefix:{content:"你好，我是售前支持",icon:"vxe-icon-warnion-circle-fill"}}],titlePrefix:{content:"你好，我是总费用",icon:"vxe-icon-warnion-circle-fill"}}]},{title:"张铭新",children:[{title:"当前合计：120000",children:[{title:"预建设",children:[{field:"pmCost",title:"费用",headerClassName:"headerClass7",className:"columnClass7"},{field:"pmHour",title:"工时(h)",headerClassName:"headerClass8",className:"columnClass8"}],titlePrefix:{content:"你好，我是预建设",icon:"vxe-icon-warnion-circle-fill"}}],titlePrefix:{content:"你好，我是当前合计",icon:"vxe-icon-warnion-circle-fill"}}]}]},{title:"小计",children:[{title:"售前支持",children:[{field:"presaleCost",title:"费用",headerClassName:"headerClass9",className:"columnClass9"},{field:"presaleHour",title:"工时(h)",headerClassName:"headerClass10",className:"columnClass10"}]},{title:"预建设",children:[{field:"prebuildCost",title:"费用",headerClassName:"headerClass11",className:"columnClass11"},{field:"prebuildHour",title:"工时(h)",headerClassName:"headerClass12",className:"columnClass12"}]}]}],y={align:"right",headerAlign:"center",border:"full",columns:x,data:[],showFooter:!0,toolbarConfig:{slots:{buttons:"myButtons"},tools:{enabled:!0}},formConfig:{data:{},items:[{field:"timerange",title:"统计时间",itemRender:{name:"ElDatePicker",props:{type:"daterange",rangeSeparator:"至"}}},{field:"projectName",title:"项目名称",itemRender:{name:"ElInput",props:{clearable:!0}}},{field:"amiba",span:3,title:"阿米巴",itemRender:{name:"ElSelect",props:{clearable:!0},options:[{value:"0",label:"民生组"},{value:"1",label:"运维组"},{value:"2",label:"丰德科技"},{value:"3",label:"软件部"},{value:"4",label:"产品组"},{value:"5",label:"工时"}]}}]},footerMethod:function({data:e}){let l=0,a=0,t=0,s=0,r=0,o=0,n=0,i=0,c=0,d=0;return e.map((e=>{l+=e.totalCost,a+=e.totalHour,t+=e.softwareCost,s+=e.softwareHour,r+=e.pmCost,o+=e.pmHour,n+=e.presaleCost,i+=e.presaleHour,c+=e.prebuildCost,d+=e.prebuildHour})),[["合计",0,0,l,a,t,s,r,o,n,i,c,d]]},mergeFooterItems:[{row:0,col:0,rowspan:0,colspan:3}],rowConfig:{isHover:!0},tooltipConfig:{enterDelay:0,leaveDelay:0},slots:{empty:"empty"}},g=o();let{fitsTablePro:j}=s(y,g);function E(e,l){var a;for(let t=0;t<l;t++)null==(a=N[e].data)||a.push({job:"zjj项目经理"+e,price:l.toFixed(2),stuff:"zjj项目经理"+e,totalCost:350,totalHour:4,softwareCost:340,softwareHour:20,pmCost:170,pmHour:2,presaleCost:40,presaleHour:12,prebuildCost:800,prebuildHour:10})}function L({row:e,rowIndex:l,$rowIndex:a,column:t,columnIndex:s,$columnIndex:o,$event:n}){if(document.addEventListener("mouseover",P,!0),o===r.value)return;const i=document.querySelector(".iscurrentCol");i&&i.classList.remove("iscurrentCol"),document.querySelectorAll(".iscurrentCol").forEach((e=>{e.classList.remove("iscurrentCol")}));const c=document.querySelector(`.headerClass${o}`);document.querySelectorAll(`.columnClass${o}`).forEach((e=>{e.classList.add("iscurrentCol")})),null==c||c.classList.add("iscurrentCol"),r.value=o}n((()=>{N.forEach(((e,l)=>{switch(l){case 0:E(l,20);break;case 1:E(l,10);break;case 2:E(l,5)}})),j.data=N[0].data})),i((()=>{document.removeEventListener("mouseenter",P,!0)})),c((()=>{document.removeEventListener("mouseenter",P,!0)}));const P=e=>{var l;if(!(null==(l=null==e?void 0:e.target)?void 0:l.closest(".vxe-table--body-wrapper"))){const e=document.querySelector(".iscurrentCol");e&&e.classList.remove("iscurrentCol"),document.querySelectorAll(".iscurrentCol").forEach((e=>{e.classList.remove("iscurrentCol")})),r.value=-1,document.removeEventListener("mouseenter",P,!0)}};return(t,s)=>{const r=l,o=a;return d(),u("div",w,[m(b(e),{option:b(j),ref_key:"xGrid",ref:g,onCellMouseenter:L},{myButtons:C((()=>[m(o,null,{default:C((()=>[(d(),u(f,null,p(N,((e,l)=>m(r,{key:e.value,onClick:e=>{return 3===(a=l)?(j.columns=[],j.border="none"):(j.columns=x,j.border="full"),void(j.data=N[a].data);var a}},{default:C((()=>[h(v(e.label),1)])),_:2},1032,["onClick"]))),64))])),_:1})])),empty:C((()=>[H])),_:1},8,["option"])])}}}),[["__scopeId","data-v-e3e159fe"]]);export{j as default};
