import{b as e,M as l,Q as a,aJ as t,X as o,d as u,aK as s,ay as r,a1 as n,aL as d,aA as i,c as v,aM as f,aN as c,aO as p,a7 as m,E as b,aP as g,p as y,B as h,_ as w,aQ as _,O as k,w as V,l as D,aR as K,a6 as x,x as F,A as C,y as S,q as $,as as P,at as j}from"./index.0fe8a92a.js";import{y as q,B as R,c as T,e as U,o as A,f as I,J as B,K as E,j as O,I as H,u as N,P as M,M as Y,h as W,H as L,a8 as Q,z,_ as J,O as G,A as X,ab as Z,N as ee,a3 as le,n as ae,Q as te,g as oe,al as ue,am as se,aa as re,E as ne}from"./vxetable.dc399d9c.js";import{E as de}from"./el-date-picker.ee056f1b.js";import{u as ie}from"./FitsTableProHook.f389f9bf.js";import{F as ve}from"./FitsCard.c6c4341d.js";import"./echarts.d8b3161e.js";import"./index.98d7b31c.js";const fe=e({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:l(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:l([Function,Array]),default:a},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},label:{type:String},teleported:t.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1}}),ce=["aria-expanded","aria-owns"],pe={key:0},me=["id","aria-selected","onClick"];const be=V(w(q({name:"ElAutocomplete",inheritAttrs:!1,props:fe,emits:{[o]:e=>u(e),[s]:e=>u(e),[r]:e=>u(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,select:e=>n(e)},setup(e,{expose:l,emit:a}){const t=e,u=d(),n=R(),w=i(),V=v("autocomplete"),D=T(),K=T(),x=T(),F=T();let C=!1,S=!1;const $=T([]),P=T(-1),j=T(""),q=T(!1),te=T(!1),oe=T(!1),ue=U((()=>V.b(String(f())))),se=U((()=>n.style)),re=U((()=>($.value.length>0||oe.value)&&q.value)),ne=U((()=>!t.hideLoading&&oe.value)),de=U((()=>D.value?Array.from(D.value.$el.querySelectorAll("input")):[])),ie=async()=>{await ae(),re.value&&(j.value=`${D.value.$el.offsetWidth}px`)},ve=()=>{S=!0},fe=()=>{S=!1,P.value=-1},be=c((async e=>{if(te.value)return;const l=e=>{oe.value=!1,te.value||(_(e)?($.value=e,P.value=t.highlightFirstItem?0:-1):k("ElAutocomplete","autocomplete suggestions must be an array"))};if(oe.value=!0,_(t.fetchSuggestions))l(t.fetchSuggestions);else{const a=await t.fetchSuggestions(e,l);_(a)&&l(a)}}),t.debounce),ge=e=>{const l=!!e;if(a(s,e),a(o,e),te.value=!1,q.value||(q.value=l),!t.triggerOnFocus&&!e)return te.value=!0,void($.value=[]);be(e)},ye=e=>{var l;w.value||("INPUT"!==(null==(l=e.target)?void 0:l.tagName)||de.value.includes(document.activeElement))&&(q.value=!0)},he=e=>{a(r,e)},we=e=>{S||(q.value=!0,a("focus",e),t.triggerOnFocus&&!C&&be(String(t.modelValue)))},_e=e=>{S||a("blur",e)},ke=()=>{q.value=!1,a(o,""),a("clear")},Ve=async()=>{re.value&&P.value>=0&&P.value<$.value.length?xe($.value[P.value]):t.selectWhenUnmatched&&(a("select",{value:t.modelValue}),$.value=[],P.value=-1)},De=e=>{re.value&&(e.preventDefault(),e.stopPropagation(),Ke())},Ke=()=>{q.value=!1},xe=async e=>{a(s,e[t.valueKey]),a(o,e[t.valueKey]),a("select",e),$.value=[],P.value=-1},Fe=e=>{if(!re.value||oe.value)return;if(e<0)return void(P.value=-1);e>=$.value.length&&(e=$.value.length-1);const l=K.value.querySelector(`.${V.be("suggestion","wrap")}`),a=l.querySelectorAll(`.${V.be("suggestion","list")} li`)[e],t=l.scrollTop,{offsetTop:o,scrollHeight:u}=a;o+u>t+l.clientHeight&&(l.scrollTop+=u),o<t&&(l.scrollTop-=u),P.value=e,D.value.ref.setAttribute("aria-activedescendant",`${ue.value}-item-${P.value}`)};return p(F,(()=>{re.value&&Ke()})),A((()=>{D.value.ref.setAttribute("role","textbox"),D.value.ref.setAttribute("aria-autocomplete","list"),D.value.ref.setAttribute("aria-controls","id"),D.value.ref.setAttribute("aria-activedescendant",`${ue.value}-item-${P.value}`),C=D.value.ref.hasAttribute("readonly")})),l({highlightedIndex:P,activated:q,loading:oe,inputRef:D,popperRef:x,suggestions:$,handleSelect:xe,handleKeyEnter:Ve,focus:()=>{var e;null==(e=D.value)||e.focus()},blur:()=>{var e;null==(e=D.value)||e.blur()},close:Ke,highlight:Fe}),(e,l)=>(I(),B(N(h),{ref_key:"popperRef",ref:x,visible:N(re),placement:e.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[N(V).e("popper"),e.popperClass],teleported:e.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${N(V).namespace.value}-zoom-in-top`,persistent:"",onBeforeShow:ie,onShow:ve,onHide:fe},{content:E((()=>[O("div",{ref_key:"regionRef",ref:K,class:H([N(V).b("suggestion"),N(V).is("loading",N(ne))]),style:M({[e.fitInputWidth?"width":"minWidth"]:j.value,outline:"none"}),role:"region"},[Y(N(m),{id:N(ue),tag:"ul","wrap-class":N(V).be("suggestion","wrap"),"view-class":N(V).be("suggestion","list"),role:"listbox"},{default:E((()=>[N(ne)?(I(),W("li",pe,[Y(N(b),{class:H(N(V).is("loading"))},{default:E((()=>[Y(N(g))])),_:1},8,["class"])])):(I(!0),W(L,{key:1},Q($.value,((l,a)=>(I(),W("li",{id:`${N(ue)}-item-${a}`,key:a,class:H({highlighted:P.value===a}),role:"option","aria-selected":P.value===a,onClick:e=>xe(l)},[z(e.$slots,"default",{item:l},(()=>[J(G(l[e.valueKey]),1)]))],10,me)))),128))])),_:3},8,["id","wrap-class","view-class"])],6)])),default:E((()=>[O("div",{ref_key:"listboxRef",ref:F,class:H([N(V).b(),e.$attrs.class]),style:M(N(se)),role:"combobox","aria-haspopup":"listbox","aria-expanded":N(re),"aria-owns":N(ue)},[Y(N(y),X({ref_key:"inputRef",ref:D},N(u),{"model-value":e.modelValue,onInput:ge,onChange:he,onFocus:we,onBlur:_e,onClear:ke,onKeydown:[l[0]||(l[0]=Z(ee((e=>Fe(P.value-1)),["prevent"]),["up"])),l[1]||(l[1]=Z(ee((e=>Fe(P.value+1)),["prevent"]),["down"])),Z(Ve,["enter"]),Z(Ke,["tab"]),Z(De,["esc"])],onMousedown:ye}),le({_:2},[e.$slots.prepend?{name:"prepend",fn:E((()=>[z(e.$slots,"prepend")]))}:void 0,e.$slots.append?{name:"append",fn:E((()=>[z(e.$slots,"append")]))}:void 0,e.$slots.prefix?{name:"prefix",fn:E((()=>[z(e.$slots,"prefix")]))}:void 0,e.$slots.suffix?{name:"suffix",fn:E((()=>[z(e.$slots,"suffix")]))}:void 0]),1040,["model-value","onKeydown"])],14,ce)])),_:3},8,["visible","placement","popper-class","teleported","transition"]))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/autocomplete/src/autocomplete.vue"]]));const ge=e=>(ue("data-v-6d0666e0"),e=e(),se(),e),ye=ge((()=>O("i",{class:"vxe-icon-add"},null,-1))),he=ge((()=>O("span",{class:"redStar"},"*",-1))),we=ge((()=>O("i",{class:"vxe-icon-delete"},null,-1))),_e={class:"dataBox"};var ke=D(q({__name:"DynamicTable",setup(e){const l=T(),a=T([]),t=T({}),o=T(),u=T(),s=T(),{fitsTablePro:r}=ie({keepSource:!0,columns:[{field:"add",title:"操作",width:80,slots:{default:"addDefault"}},{field:"project",title:"项目",slots:{default:"projectDefault",header:"requiredHeader"}},{field:"batch",title:"批次/迭代",slots:{default:"batchDefault",header:"requiredHeader"}},{field:"type",title:"工时类型",slots:{default:"typeDefault"}},{field:"task",title:"任务内容",slots:{default:"taskDefault",header:"requiredHeader"}},{field:"responsible",title:"责任人",slots:{default:"responsibleDefault",header:"requiredHeader"}},{field:"reviewer",title:"工时审核人",slots:{default:"reviewerDefault"}},{field:"startdate",title:"计划开始",slots:{default:"startdateDefault"}},{field:"enddate",title:"计划完成",slots:{default:"enddateDefault"}},{field:"delete",title:"操作",width:80,slots:{default:"deleteDefault"}}],data:[{project:"",batch:"",type:"",task:"",responsible:"",reviewer:"",startdate:"",enddate:""},{project:"",batch:"",type:"",task:"",responsible:"",reviewer:"",startdate:"",enddate:""},{project:"",batch:"",type:"",task:"",responsible:"",reviewer:"",startdate:"",enddate:""}],align:"center",toolbarConfig:{slots:{buttons:"buttons"}},rowConfig:{keyField:"rowKey",useKey:!0},columnConfig:{useKey:!0}},s),n=T([{value:"丰德开发框架项目"},{value:"2019年领床路径系统二期产品"},{value:"2019年领床路径系统一期产品"},{value:"开发组"},{value:"2022年特种机电设备检测"},{value:"健康档案系统"},{value:"2021年资产管理系统"},{value:"2023Vue升级"}]),d=(e,l)=>{l(e?n.value.filter((l=>-1!==l.value.toLowerCase().indexOf(e))):n.value)},i=T([{label:".net core开原框架研究",value:"0"},{label:"Fits Framework",value:"1"},{label:"PC后台管理网站",value:"2"},{label:"混合app-ionic5",value:"3"},{label:"辅助工具",value:"4"},{label:"新PC前端框架研发",value:"5"}]),v=T([{label:"项目管理",value:"0"},{label:"售前支持",value:"1"},{label:"需求分析",value:"2"},{label:"系统设计",value:"3"},{label:"功能开发",value:"4"}]),f=T([{label:"李小白",value:"0"},{label:"王辉",value:"1"},{label:"张冰冰",value:"2"},{label:"李萌萌",value:"3"},{label:"白静",value:"4"}]),c=te({project:[{required:!0,message:"请选择项目",trigger:"change"}],task:[{required:!0,message:"请输入任务内容",trigger:"change"}],batch:[{required:!0,message:"请选择批次",trigger:"change"}],responsible:[{required:!0,message:"请选择责任人",trigger:"change"}],startdate:[{validator:b,type:"date",trigger:"change"}],enddate:[{validator:b,type:"date",trigger:"change"}]});function p(){s.value.fitsTablePro.insertAt({project:"",batch:"",type:"",task:"",responsible:"",reviewer:"",startdate:"",enddate:""},-1),a.value=s.value.fitsTablePro.getTableData().tableData}function m(e,a){o.value=e.rowKey;const s="dateFormRef_"+e.rowKey+a.id;if(u.value=s,void 0===t.value[e.rowKey]?t.value[e.rowKey]={[a.field]:e[a.field]}:t.value[e.rowKey][a.field]=e[a.field],t.value[e.rowKey]&&void 0!==t.value[e.rowKey].startdate&&void 0!==t.value[e.rowKey].enddate){const t=s.split("_"),o="startdate"===a.field?Number(t.slice(-1))+1:Number(t.slice(-1))-1,u=`dateFormRef_${e.rowKey}col_${o}`;l.value.refs[u].validate()}}function b(e,l,a,u,s){if(t.value[o.value]&&l)if(t.value[o.value]&&t.value[o.value].startdate&&t.value[o.value].enddate)if(K(t.value[o.value].startdate).isBefore(t.value[o.value].enddate))a();else{const l="startdate"===e.field?"不得大于结束时间":"不得小于开始时间";a(new Error(l))}else a();else a()}function g(){a.value=s.value.fitsTablePro.getTableData().tableData}function h(){let e=0,a=0,t=0,o=0;for(let u in l.value.refs)-1!==u.indexOf("requiredFormRef_")&&null!==l.value.refs[u]&&a++,-1!==u.indexOf("dateFormRef_")&&null!==l.value.refs[u]&&o++;for(let u in l.value.refs)-1!==u.indexOf("requiredFormRef_")&&null!==l.value.refs[u]&&l.value.refs[u].validate(((l,a)=>{l&&e++})),-1!==u.indexOf("dateFormRef_")&&null!==l.value.refs[u]&&l.value.refs[u].validate(((l,u)=>{l&&(t++,e===a&&t===o&&F({message:"保存成功",type:"success"}))}))}return A((()=>{l.value=oe()})),(e,l)=>{const t=C,o=be,u=S,n=$,b=P,w=j,_=y,k=de;return I(),W(L,null,[Y(N(x),{option:N(r),ref_key:"xGrid",ref:s},{buttons:E((()=>[Y(t,{onClick:g},{default:E((()=>[J(" 获取数据 ")])),_:1}),Y(t,{onClick:h},{default:E((()=>[J(" 保存 ")])),_:1})])),addDefault:E((()=>[Y(t,{onClick:p},{default:E((()=>[ye])),_:1})])),requiredHeader:E((({slotProps:{column:e}})=>[he,O("span",null,G(e.title),1)])),projectDefault:E((({slotProps:{row:e,column:l}})=>[(I(),B(n,{ref:"requiredFormRef_"+e.rowKey+l.id,model:e,rules:c,key:e.rowKey},{default:E((()=>[Y(u,{prop:"project"},{default:E((()=>[Y(o,{modelValue:e.project,"onUpdate:modelValue":l=>e.project=l,placeholder:"请输入","fetch-suggestions":d,clearable:""},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1032,["model","rules"]))])),batchDefault:E((({slotProps:{row:e,column:l}})=>[(I(),B(n,{ref:"requiredFormRef_"+e.rowKey+l.id,model:e,rules:c,key:e.rowKey},{default:E((()=>[Y(u,{prop:"batch"},{default:E((()=>[Y(w,{modelValue:e.batch,"onUpdate:modelValue":l=>e.batch=l},{default:E((()=>[(I(!0),W(L,null,Q(i.value,(e=>(I(),B(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1032,["model","rules"]))])),typeDefault:E((({slotProps:{row:e}})=>[Y(u,null,{default:E((()=>[Y(w,{modelValue:e.type,"onUpdate:modelValue":l=>e.type=l},{default:E((()=>[(I(!0),W(L,null,Q(v.value,(e=>(I(),B(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),taskDefault:E((({slotProps:{row:e,column:l}})=>[(I(),B(n,{ref:"requiredFormRef_"+e.rowKey+l.id,model:e,rules:c,key:e.rowKey},{default:E((()=>[Y(u,{prop:"task"},{default:E((()=>[Y(_,{modelValue:e.task,"onUpdate:modelValue":l=>e.task=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1032,["model","rules"]))])),responsibleDefault:E((({slotProps:{row:e,column:l}})=>[(I(),B(n,{ref:"requiredFormRef_"+e.rowKey+l.id,model:e,rules:c,key:e.rowKey},{default:E((()=>[Y(u,{prop:"responsible"},{default:E((()=>[Y(w,{modelValue:e.responsible,"onUpdate:modelValue":l=>e.responsible=l},{default:E((()=>[(I(!0),W(L,null,Q(f.value,(e=>(I(),B(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1032,["model","rules"]))])),reviewerDefault:E((({slotProps:{row:e}})=>[Y(u,null,{default:E((()=>[Y(w,{modelValue:e.reviewer,"onUpdate:modelValue":l=>e.reviewer=l},{default:E((()=>[(I(!0),W(L,null,Q(f.value,(e=>(I(),B(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),startdateDefault:E((({slotProps:{row:e,column:l}})=>[(I(),B(n,{ref:"dateFormRef_"+e.rowKey+l.id,model:e,rules:c,key:e.rowKey},{default:E((()=>[Y(u,{prop:"startdate"},{default:E((()=>[Y(k,{modelValue:e.startdate,"onUpdate:modelValue":l=>e.startdate=l,"value-format":"YYYY-MM-DD",onChange:a=>m(e,l)},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1024)])),_:2},1032,["model","rules"]))])),enddateDefault:E((({slotProps:{row:e,column:l}})=>[(I(),B(n,{ref:"dateFormRef_"+e.rowKey+l.id,model:e,rules:c,key:e.rowKey},{default:E((()=>[Y(u,{prop:"enddate"},{default:E((()=>[Y(k,{modelValue:e.enddate,"onUpdate:modelValue":l=>e.enddate=l,"value-format":"YYYY-MM-DD",onChange:a=>m(e,l)},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1024)])),_:2},1032,["model","rules"]))])),deleteDefault:E((({slotProps:{row:e}})=>[Y(t,{onClick:l=>function(e){s.value.fitsTablePro.remove(e),a.value=s.value.fitsTablePro.getTableData().tableData}(e)},{default:E((()=>[we])),_:2},1032,["onClick"])])),_:1},8,["option"]),O("div",_e," 表格数据： "+G(a.value),1)],64)}}}),[["__scopeId","data-v-6d0666e0"]]);const Ve={class:"dynamic-table"},De={class:"content"},Ke={class:"right"},xe={class:"menu"},Fe=(e=>(ue("data-v-406c096a"),e=e(),se(),e))((()=>O("div",{class:"menu-title"},"此页内容",-1))),Ce=["id","onClick"],Se=q({name:"DynamicTable"});var $e=D(q({...Se,setup(e){const l=T([]),a=te({num:0});let t=0;const o={callback:function(e){l.value=e},selectors:["h1","h2"],exceptSelector:"[un-nav]",listenScroll:!0};const u=e=>{if(null!==t)s(t);else if(null===t)for(let t=0;t<l.value.length;t++){let o=document.getElementById("menuItem"+t);l.value[t].pos.top<=e.scrollTop+l.value[0].pos.top&&o&&(a.num=t)}},s=e=>{for(let a=0;a<l.value.length;a++){let l=document.getElementById("menuItem"+a);e!==a&&l&&(l.className="defaultStyle")}setTimeout((()=>{t=null}),100)};return(e,r)=>{const n=m,d=re("outline");return I(),W("div",Ve,[Y(n,{class:"left",onScroll:u,always:""},{default:E((()=>[ne((I(),W("div",De,[Y(ve,{title:"动态表格",desc:"动态表格展示了表单＋表格的结合使用。\n                表格内部的渲染器主要是通过表格插槽实现的。"},{default:E((()=>[Y(ke)])),_:1})])),[[d,o]])])),_:1}),O("div",Ke,[O("div",xe,[Fe,(I(!0),W(L,null,Q(l.value,((e,l)=>(I(),W("div",{class:H([{active:a.num===l},"defaultStyle"]),key:l,id:"menuItem"+l,onClick:ee((o=>function(e,l){t=l,a.num=l,e.scrollIntoView({block:"start",inline:"nearest"}),s(t)}(e.el,l)),["stop"])},G(e.title),11,Ce)))),128))])])])}}}),[["__scopeId","data-v-406c096a"]]);export{$e as default};
