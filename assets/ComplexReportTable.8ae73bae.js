import{k as e,a2 as l,z as a,b3 as t}from"./index.0ea97641.js";/* empty css                        */import{F as s,c as r,o,A as n,a4 as i,l as c,m as d,O as u,U as m,S as C,P as f,ah as p,a6 as h,W as v,u as b,ax as N,ay as x,p as w}from"./vxetable.5e2aec1d.js";import{u as y}from"./FitsTableProHook.bf67f2a4.js";import"./echarts.d8b3161e.js";const H={class:"complex-report-table"},g=(e=>(N("data-v-7da63cae"),e=e(),x(),e))((()=>w("div",{class:"empty-content"},[h(" 1、本表仅统计未签订预算项目费用"),w("br"),h(" 2、项目总费用为该项目已投入人力的总费用，含当前月份签单费用"),w("br"),h(" 3、当期合计为该项目统计时间段内已投入人力的费用合计"),w("br"),h(" 4、预建设，为项目未登记预算时，除售前支持以外的工作产生的成本（例如：预设计预开发）；"),w("br"),h(" 项目登记预算后，预建设费用归于项目建设预算。如未登记预算，则所有费用由业务员承担 ")],-1))),j=s({name:"ComplexReportTable"});var E=e(s({...j,setup(e){let s=r(0);const N=[{value:"0",label:"张铭新",data:[]},{value:"1",label:"张家建业务员",data:[]},{value:"2",label:"李志强业务员",data:[]},{value:"3",label:"说明",data:[]}],x=[{field:"job",title:"工作岗位",align:"center",headerClassName:"headerClass0",className:"columnClass0"},{field:"price",title:"单价(元/人天)",headerClassName:"headerClass1",className:"columnClass1"},{field:"stuff",title:"人员",align:"center",headerClassName:"headerClass2 ",className:"columnClass2"},{title:"合计",children:[{field:"totalCost",title:"费用",headerClassName:"headerClass3",className:"columnClass3"},{field:"totalHour",title:"工时(h)",headerClassName:"headerClass4",className:"columnClass4"}]},{title:"软件部工时项目-2022年批次",children:[{title:"FITS_PP_20220812_N_001",children:[{title:"总费用：120000",children:[{title:"售前支持",children:[{field:"softwareCost",title:"费用",headerClassName:"headerClass5",className:"columnClass5"},{field:"softwareHour",title:"工时(h)",headerClassName:"headerClass6",className:"columnClass6"}],titlePrefix:{content:"你好，我是售前支持",icon:"vxe-icon-warnion-circle-fill"}}],titlePrefix:{content:"你好，我是总费用",icon:"vxe-icon-warnion-circle-fill"}}]},{title:"张铭新",children:[{title:"当前合计：120000",children:[{title:"预建设",children:[{field:"pmCost",title:"费用",headerClassName:"headerClass7",className:"columnClass7"},{field:"pmHour",title:"工时(h)",headerClassName:"headerClass8",className:"columnClass8"}],titlePrefix:{content:"你好，我是预建设",icon:"vxe-icon-warnion-circle-fill"}}],titlePrefix:{content:"你好，我是当前合计",icon:"vxe-icon-warnion-circle-fill"}}]}]},{title:"小计",children:[{title:"售前支持",children:[{field:"presaleCost",title:"费用",headerClassName:"headerClass9",className:"columnClass9"},{field:"presaleHour",title:"工时(h)",headerClassName:"headerClass10",className:"columnClass10"}]},{title:"预建设",children:[{field:"prebuildCost",title:"费用",headerClassName:"headerClass11",className:"columnClass11"},{field:"prebuildHour",title:"工时(h)",headerClassName:"headerClass12",className:"columnClass12"}]}]}],w={align:"right",headerAlign:"center",border:"full",columns:x,data:[],showFooter:!0,toolbarConfig:{slots:{buttons:"myButtons"},tools:{enabled:!0}},formConfig:{data:{},items:[{field:"timerange",title:"统计时间",itemRender:{name:"ElDatePicker",props:{type:"daterange",rangeSeparator:"至"}}},{field:"projectName",title:"项目名称",itemRender:{name:"ElInput",props:{clearable:!0}}},{field:"amiba",span:3,title:"阿米巴",itemRender:{name:"ElSelect",props:{clearable:!0},options:[{value:"0",label:"民生组"},{value:"1",label:"运维组"},{value:"2",label:"丰德科技"},{value:"3",label:"软件部"},{value:"4",label:"产品组"},{value:"5",label:"工时"}]}}]},footerMethod:function({data:e}){let l=0,a=0,t=0,s=0,r=0,o=0,n=0,i=0,c=0,d=0;return e.map((e=>{l+=e.totalCost,a+=e.totalHour,t+=e.softwareCost,s+=e.softwareHour,r+=e.pmCost,o+=e.pmHour,n+=e.presaleCost,i+=e.presaleHour,c+=e.prebuildCost,d+=e.prebuildHour})),[["合计",0,0,l,a,t,s,r,o,n,i,c,d]]},mergeFooterItems:[{row:0,col:0,rowspan:0,colspan:3}],rowConfig:{isHover:!0},tooltipConfig:{enterDelay:0,leaveDelay:0},slots:{empty:"empty"}},j=r();let{fitsTablePro:E}=y(w,j);function L(e,l){var a;for(let t=0;t<l;t++)null==(a=N[e].data)||a.push({job:"zjj项目经理"+e,price:l.toFixed(2),stuff:"zjj项目经理"+e,totalCost:350,totalHour:4,softwareCost:340,softwareHour:20,pmCost:170,pmHour:2,presaleCost:40,presaleHour:12,prebuildCost:800,prebuildHour:10})}function P({row:e,rowIndex:l,$rowIndex:a,column:t,columnIndex:r,$columnIndex:o,$event:n}){if(document.addEventListener("mouseover",S,!0),o===s.value)return;const i=document.querySelector(".iscurrentCol");i&&i.classList.remove("iscurrentCol"),document.querySelectorAll(".iscurrentCol").forEach((e=>{e.classList.remove("iscurrentCol")}));const c=document.querySelector(`.headerClass${o}`);document.querySelectorAll(`.columnClass${o}`).forEach((e=>{e.classList.add("iscurrentCol")})),null==c||c.classList.add("iscurrentCol"),s.value=o}o((()=>{N.forEach(((e,l)=>{switch(l){case 0:L(l,20);break;case 1:L(l,10);break;case 2:L(l,5)}})),E.data=N[0].data})),n((()=>{document.removeEventListener("mouseenter",S,!0)})),i((()=>{document.removeEventListener("mouseenter",S,!0)}));const S=e=>{var l;if(!(null==(l=null==e?void 0:e.target)?void 0:l.closest(".vxe-table--body-wrapper"))){const e=document.querySelector(".iscurrentCol");e&&e.classList.remove("iscurrentCol"),document.querySelectorAll(".iscurrentCol").forEach((e=>{e.classList.remove("iscurrentCol")})),s.value=-1,document.removeEventListener("mouseenter",S,!0)}};return(e,s)=>{const r=a,o=t;return c(),d("div",H,[u(' @cellMouseenter="cellMouseenter" '),m(b(l),{option:b(E),ref_key:"xGrid",ref:j,onCellMouseenter:P},{myButtons:C((()=>[m(o,null,{default:C((()=>[(c(),d(f,null,p(N,((e,l)=>m(r,{key:e.value,onClick:e=>{return 3===(a=l)?(E.columns=[],E.border="none"):(E.columns=x,E.border="full"),void(E.data=N[a].data);var a}},{default:C((()=>[h(v(e.label),1)])),_:2},1032,["onClick"]))),64))])),_:1})])),empty:C((()=>[g])),_:1},8,["option"])])}}}),[["__scopeId","data-v-7da63cae"]]);export{E as default};
