import{ac as t,W as e,p as a,C as l,z as o,ae as r,l as i}from"./index-b6db054e.js";import{a$ as n,b0 as d,a_ as s}from"./main-3ff4a4c0.js";import{v as c,a as A,d as u,l as m,Z as k,f as C,J as B,I,i as v,F as g,N as D,u as E,h as p,_ as f,O as h,G as M,p as w,ap as J,aq as y}from"./vxetable-1644ac3d.js";import"./echarts-c32f5a2f.js";import"./preact.module-a90de4d3.js";const Q={class:"cal-container-task",id:"cal-container-task"},Y={id:"dialogBox",class:"dialog-contain-style dialogBox"},x={class:"my-header2"},S={class:"headerTitle"},O={class:"titleWeek"},T={class:"titleDate"},b=["src"],H={class:"item-title"},N={key:0,class:"item-detail"},U={key:1,class:"item-detail"},G=(t=>(J("data-v-ee7f5158"),t=t(),y(),t))((()=>v("div",{class:"card",id:"cal2"},null,-1))),R={id:"picker",style:{visibility:"hidden"}},Z=c({name:"taskView"}),V=i(c({...Z,setup(i){const c=A();let J,y,Z,V=A(),j=A(!1),L=0,F={date:"",week:""},K=A(),z=A(!1);const P=new URL("data:image/png;base64,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",self.location).href;let W=A([{title:"工时",detail:"2h"},{title:"任务",detail:"任务内容任务内容任务内容任务内容任务内容任务内容任务内容任务内容"},{title:"工作内容",detail:"工作内容工作内容工作内容工作内容工作内容"}]);const X=t=>{switch(t){case"1":return"一";case"2":return"二";case"3":return"三";case"4":return"四";case"5":return"五";case"6":return"六";case"7":return"七";case"8":return"八";case"9":return"九";case"10":return"十";case"11":return"十一";case"12":return"十二"}};let q={locale:"zh-cn",initialView:"dayGridMonth",initialDate:t().format("YYYY-MM-DD"),plugins:[n,d],headerToolbar:{left:"PrevButton",center:"TitleButton",right:"NextButton"},contentHeight:"auto",businessHours:{daysOfWeek:[1,2,3,4,5],startTime:"00:00:00",endTime:"24:00:00"},events:[{id:"1",resourceId:"1",title:"5h 任务1",start:"2022-09-28",end:"2022-09-28",backgroundColor:"rgb(200 212 249)",textColor:"#666666"},{id:"2",resourceId:"2",title:"5h 任务2",start:"2022-10-04",end:"2022-10-04",backgroundColor:"rgb(200 212 249)",textColor:"#666666"},{id:"3",resourceId:"3",title:"5h 任务3",start:"2022-10-10",end:"2022-10-10",backgroundColor:"rgb(200 212 249)",textColor:"#666666"},{id:"3",resourceId:"3",title:"5h 任务3-1",start:"2022-10-10",end:"2022-10-10",backgroundColor:"rgb(200 212 249)",textColor:"#666666"},{id:"3",resourceId:"3",title:"5h 任务3-2",start:"2022-10-10",end:"2022-10-10",backgroundColor:"rgb(200 212 249)",textColor:"#666666"},{id:"3",resourceId:"3",title:"5h 任务3-3",start:"2022-10-10",end:"2022-10-10",backgroundColor:"rgb(200 212 249)",textColor:"#666666"},{id:"4",resourceId:"4",title:"4h 休年假",start:"2022-10-20",end:"2022-10-20",backgroundColor:"rgba(255, 153, 0, 0.16)",textColor:"#999999"}],eventBorderColor:"#ffffff00",slotLabelInterval:{hours:24},dayMaxEvents:3,schedulerLicenseKey:"GPL-My-Project-Is-Open-Source",customButtons:{PrevButton:{text:"< "+X(t().add(-1,"M").format("M"))+t().format("月,YYYY"),click:function(){tt("prev")}},NextButton:{text:X(t().add(1,"M").format("M"))+t().format("月,YYYY")+" >",click:function(){tt("next")}},TitleButton:{text:X(t().format("M"))+t().format("月,YYYY")}},dayCellClassNames:t=>t.isToday?["isDate","isToday"]:["isDate"],dayCellContent(t){$(t)},dayCellDidMount(t){et(t)},eventClick(t){at(t)},moreLinkContent(t){t.text="展开"+t.num+"个工时"}};u((()=>{var t;y=document.getElementById("cal2"),J=new s(y,q),J.render();let e=document.getElementsByClassName("click_date"),a=null==(t=document.querySelector(".fc-TitleButton-button"))?void 0:t.parentNode;null==a||a.appendChild(e[0])})),m((()=>{document.body.removeEventListener("click",_,!1)})),k((()=>{document.removeEventListener("click",_,!0)}));const _=t=>{t.target.closest(".cal2-popover")||(lt(),document.removeEventListener("click",_,!0))},$=e=>{let a=t(e.date).format("DD");e.dayNumberText=a},tt=e=>{var a;lt(),ot(),J.destroy();let l=t(J.currentData.currentDate).format("月,YYYY");K.value="","prev"==e?(q.initialDate=t(J.currentData.currentDate).add(-1,"M").format("YYYY-MM-DD"),q.customButtons.NextButton.text=X(t(J.currentData.currentDate).format("M"))+l+" >",q.customButtons.TitleButton.text=X(t(J.currentData.currentDate).add(-1,"M").format("M"))+l,q.customButtons.PrevButton.text="< "+X(t(J.currentData.currentDate).add(-2,"M").format("M"))+l):(q.initialDate=t(J.currentData.currentDate).add(1,"M").format("YYYY-MM-DD"),q.customButtons.NextButton.text=X(t(J.currentData.currentDate).add(2,"M").format("M"))+l+" >",q.customButtons.TitleButton.text=X(t(J.currentData.currentDate).add(1,"M").format("M"))+l,q.customButtons.PrevButton.text="< "+X(t(J.currentData.currentDate).format("M"))+l),J=new s(y,q),J.render();let o=null==(a=document.querySelector(".fc-TitleButton-button"))?void 0:a.parentNode;null==o||o.appendChild(Z[0])},et=e=>{let a=e.el.children[0].children[0];if(6==Number(t(e.date).format("DD"))){let t="<div style='display:flex'><div class='lack'>缺</div></div>";a.innerHTML+=t}else if(14==Number(t(e.date).format("DD"))){let t="<div style='display:flex'><div class='work'>加</div></div>";a.innerHTML+=t}else if(20==Number(t(e.date).format("DD"))){let t="<div style='display:flex'><div class='vacation'>休</div></div>";a.innerHTML+=t}if(2==Number(t(e.date).format("DD"))){let t="<div>"+('<div class="tipboxClass">'+'<div class="tipOutClass"><div class="tipClass">!</div></div>'+"</div>")+'<div class="tipTextClass">未填写</div>'+"</div>";e.el.childNodes[0].children[1].innerHTML+=t}},at=e=>{document.body.addEventListener("click",_,!0),F.date=t(e.event.start).format("DD"),F.week="周"+X(t(e.event.start).day().toString()),j.value=!0;let a=e.el.getBoundingClientRect(),l=e.jsEvent.clientX,o=a.bottom-137+L,r=document.getElementById("cal-container-task"),i=null==r?void 0:r.getBoundingClientRect().height;i&&o+276>i+L&&(o-=o+276-(i+L)),V.value={modifiers:[{name:"offset",options:{offset:[l,o]}}]}},lt=()=>{j.value=!1},ot=()=>{Z=document.getElementsByClassName("click_date");let t=document.getElementById("picker");null==t||t.appendChild(Z[0])};let rt;const it=t=>{rt&&clearTimeout(rt),rt=setTimeout((()=>{L=t.scrollTop}),100)};return(i,n)=>{const d=a,A=l,u=o,m=r,k=e;return C(),B(k,{onScroll:it,always:""},{default:I((()=>[v("div",Q,[g(A,{"popper-class":"cal2-popover","virtual-ref":E(c),visible:E(j),"show-arrow":!1,"popper-options":E(V),width:"350px","virtual-triggering":""},{default:I((()=>[v("div",Y,[v("div",x,[v("div",S,[v("div",O,D(E(F).week),1),v("div",T,D(E(F).date),1)]),v("img",{class:"dialong-button",src:E(P),onClick:lt},null,8,b)]),(C(!0),p(M,null,f(E(W),((t,e)=>(C(),p("div",{class:"item",key:e},[v("div",H,D(t.title),1),"string"!=typeof t.detail||E(z)?"string"==typeof t.detail&&E(z)?(C(),p("div",U,[g(d,{modelValue:t.detail,"onUpdate:modelValue":e=>t.detail=e},null,8,["modelValue","onUpdate:modelValue"])])):h("",!0):(C(),p("div",N,D(t.detail),1))])))),128))])])),_:1},8,["virtual-ref","visible","popper-options"]),g(u,{ref_key:"buttonRef",ref:c,style:{height:"0",visibility:"hidden"}},null,512),G,v("div",R,[g(m,{class:"click_date",modelValue:E(K),"onUpdate:modelValue":n[0]||(n[0]=t=>w(K)?K.value=t:K=t),type:"date",placeholder:"请选择日期",onChange:n[1]||(n[1]=e=>(()=>{var e;lt(),ot();let a=t(K.value).format("月,YYYY");J.destroy(),q.initialDate=t(K.value).format("YYYY-MM-DD"),q.customButtons.TitleButton.text=X(t(K.value).format("M"))+a,q.customButtons.NextButton.text=X(t(K.value).add(1,"M").format("M"))+a+" >",q.customButtons.PrevButton.text="< "+X(t(K.value).add(-1,"M").format("M"))+a,J=new s(y,q),J.render();let l=null==(e=document.querySelector(".fc-TitleButton-button"))?void 0:e.parentNode;null==l||l.appendChild(Z[0])})())},null,8,["modelValue"])])])])),_:1})}}}),[["__scopeId","data-v-ee7f5158"]]);export{V as default};
