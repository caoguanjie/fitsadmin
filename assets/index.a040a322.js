import{an as e,k as l,s as a,ao as s,ap as t,x as o,o as i,p as d,z as r,n,$ as c,a0 as A,a2 as m,aq as u,E as b,a3 as C,y as p,B as f,ar as g,a7 as R,a6 as h}from"./index.0ea97641.js";import{c as v,a as k,b as y,m as x}from"./el-collapse-transition.3ecc566c.js";import{F as U,l as w,m as E,p as I,c as V,Z as D,d as B,aB as L,O as Q,R as _,S as P,U as T,u as z,P as q,ah as F,a6 as j,o as S,W as G,i as W,n as M,ax as N,ay as O,L as H,M as Y,Q as Z}from"./vxetable.5e2aec1d.js";import{b as J,a as K}from"./system.6337f85a.js";import{u as X}from"./FitsTableProHook.bf67f2a4.js";import{E as $,a as ee}from"./el-radio.e9021cb6.js";import"./echarts.d8b3161e.js";const le=U({name:"Close"}),ae={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},se=[I("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1)];var te=e(le,[["render",function(e,l,a,s,t,o){return w(),E("svg",ae,se)}]]);const oe=U({name:"UserFilled"}),ie={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},de=[I("path",{fill:"currentColor",d:"M288 320a224 224 0 1 0 448 0 224 224 0 1 0-448 0zm544 608H160a32 32 0 0 1-32-32v-96a160 160 0 0 1 160-160h448a160 160 0 0 1 160 160v96a32 32 0 0 1-32 32z"},null,-1)];var re=e(oe,[["render",function(e,l,a,s,t,o){return w(),E("svg",ie,de)}]]);const ne={class:"add-role"},ce={class:"add-content"},Ae={class:"add-bottom"};var me=l(U({__name:"addRole",props:{keys:String,setData:Object,roleClass:Array},emits:["dataChange","closeDialog"],setup(e,{emit:l}){const n=e,c=V("default"),A=V();let m=D({Uname:"",Ucode:"",Udescribe:"",Sort:"",Ustate:!1,Roledisable:""}),u=D({Cname:"",Cdescribe:""}),b=V();B((()=>n.setData),(()=>{"addClass"==n.keys?u=Object.assign(u,n.setData):"addRole"==n.keys&&(m=Object.assign(m,n.setData))}),{immediate:!0,deep:!0}),B((()=>n.roleClass),(()=>{b.value=L.clone(n.roleClass)}),{immediate:!0,deep:!0});const C=D({Uname:[{required:!0,message:"请输入角色名称",trigger:"blur"}],Cname:[{required:!0,message:"请输入分类名称",trigger:"blur"}],Ucode:[{required:!0,message:"请输入角色编码",trigger:"blur"},{min:2,max:10,message:"长度请大于3，小于10",trigger:"blur"}]}),p=e=>{"cancle"!=e?A.value&&A.value.validate((e=>{if(!e)return a({message:"必填项未填写完整！",type:"warning"}),!1;if("addClass"==n.keys){let e=L.clone(u);l("dataChange",e,n.keys)}else if("addRole"==n.keys){let e=L.clone(m);l("dataChange",e,n.keys)}l("closeDialog","addRole")})):l("closeDialog","addRole")};return(e,l)=>{const a=s,f=t,g=o,R=i,h=$,v=ee,k=d,y=r;return w(),E("div",ne,[I("div",ce,[Q(" 新增角色内容 "),"addRole"==n.keys?(w(),_(k,{key:0,ref_key:"ruleFormRef",ref:A,model:z(m),rules:C,"label-width":"120px",class:"demo-ruleForm",size:c.value,"status-icon":""},{default:P((()=>[T(g,{label:"角色分类",prop:"Ucode"},{default:P((()=>[T(f,{style:{width:"100%"},modelValue:z(m).Ucode,"onUpdate:modelValue":l[0]||(l[0]=e=>z(m).Ucode=e),class:"m-2",placeholder:"请选择"},{default:P((()=>[(w(!0),E(q,null,F(z(b),((e,l)=>(w(),_(a,{key:l,label:e.Cname,value:e.Cname},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),T(g,{label:"角色名称",prop:"Uname"},{default:P((()=>[T(R,{modelValue:z(m).Uname,"onUpdate:modelValue":l[1]||(l[1]=e=>z(m).Uname=e)},null,8,["modelValue"])])),_:1}),T(g,{label:"角色描述",prop:"Udescribe"},{default:P((()=>[T(R,{modelValue:z(m).Udescribe,"onUpdate:modelValue":l[2]||(l[2]=e=>z(m).Udescribe=e),rows:"5",resize:"none",type:"textarea"},null,8,["modelValue"])])),_:1}),T(g,{label:"状态",prop:"Ustate",style:{display:"flex","align-items":"center"}},{default:P((()=>[T(v,{modelValue:z(m).Ustate,"onUpdate:modelValue":l[3]||(l[3]=e=>z(m).Ustate=e),class:"ml-4"},{default:P((()=>[T(h,{label:!0,size:"large"},{default:P((()=>[j("启用")])),_:1}),T(h,{label:!1,size:"large"},{default:P((()=>[j("禁用")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","size"])):"addClass"==n.keys?(w(),E(q,{key:1},[Q(" 新增分类内容 "),T(k,{ref_key:"ruleFormRef",ref:A,model:z(u),rules:C,"label-width":"120px",class:"demo-classyForm",size:c.value,"status-icon":""},{default:P((()=>[T(g,{label:"角色分类",prop:"Cname"},{default:P((()=>[T(R,{modelValue:z(u).Cname,"onUpdate:modelValue":l[4]||(l[4]=e=>z(u).Cname=e)},null,8,["modelValue"])])),_:1}),T(g,{label:"分类描述",prop:"Cdescribe"},{default:P((()=>[T(R,{modelValue:z(u).Cdescribe,"onUpdate:modelValue":l[5]||(l[5]=e=>z(u).Cdescribe=e),rows:"5",resize:"none",type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules","size"])],2112)):Q("v-if",!0)]),I("div",Ae,[T(y,{class:"add-button",size:"large",onClick:l[6]||(l[6]=e=>p("cancle"))},{default:P((()=>[j("取消")])),_:1}),T(y,{class:"add-button",type:"primary",size:"large",onClick:l[7]||(l[7]=e=>p("submit"))},{default:P((()=>[j("确定 ")])),_:1})])])}}}),[["__scopeId","data-v-6e8de86f"]]);const ue={class:"edit-role"},be={class:"edit-content"},Ce={class:"edit-bottom"};var pe=l(U({__name:"editRole",props:{keys:String,setData:Object,roleClass:Array},emits:["dataChange","closeDialog"],setup(e,{emit:l}){const n=e,c=V("default"),A=V();let m=D({Uname:"",Ucode:"",Udescribe:"",Sort:"",Ustate:!1,Roledisable:""}),u=D({Cname:"",Cdescribe:""});const b=V(),C=D({Uname:[{required:!0,message:"请输入角色名称",trigger:"blur"}],Cname:[{required:!0,message:"请输入分类名称",trigger:"blur"}],Ucode:[{required:!0,message:"请输入角色编码",trigger:"blur"},{min:3,max:10,message:"长度请大于3，小于10",trigger:"blur"}]});B((()=>n.setData),(()=>{"editClass"==n.keys?u=Object.assign(u,n.setData):"editRole"==n.keys&&(m=Object.assign(m,n.setData))}),{immediate:!0,deep:!0}),B((()=>n.roleClass),(()=>{b.value=L.clone(n.roleClass)}),{immediate:!0,deep:!0});const p=e=>{"cancle"!=e?A.value&&A.value.validate((e=>{if(!e)return a({message:"必填项未填写完整！",type:"warning"}),!1;if("editClass"==n.keys){let e={Cname:u.Cname,Cdescribe:u.Cdescribe};l("dataChange",e,n.keys)}else n.keys;l("closeDialog","addRole")})):l("closeDialog","addRole")};return(e,l)=>{const a=s,f=t,g=o,R=i,h=$,v=ee,k=d,y=r;return w(),E("div",ue,[I("div",be,[Q(" 编辑角色内容 "),"editRole"==n.keys?(w(),_(k,{key:0,ref_key:"ruleFormRef",ref:A,model:z(m),rules:C,"label-width":"120px",class:"demo-ruleForm",size:c.value,"status-icon":""},{default:P((()=>[T(g,{label:"角色分类",prop:"Ucode"},{default:P((()=>[T(f,{style:{width:"100%"},modelValue:z(m).Ucode,"onUpdate:modelValue":l[0]||(l[0]=e=>z(m).Ucode=e),class:"m-2",placeholder:"请选择"},{default:P((()=>[(w(!0),E(q,null,F(z(b),((e,l)=>(w(),_(a,{key:l,label:e.Cname,value:e.Cname},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),T(g,{label:"角色名称",prop:"Uname"},{default:P((()=>[T(R,{modelValue:z(m).Uname,"onUpdate:modelValue":l[1]||(l[1]=e=>z(m).Uname=e)},null,8,["modelValue"])])),_:1}),T(g,{label:"角色描述",prop:"Udescribe"},{default:P((()=>[T(R,{modelValue:z(m).Udescribe,"onUpdate:modelValue":l[2]||(l[2]=e=>z(m).Udescribe=e),rows:"5",resize:"none",type:"textarea"},null,8,["modelValue"])])),_:1}),T(g,{label:"状态",prop:"Ustate",style:{display:"flex","align-items":"center"}},{default:P((()=>[T(v,{modelValue:z(m).Ustate,"onUpdate:modelValue":l[3]||(l[3]=e=>z(m).Ustate=e),class:"ml-4"},{default:P((()=>[T(h,{label:!0,size:"large"},{default:P((()=>[j("启用")])),_:1}),T(h,{label:!1,size:"large"},{default:P((()=>[j("禁用")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","size"])):"editClass"==n.keys?(w(),E(q,{key:1},[Q(" 角色管理编辑内容 "),T(k,{ref_key:"ruleFormRef",ref:A,model:z(u),rules:C,"label-width":"120px",class:"demo-classyForm",size:c.value,"status-icon":""},{default:P((()=>[T(g,{label:"角色分类",prop:"Cname"},{default:P((()=>[T(R,{modelValue:z(u).Cname,"onUpdate:modelValue":l[4]||(l[4]=e=>z(u).Cname=e)},null,8,["modelValue"])])),_:1}),T(g,{label:"分类描述",prop:"Cdescribe"},{default:P((()=>[T(R,{modelValue:z(u).Cdescribe,"onUpdate:modelValue":l[5]||(l[5]=e=>z(u).Cdescribe=e),rows:"5",resize:"none",type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules","size"])],2112)):Q("v-if",!0)]),I("div",Ce,[T(y,{class:"edit-button",size:"large",onClick:l[6]||(l[6]=e=>p("cancle"))},{default:P((()=>[j("取消")])),_:1}),T(y,{class:"edit-button",type:"primary",size:"large",onClick:l[7]||(l[7]=e=>p("submit"))},{default:P((()=>[j("确定")])),_:1})])])}}}),[["__scopeId","data-v-3cf6e0d0"]]);const fe={class:"relate-role"},ge={class:"relate-content"},Re={class:"relateLeft"},he={class:"leftTree"},ve={class:"search"},ke={class:"contain"},ye={class:"treeItem",style:{display:"flex","align-items":"flex-end"}},xe={key:0,class:"parentItem",style:{"padding-right":"4px"}},Ue={class:"leftTable"},we={class:"scrollContent"},Ee={class:"tableContent"},Ie={class:"tableBottom"},Ve={key:0},De={key:1},Be={class:"tableBottomContent"},Le={class:"relateRight"},Qe=(e=>(N("data-v-d11b4c32"),e=e(),O(),e))((()=>I("div",{class:"title"},"分配角色",-1))),_e={class:"search"},Pe={class:"contain"},Te={class:"relate-bottom"};var ze=l(U({__name:"relateRole",emits:["closeDialog"],setup(e,{emit:l}){let a={img1:new URL("data:image/png;base64,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",self.location).href,img2:new URL("/fitsadmin/assets/yingyerenyuan.8e601937.png",self.location).href};const s={children:"children",label:"label"},{user:t}=n(),o=V(),d=e=>{l("closeDialog","relateRole")},f={keepSource:!0,showOverflow:!1,id:"toolbar_demo_1",height:450,rowConfig:{height:40},storage:{enabled:!0,key:"relateRoleList",dataBase:t.userInfo.id},formConfig:{items:[{field:"keyword",title:"",itemRender:{name:"ElInput",props:{placeholder:"搜索用户"}}}]},importConfig:{},exportConfig:{},pagerConfig:{enabled:!0},columns:[{field:"Checkbox",type:"checkbox",title:"多选",width:50},{field:"Indexes",title:"序号",type:"seq",width:100},{field:"Uname",title:"角色名称",minWidth:130,treeNode:!0},{field:"Ucode",title:"角色编码",minWidth:100},{field:"Udescribe",title:"角色描述",minWidth:100}],toolbarConfig:{buttons:[],tools:{enabled:!1}},proxyConfig:{form:!0,autoLoad:!0,ajax:{query:({form:e})=>new Promise((l=>{J(e,{pageIndex:11,pageSize:23}).then((e=>{const{ReturnData:a}=e;l(a?{result:L.toTreeArray(a.TableList,{clear:!0}),page:{total:a.ItemCount}}:{result:[],page:{total:0}})}))}))}}},{fitsTablePro:g}=X(f,o);S((async()=>{const e=await K();R.value=e.ReturnData.TableList}));const R=V(),h=[{id:1,label:"销售人员",children:[{id:11,label:"销售人员1"},{id:12,label:"销售人员2"}]},{id:2,label:"销售人员"},{id:3,label:"服务人员",children:[{id:31,label:"服务人员1"},{id:32,label:"服务人员2"}]},{id:4,label:"工作人员"},{id:5,label:"开发人员"},{id:6,label:"测试人员"}],v=V(null),k=[];let y=V(!1);const x=V(),U=()=>{y.value?h.forEach((e=>{x.value.setChecked(e,!0,!0)})):x.value.setCheckedNodes([])},D=(e,l,a)=>{let s=0;k.forEach(((e,l)=>{x.value.getNode(e).checked?(s++,s==k.length-1&&(s=0,y.value=!0)):(s=0,y.value=!1)}))},B=()=>{let e=o.value.fitsTablePro.getCheckboxRecords(!0);v.value=[],e.forEach(((e,l)=>{let a={name:e.Uname,data:e};v.value.push(a)}))},Q=()=>{M((()=>{o.value.fitsTablePro.commitProxy("query")}))};return(e,l)=>{const t=i,n=u,f=b,k=C,V=p,L=r;return w(),E("div",fe,[I("div",ge,[I("div",Re,[I("div",he,[I("div",ve,[T(t,{class:"searchBox",placeholder:"关键词搜索","prefix-icon":z(c)},null,8,["prefix-icon"])]),I("div",ke,[T(k,{height:"480px"},{default:P((()=>[T(z(A),{ref_key:"treeRef",ref:x,data:R.value,"default-expand-all":"","node-key":"id","highlight-current":"",props:s,onCheckChange:D},{default:P((e=>[I("div",ye,["children"in e.data?(w(),E("div",xe,[T(f,null,{default:P((()=>[T(n,{style:{width:"100%",height:"100%"},src:z(a).img1},null,8,["src"])])),_:1}),j(" "+G(e.data.name),1)])):(w(),E("div",{key:1,class:"ChildItem",style:{"padding-right":"4px"},onClick:Q},[T(f,null,{default:P((()=>[T(n,{style:{width:"100%",height:"100%"},src:z(a).img2},null,8,["src"])])),_:1}),j(" "+G(e.data.name),1)]))])])),_:1},8,["data"])])),_:1})])]),I("div",Ue,[I("div",we,[I("div",Ee,[T(z(m),{option:z(g),ref_key:"xGrid",ref:o,onCheckboxChange:B,onCheckboxAll:B},null,8,["option"])]),T(k,{height:"150px"},{default:P((()=>[I("div",Ie,[z(v)?(w(),E("div",De,"已选用户:"+G(z(v).length)+"人",1)):(w(),E("div",Ve,"已选用户:0人")),I("div",Be,[(w(!0),E(q,null,F(z(v),((e,l)=>(w(),E("div",{class:"contentItem",key:l},[I("span",null,G(e.name),1),T(f,null,{default:P((()=>[T(z(te),{style:{cursor:"pointer"},onClick:e=>(e=>{o.value.fitsTablePro.setCheckboxRow(v.value[e].data,!1),v.value.splice(e,1)})(l)},null,8,["onClick"])])),_:2},1024)])))),128))])])])),_:1})])])]),I("div",Le,[Qe,I("div",_e,[T(t,{class:"searchBox",placeholder:"关键词搜索","prefix-icon":z(c)},null,8,["prefix-icon"])]),I("div",Pe,[T(V,{label:"全选",size:"large",modelValue:z(y),"onUpdate:modelValue":l[0]||(l[0]=e=>W(y)?y.value=e:y=e),onChange:U},null,8,["modelValue"]),T(k,{height:"480px"},{default:P((()=>[T(z(A),{ref_key:"treeRef",ref:x,data:h,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:s,onCheckChange:D},null,512)])),_:1})])])]),I("div",Te,[T(L,{class:"relate-button",onClick:l[1]||(l[1]=e=>d()),size:"large"},{default:P((()=>[j("取消")])),_:1}),T(L,{class:"relate-button",type:"primary",onClick:l[2]||(l[2]=e=>d()),size:"large"},{default:P((()=>[j("提交")])),_:1})])])}}}),[["__scopeId","data-v-d11b4c32"]]);const qe={class:"role-manage"},Fe={class:"role-left"},je={class:"left-classification"},Se={class:"top"},Ge={div:"",class:"bottom"},We={class:"title"},Me={class:"custom-tree-node"},Ne={class:"text"},Oe={class:"textContent"},He={class:"btn"},Ye={class:"btn"},Ze={class:"left-contain"},Je=["onClick"],Ke=["onClick"],Xe=["onClick"],$e={class:"role-right"},el=(e=>(N("data-v-0766ff0a"),e=e(),O(),e))((()=>I("div",{class:"title"},"菜单权限管理列表",-1))),ll={class:"search"},al={class:"contain"},sl=U({name:"Roles"});var tl=l(U({...sl,setup(e){const l={children:"children",label:"label"},{user:s}=n(),t=V(),o=D({operateRole:{visible:!1,key:"",data:{},props:{title:"",width:"40%"}},baseRole:{dialogText:"",key:"",visible:!1,props:{title:"",width:"30%"}},relateRole:{dialogText:"关联用户",key:"",visible:!1,props:{title:"关联用户",width:"75%"}}}),d=e=>{a({message:e,type:"warning"})};let u=V(!0);const U=()=>{u.value=!u.value},B={async toolbarButtonClick({code:e}){let l=t.value.fitsTablePro.getCheckboxRecords();switch(e){case"addRole":{o.operateRole.props.title="新增角色",o.operateRole.visible=!0,o.operateRole.key="addRole";let e={Uname:"",Ucode:"",Udescribe:"",Sort:"",Ustate:!1,Roledisable:""};o.operateRole.data=e;break}case"RoleRelation":o.relateRole.visible=!0;break;case"RoleUse":l.length?(o.baseRole.visible=!0,o.baseRole.dialogText="是否确定启用选中的用户？",o.baseRole.key="RoleUse"):d("请选择至少一个角色！");break;case"Roledisable":l.length?(o.baseRole.visible=!0,o.baseRole.dialogText="是否确定禁用选中的用户？",o.baseRole.key="Roledisable"):d("请选择至少一个角色！");break;case"RoleyExport":l.length?(o.baseRole.visible=!0,o.baseRole.dialogText="是否确定导出选中的用户？",o.baseRole.key="RoleyExport"):d("请选择至少一个角色！");break;case"Roleremove":l.length?(o.baseRole.visible=!0,o.baseRole.dialogText="是否确定删除选中的用户？",o.baseRole.key="Roleremove"):d("请选择至少一个角色！")}}},L={keepSource:!1,showOverflow:"tooltip",id:"rolestable",rowConfig:{height:52,isCurrent:!0},storage:{enabled:!0,key:"SystemManageRoleList",dataBase:s.userInfo.id},formConfig:{items:[{field:"name",span:3,title:"角色名称",itemRender:{name:"ElInput",props:{placeholder:"请输入角色名称"}}},{field:"code",span:3,title:"角色编码",itemRender:{name:"ElInput",props:{placeholder:"请输入角色编码"}}}]},importConfig:{},exportConfig:{},pagerConfig:{enabled:!0},columns:[{field:"Checkbox",type:"checkbox",title:"多选",minWidth:50},{field:"Indexes",title:"序号",type:"seq",minWidth:80},{field:"Uname",title:"角色名称",minWidth:130},{field:"Ucode",title:"角色编码",minWidth:130},{field:"Udescribe",title:"角色描述",minWidth:130},{field:"Sort",title:"排序",minWidth:100},{field:"Ustate",title:"角色状态",slots:{default:"state"},minWidth:100},{field:"Operation",title:"操作",width:200,fixed:"right",slots:{default:"operate"},contentRender:{name:"TableOpeate"}}],toolbarConfig:{buttons:[{code:"addRole",name:"新增角色",status:"primary"},{code:"RoleRelation",name:"关联用户"},{code:"RoleUse",name:"启用"},{code:"Roledisable",name:"禁用"},{code:"RoleyExport",name:"导出"},{code:"Roleremove",name:"批量删除"}],tools:{enabled:!0}},proxyConfig:{form:!0,autoLoad:!0,ajax:{query:({form:e})=>new Promise((l=>{J(e,{pageIndex:11,pageSize:23}).then((e=>{const{ReturnData:a}=e;l(a?{result:a.TableList,page:{total:a.ItemCount}}:{result:[],page:{total:0}})}))}))}}},{fitsTablePro:q}=X(L,t),F=V([{Cname:"后勤",Cdescribe:""},{Cname:"财务",Cdescribe:""},{Cname:"产品中心",Cdescribe:""},{Cname:"前端",Cdescribe:""},{Cname:"设计",Cdescribe:""},{Cname:"维护中心",Cdescribe:""},{Cname:"测试",Cdescribe:""},{Cname:"运维",Cdescribe:""},{Cname:"需求",Cdescribe:""},{Cname:"售后",Cdescribe:""},{Cname:"维护",Cdescribe:""},{Cname:"管理",Cdescribe:""},{Cname:"财务",Cdescribe:""},{Cname:"产品中心",Cdescribe:""},{Cname:"前端",Cdescribe:""},{Cname:"设计",Cdescribe:""},{Cname:"维护中心",Cdescribe:""},{Cname:"测试",Cdescribe:""},{Cname:"运维",Cdescribe:""},{Cname:"需求",Cdescribe:""},{Cname:"售后",Cdescribe:""},{Cname:"维护",Cdescribe:""},{Cname:"管理",Cdescribe:""},{Cname:"财务",Cdescribe:""},{Cname:"产品中心",Cdescribe:""},{Cname:"前端",Cdescribe:""},{Cname:"设计",Cdescribe:""},{Cname:"维护中心",Cdescribe:""},{Cname:"测试",Cdescribe:""},{Cname:"运维",Cdescribe:""},{Cname:"需求",Cdescribe:""},{Cname:"售后",Cdescribe:""},{Cname:"维护",Cdescribe:""},{Cname:"管理",Cdescribe:""},{Cname:"财务",Cdescribe:""},{Cname:"产品中心",Cdescribe:""},{Cname:"前端",Cdescribe:""},{Cname:"设计",Cdescribe:""},{Cname:"维护中心",Cdescribe:""},{Cname:"测试",Cdescribe:""},{Cname:"运维",Cdescribe:""},{Cname:"需求",Cdescribe:""},{Cname:"售后",Cdescribe:""},{Cname:"维护",Cdescribe:""},{Cname:"管理",Cdescribe:""},{Cname:"财务",Cdescribe:""},{Cname:"产品中心",Cdescribe:""},{Cname:"前端",Cdescribe:""},{Cname:"设计",Cdescribe:""},{Cname:"维护中心",Cdescribe:""},{Cname:"测试",Cdescribe:""},{Cname:"运维",Cdescribe:""},{Cname:"需求",Cdescribe:""},{Cname:"售后",Cdescribe:""},{Cname:"维护",Cdescribe:""},{Cname:"管理",Cdescribe:""}]);let N=V(!1);const O=V(),K=[{id:1,label:"销售人员",children:[{id:11,label:"销售人员1"},{id:12,label:"销售人员2"}]},{id:2,label:"销售人员"},{id:3,label:"服务人员",children:[{id:31,label:"服务人员1"},{id:32,label:"服务人员2"}]},{id:4,label:"服务人员"},{id:5,label:"服务人员"},{id:6,label:"服务人员"}],$=[];S((()=>{M((()=>{})),setTimeout((()=>{}),2e3),K.forEach((e=>{ae(e)}))}));const ee=()=>{N.value?K.forEach((e=>{O.value.setChecked(e,!0,!0)})):O.value.setCheckedNodes([])},le=(e,l,a)=>{let s=0;$.forEach(((e,l)=>{O.value.getNode(e).checked?(s++,s==$.length-1&&(s=0,N.value=!0)):(s=0,N.value=!1)}))},ae=e=>("children"in e&&e.children.forEach((e=>ae(e))),$.push(e.id),e.id),se=e=>{switch(e){case"addRole":o.operateRole.visible=!1;break;case"baseRole":o.baseRole.visible=!1;break;case"relateRole":o.relateRole.visible=!1}},te=(e,l)=>{"addClass"==o.operateRole.key?e.Cname&&(F.value.push(e),e=[]):"addRole"==o.operateRole.key||o.operateRole.key},oe=(e,l)=>{"editRole"==l?(o.operateRole.visible=!0,o.operateRole.props.title="编辑角色",o.operateRole.key="editRole",o.operateRole.data=e):"relaRole"==l?(o.baseRole.visible=!0,o.baseRole.dialogText="是否确定关联选中的用户？",o.baseRole.key="relaRole"):"deleteRole"==l&&(o.baseRole.visible=!0,o.baseRole.dialogText="是否确定删除选中的用户？",o.baseRole.key="deleteRole")},ie=()=>{o.operateRole.props.title="新增角色分类",o.operateRole.visible=!0,o.operateRole.key="addClass";o.operateRole.data={Cname:"",Cdescribe:""}},de=(e,l)=>{"delete"==l?(o.baseRole.visible=!0,o.baseRole.dialogText="是否确定删除？",o.baseRole.key="deleteClass"):"editClass"==l&&(o.operateRole.visible=!0,o.operateRole.props.title="编辑角色分类",o.operateRole.key="editClass",o.operateRole.data=e)},ne=()=>{let e=t.value.fitsTablePro.getCheckboxRecords(!0),l=O.value.getCheckedNodes();e.length?l.length||d("请选择至少一个权限进行分配！"):d("请选择至少一个角色！")},ce=()=>{M((()=>{t.value.fitsTablePro.commitProxy("query")}))};return(e,a)=>{const s=i,d=b,n=r,V=f,D=C,L=g,S=R,M=p;return w(),E("div",qe,[I("div",Fe,[I("div",je,[I("div",Se,[T(s,{class:"searchBox",placeholder:"搜索角色分类","prefix-icon":z(c)},null,8,["prefix-icon"]),T(d,{style:{cursor:"pointer"}},{default:P((()=>[T(z(v),{color:"#007dff",onClick:ie})])),_:1})]),I("div",Ge,[I("div",We,[H(T(d,{onClick:U,color:"#909399",style:{"margin-right":"8px"}},{default:P((()=>[T(z(k))])),_:1},512),[[Y,!z(u)]]),H(T(d,{onClick:U,color:"#909399",style:{"margin-right":"8px"}},{default:P((()=>[T(z(y))])),_:1},512),[[Y,z(u)]]),j(" 角色管理 ")]),T(L,null,{default:P((()=>[H(I("div",null,[T(D,{class:"treeScrollbar"},{default:P((()=>[T(z(A),{data:F.value,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},{default:P((({data:e})=>[I("span",Me,[I("div",Ne,[I("div",{class:"textLeft",onClick:ce},[T(d,null,{default:P((()=>[T(z(re),{color:"#007DFF"})])),_:1}),I("div",Oe,[I("span",null,G(e.Cname),1)])]),T(d,{class:"moreButton"},{default:P((()=>[T(V,{placement:"bottom",title:"",trigger:"click","popper-class":"Role-popover","hide-after":0},{reference:P((()=>[T(z(x),{color:"#999999"})])),default:P((()=>[I("div",He,[T(n,{onClick:l=>de(e,"editClass")},{default:P((()=>[j("编辑 ")])),_:2},1032,["onClick"])]),I("div",Ye,[T(n,{onClick:l=>de(e,"delete")},{default:P((()=>[j(" 删除 ")])),_:2},1032,["onClick"])])])),_:2},1024)])),_:2},1024)])])])),_:1},8,["data"])])),_:1})],512),[[Y,z(u)]])])),_:1})])]),I("div",Ze,[Q(" <fits-list-seach :formItem='formItem' /> "),T(z(m),{option:z(q),ref_key:"xGrid",ref:t,"grid-events":B},{operate:P((({slotProps:e})=>[Q(' <fits-table :option="fitsTablePro" ref="xGrid" :grid-events="gridEvents"\r\n                            @checkbox-all="onCheckAll" @checkbox-change="onCheckOne">\r\n                            <template #operate> '),I("span",{class:"FromButton underline",onClick:l=>oe(e.row,"editRole")},"编辑",8,Je),I("span",{class:"FromButton delete",onClick:l=>oe(e.row,"deleteRole")},"删除",8,Ke),I("span",{class:"FromButton",onClick:l=>oe(e.row,"relaRole")},"关联用户",8,Xe),Q(' <el-button type="warning">Warning</el-button>\r\n                            <el-button type="danger">Danger</el-button> ')])),state:P((({slotProps:e})=>[T(S,{modelValue:e.row.Ustate,"onUpdate:modelValue":l=>e.row.Ustate=l,style:{"--el-switch-on-color":"#000000","--el-switch-off-color":"#dcdfe6"}},null,8,["modelValue","onUpdate:modelValue"]),Q(" {{ slotProps.row.Ustate }} ")])),_:1},8,["option"])])]),I("div",$e,[T(D,{height:"calc(100vh-200px)"},{default:P((()=>[el,I("div",ll,[T(s,{class:"searchBox",placeholder:"关键词搜索","prefix-icon":z(c)},null,8,["prefix-icon"]),T(n,{class:"Savebotton",onClick:ne},{default:P((()=>[j("保存")])),_:1})]),I("div",al,[T(M,{label:"全选",size:"large",modelValue:z(N),"onUpdate:modelValue":a[0]||(a[0]=e=>W(N)?N.value=e:N=e),onChange:ee},null,8,["modelValue"]),T(z(A),{ref_key:"treeRef",ref:O,data:K,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:l,onCheckChange:le},null,512)])])),_:1})]),Q(" 数据弹窗（新增角色、角色分类、编辑角色分类） "),T(z(h),{class:Z("onfooter"),visible:o.operateRole.visible,dialogProp:o.operateRole.props,onCancel:a[1]||(a[1]=e=>se("addRole")),showFooter:!1},{default:P((()=>["addRole"==o.operateRole.key||"addClass"==o.operateRole.key?(w(),_(me,{key:0,onDataChange:te,keys:o.operateRole.key,setData:o.operateRole.data,onCloseDialog:se,roleClass:F.value},null,8,["keys","setData","roleClass"])):Q("v-if",!0),"editRole"==o.operateRole.key||"editClass"==o.operateRole.key?(w(),_(pe,{key:1,onDataChange:te,keys:o.operateRole.key,setData:o.operateRole.data,onCloseDialog:se,roleClass:F.value},null,8,["keys","setData","roleClass"])):Q("v-if",!0)])),_:1},8,["visible","dialogProp"]),Q(" 工具栏操作确认弹窗（关联、启用、禁用、导出、删除） "),T(z(h),{class:Z("Roles-baseDialog"),visible:o.baseRole.visible,dialogProp:o.baseRole.props,onCancel:a[2]||(a[2]=e=>se("baseRole")),onSubmit:a[3]||(a[3]=e=>(e=>{let l=t.value.fitsTablePro.getCheckboxRecords(!0);switch(e){case"RoleUse":l.forEach(((e,l)=>{e.Ustate=!0}));break;case"RoleRelation":case"RoleyExport":case"Roleremove":case"RoleClassRemove":break;case"Roledisable":l.forEach(((e,l)=>{e.Ustate=!1}));break;case"addClass":case"addRole":case"editClass":case"deleteClass":case"editRole":se("operateRole")}se("baseRole")})(o.baseRole.key))},{default:P((()=>[j(G(o.baseRole.dialogText),1)])),_:1},8,["visible","dialogProp"]),Q(" 关联用户弹窗 "),T(z(h),{class:Z("Roles-relateDialog onfooter"),visible:o.relateRole.visible,dialogProp:o.relateRole.props,showFooter:!1,onCancel:a[4]||(a[4]=e=>o.relateRole.visible=!1)},{default:P((()=>[T(ze,{onCloseDialog:se})])),_:1},8,["visible","dialogProp"])])}}}),[["__scopeId","data-v-0766ff0a"]]);export{tl as default};
