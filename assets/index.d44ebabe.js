import{l as e,F as a,D as l,R as t,x as s,G as i,H as r,A as o,I as n,J as d,K as p,L as u}from"./index.0fe8a92a.js";import{E as c,a as f}from"./el-tab-pane.8c19eb8b.js";import{y as m,c as v,Q as b,V as y,d as h,f as g,h as D,j as _,M as w,u as x,E as S,F as A,K as U,_ as C,a6 as j,o as R,i as k}from"./vxetable.dc399d9c.js";import{i as E,a as q,b as P,c as V}from"./index.5738a161.js";import"./echarts.d8b3161e.js";const z={class:"basic-info"},I={class:"info-container"},M={class:"right-box"},B={class:"avator-box"},F=["src"],N={key:1,src:"/fitsadmin/assets/avator.bb42aedd.png"};var T=e(m({__name:"BasicInfo",props:{userDetail:{type:null,required:!0}},setup(e){const d=e,p=v(),u=b({showAvator:!0,imageUrl:"",form:new a({rule:[{type:"input",field:"UserName",title:"用户名称",props:{placeholder:"请输入用户名称"},validate:[{required:!0,type:"string",message:"请输入用户名称"}]},{type:"input",field:"UserAccount",title:"用户账号",props:{placeholder:"请输入用户账号"},validate:[{required:!0,type:"string",message:"请输入用户账号"}]},{type:"datePicker",field:"birthday",title:"生日",props:{placeholder:"请选择日期"}},{type:"radio",field:"sex",title:"性别",options:[{value:"1",label:"男"},{value:"2",label:"女"},{label:"未知",value:"0"}]},{type:"input",field:"phone",title:"手机号码",props:{placeholder:"请输入手机号码"},validate:[{required:!0,type:"string",message:"请输入手机号码"},{validator:(e,a,l)=>E(a),message:"请输入正确的手机号"}]},{type:"input",field:"familynumber",title:"家庭号码",props:{placeholder:"请输入家庭号码"},validate:[{validator:(e,a,l)=>!a||q(a),message:"请输入正确的家庭号码"}]},{type:"input",field:"email",title:"电子邮件",props:{placeholder:"请输入电子邮箱"},validate:[{validator:(e,a,l)=>!a||P(a),message:"请输入正确的电子邮件"}]},{type:"input",field:"shortNum",title:"短号",props:{placeholder:"请输入短号"},validate:[{validator:(e,a,l)=>!a||V(a),message:"请输入正确的短号"}]}],option:{form:{labelPosition:"top",inline:!0},submitBtn:{innerText:"保存基本信息"},onSubmit:()=>{!async function(){const e=p.value.fApi.formData(),{Message:a,RetCode:i}=await l(e);i===t.SUCCESS&&s.success(a)}()}},col:2})}),{form:c,showAvator:f,imageUrl:m}=y(u);async function j(e){const{Message:a,RetCode:l,ReturnData:i}=await r(e.file);l===t.SUCCESS&&(s.success(a),m.value=i.headUrl)}function R(e){return"image/jpeg"!==e.type?(s.error("只能上传jpg格式文件！"),!1):!(e.size/1024/1024>2)||(s.error("文件大小不能超过2M"),!1)}return h((()=>d.userDetail),(e=>{p.value.fApi.setValue(e)})),window.onresize=()=>{document.documentElement.clientWidth>1157?f.value=!0:f.value=!1},(e,a)=>{const l=o,t=n;return g(),D("div",z,[_("div",I,[w(x(i),{form:x(c),ref_key:"FormRef",ref:p},null,8,["form"]),S(_("div",M,[w(t,{class:"avatar-uploader","show-file-list":!1,"before-upload":R,"http-request":j},{default:U((()=>[_("div",B,[x(m)?(g(),D("img",{key:0,src:x(m),class:"avatar"},null,8,F)):(g(),D("img",N))]),w(l,null,{default:U((()=>[C(" 上传头像 ")])),_:1})])),_:1})],512),[[A,x(f)]])])])}}}),[["__scopeId","data-v-967a0486"]]);const J={class:"organization"};var K=e(m({__name:"Organization",props:{userDetail:{type:null,required:!0}},setup(e){const r=e,o=v(null),n=b(new a({rule:[{type:"input",field:"office",title:"办公室",props:{placeholder:"请输入办公室"}},{type:"input",field:"officenumber",title:"办公号码",props:{placeholder:"请输入办公号码"},validate:[{validator:(e,a,l)=>!a||(q(a)||E(a)),message:"请输入正确的手机号或固话"}]},{type:"tree-search",component:j(d),field:"Department",name:"organization",title:"组织机构",props:{options:new p({select:{class:"mySelect",placeholder:"请选择组织机构"},input:{elementProps:{class:"myInput",placeholder:"部门搜索"}},tree:{class:"myTree",nodeKey:"id",defaultExpandAll:!1,data:[{id:"1",label:"总经办",children:[{id:"4",label:"业务部",children:[{id:"9",label:"业务A部"},{id:"11",label:"业务B部"}]}]},{id:"21",label:"研发部",children:[{id:"5",label:"研发1部"},{id:"6",label:"研发2部"}]},{id:"3",label:"财务部",children:[{id:"7",label:"财务1部"},{id:"8",label:"财务2部"}]}]}})}},{type:"select",field:"UserTag",title:"用户标签",props:{filterable:!0,placeholder:"请选择用户标签"},options:[{value:"1",label:"选项1"},{value:"2",label:"选项2"}]},{type:"datePicker",field:"onJobDate",title:"入职日期",props:{placeholder:"请选择入职日期"}},{type:"datePicker",field:"offJobDate",title:"离职日期",props:{placeholder:"请选择离职日期"}}],option:{form:{labelPosition:"top",inline:!0},submitBtn:{innerText:"保存信息"},onSubmit:e=>{!async function(){const e=o.value.fApi.formData(),{Message:a,RetCode:i}=await l(e);i===t.SUCCESS&&s.success(a)}()}},col:2}));return h((()=>r.userDetail),(e=>{o.value.fApi.setValue(e)})),(e,a)=>(g(),D("div",J,[w(x(i),{form:n,ref_key:"FormRef",ref:o},null,8,["form"])]))}}),[["__scopeId","data-v-7c2fce82"]]);const G={class:"user-container"},H=m({__name:"index",setup(e){const a=b({activeName:"info",userDetail:{}}),{activeName:l,userDetail:t}=y(a);return R((()=>{!async function(){const{ReturnData:e}=await u({});t.value=e}()})),(e,a)=>{const s=c,i=f;return g(),D("div",G,[w(i,{modelValue:x(l),"onUpdate:modelValue":a[0]||(a[0]=e=>k(l)?l.value=e:null),"tab-position":"left",class:"demo-tabs"},{default:U((()=>[w(s,{label:"基本信息",name:"info"},{default:U((()=>[w(T,{userDetail:x(t)},null,8,["userDetail"])])),_:1}),w(s,{label:"组织关系",name:"reladddtion"},{default:U((()=>[w(K,{userDetail:x(t)},null,8,["userDetail"])])),_:1})])),_:1},8,["modelValue"])])}}});export{H as default};
