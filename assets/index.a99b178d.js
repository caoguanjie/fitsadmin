import{b as e,L as l,aF as a,U as t,aG as o,au as u,aH as s,aw as r,c as n,aI as d,aJ as i,aK as v,a3 as f,E as c,aL as p,o as m,A as b,_ as g,N as y,w as h,k as w,aM as _,a2 as k,s as V,z as x,x as D,p as K,ao as F,ap as S}from"./index.0ea97641.js";import{N as C,j as $,h as P,F as U,I as j,c as R,e as T,o as q,l as I,R as A,S as B,p as E,Q as H,u as N,X as O,U as Y,m as W,P as L,ah as M,G,a6 as z,W as J,H as Q,al as X,V as Z,ac as ee,n as le,f as ae,Z as te,g as oe,ax as ue,ay as se,ak as re,L as ne}from"./vxetable.5e2aec1d.js";import{E as de}from"./el-date-picker.b0889c16.js";import{u as ie}from"./FitsTableProHook.bf67f2a4.js";import{F as ve}from"./FitsCard.c1d99023.js";import"./echarts.d8b3161e.js";import"./index.98d7b31c.js";const fe=e({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:l(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:l([Function,Array]),default:C},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},label:{type:String},teleported:a.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1}}),ce=["aria-expanded","aria-owns"],pe={key:0},me=["id","aria-selected","onClick"];const be=h(g(U({name:"ElAutocomplete",inheritAttrs:!1,props:fe,emits:{[t]:e=>$(e),[o]:e=>$(e),[u]:e=>$(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,select:e=>P(e)},setup(e,{expose:l,emit:a}){const g=e,h=s(),w=j(),_=r(),k=n("autocomplete"),V=R(),x=R(),D=R(),K=R();let F=!1,S=!1;const C=R([]),$=R(-1),P=R(""),U=R(!1),te=R(!1),oe=R(!1),ue=T((()=>k.b(String(d())))),se=T((()=>w.style)),re=T((()=>(C.value.length>0||oe.value)&&U.value)),ne=T((()=>!g.hideLoading&&oe.value)),de=T((()=>V.value?Array.from(V.value.$el.querySelectorAll("input")):[])),ie=async()=>{await le(),re.value&&(P.value=`${V.value.$el.offsetWidth}px`)},ve=()=>{S=!0},fe=()=>{S=!1,$.value=-1},be=i((async e=>{if(te.value)return;const l=e=>{oe.value=!1,te.value||(ae(e)?(C.value=e,$.value=g.highlightFirstItem?0:-1):y("ElAutocomplete","autocomplete suggestions must be an array"))};if(oe.value=!0,ae(g.fetchSuggestions))l(g.fetchSuggestions);else{const a=await g.fetchSuggestions(e,l);ae(a)&&l(a)}}),g.debounce),ge=e=>{const l=!!e;if(a(o,e),a(t,e),te.value=!1,U.value||(U.value=l),!g.triggerOnFocus&&!e)return te.value=!0,void(C.value=[]);be(e)},ye=e=>{var l;_.value||("INPUT"!==(null==(l=e.target)?void 0:l.tagName)||de.value.includes(document.activeElement))&&(U.value=!0)},he=e=>{a(u,e)},we=e=>{S||(U.value=!0,a("focus",e),g.triggerOnFocus&&!F&&be(String(g.modelValue)))},_e=e=>{S||a("blur",e)},ke=()=>{U.value=!1,a(t,""),a("clear")},Ve=async()=>{re.value&&$.value>=0&&$.value<C.value.length?Ke(C.value[$.value]):g.selectWhenUnmatched&&(a("select",{value:g.modelValue}),C.value=[],$.value=-1)},xe=e=>{re.value&&(e.preventDefault(),e.stopPropagation(),De())},De=()=>{U.value=!1},Ke=async e=>{a(o,e[g.valueKey]),a(t,e[g.valueKey]),a("select",e),C.value=[],$.value=-1},Fe=e=>{if(!re.value||oe.value)return;if(e<0)return void($.value=-1);e>=C.value.length&&(e=C.value.length-1);const l=x.value.querySelector(`.${k.be("suggestion","wrap")}`),a=l.querySelectorAll(`.${k.be("suggestion","list")} li`)[e],t=l.scrollTop,{offsetTop:o,scrollHeight:u}=a;o+u>t+l.clientHeight&&(l.scrollTop+=u),o<t&&(l.scrollTop-=u),$.value=e,V.value.ref.setAttribute("aria-activedescendant",`${ue.value}-item-${$.value}`)};return v(K,(()=>{re.value&&De()})),q((()=>{V.value.ref.setAttribute("role","textbox"),V.value.ref.setAttribute("aria-autocomplete","list"),V.value.ref.setAttribute("aria-controls","id"),V.value.ref.setAttribute("aria-activedescendant",`${ue.value}-item-${$.value}`),F=V.value.ref.hasAttribute("readonly")})),l({highlightedIndex:$,activated:U,loading:oe,inputRef:V,popperRef:D,suggestions:C,handleSelect:Ke,handleKeyEnter:Ve,focus:()=>{var e;null==(e=V.value)||e.focus()},blur:()=>{var e;null==(e=V.value)||e.blur()},close:De,highlight:Fe}),(e,l)=>(I(),A(N(b),{ref_key:"popperRef",ref:D,visible:N(re),placement:e.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[N(k).e("popper"),e.popperClass],teleported:e.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${N(k).namespace.value}-zoom-in-top`,persistent:"",onBeforeShow:ie,onShow:ve,onHide:fe},{content:B((()=>[E("div",{ref_key:"regionRef",ref:x,class:H([N(k).b("suggestion"),N(k).is("loading",N(ne))]),style:O({[e.fitInputWidth?"width":"minWidth"]:P.value,outline:"none"}),role:"region"},[Y(N(f),{id:N(ue),tag:"ul","wrap-class":N(k).be("suggestion","wrap"),"view-class":N(k).be("suggestion","list"),role:"listbox"},{default:B((()=>[N(ne)?(I(),W("li",pe,[Y(N(c),{class:H(N(k).is("loading"))},{default:B((()=>[Y(N(p))])),_:1},8,["class"])])):(I(!0),W(L,{key:1},M(C.value,((l,a)=>(I(),W("li",{id:`${N(ue)}-item-${a}`,key:a,class:H({highlighted:$.value===a}),role:"option","aria-selected":$.value===a,onClick:e=>Ke(l)},[G(e.$slots,"default",{item:l},(()=>[z(J(l[e.valueKey]),1)]))],10,me)))),128))])),_:3},8,["id","wrap-class","view-class"])],6)])),default:B((()=>[E("div",{ref_key:"listboxRef",ref:K,class:H([N(k).b(),e.$attrs.class]),style:O(N(se)),role:"combobox","aria-haspopup":"listbox","aria-expanded":N(re),"aria-owns":N(ue)},[Y(N(m),Q({ref_key:"inputRef",ref:V},N(h),{"model-value":e.modelValue,onInput:ge,onChange:he,onFocus:we,onBlur:_e,onClear:ke,onKeydown:[l[0]||(l[0]=X(Z((e=>Fe($.value-1)),["prevent"]),["up"])),l[1]||(l[1]=X(Z((e=>Fe($.value+1)),["prevent"]),["down"])),X(Ve,["enter"]),X(De,["tab"]),X(xe,["esc"])],onMousedown:ye}),ee({_:2},[e.$slots.prepend?{name:"prepend",fn:B((()=>[G(e.$slots,"prepend")]))}:void 0,e.$slots.append?{name:"append",fn:B((()=>[G(e.$slots,"append")]))}:void 0,e.$slots.prefix?{name:"prefix",fn:B((()=>[G(e.$slots,"prefix")]))}:void 0,e.$slots.suffix?{name:"suffix",fn:B((()=>[G(e.$slots,"suffix")]))}:void 0]),1040,["model-value","onKeydown"])],14,ce)])),_:3},8,["visible","placement","popper-class","teleported","transition"]))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/autocomplete/src/autocomplete.vue"]]));const ge=e=>(ue("data-v-6d0666e0"),e=e(),se(),e),ye=ge((()=>E("i",{class:"vxe-icon-add"},null,-1))),he=ge((()=>E("span",{class:"redStar"},"*",-1))),we=ge((()=>E("i",{class:"vxe-icon-delete"},null,-1))),_e={class:"dataBox"};var ke=w(U({__name:"DynamicTable",setup(e){const l=R(),a=R([]),t=R({}),o=R(),u=R(),s=R(),{fitsTablePro:r}=ie({keepSource:!0,columns:[{field:"add",title:"操作",width:80,slots:{default:"addDefault"}},{field:"project",title:"项目",slots:{default:"projectDefault",header:"requiredHeader"}},{field:"batch",title:"批次/迭代",slots:{default:"batchDefault",header:"requiredHeader"}},{field:"type",title:"工时类型",slots:{default:"typeDefault"}},{field:"task",title:"任务内容",slots:{default:"taskDefault",header:"requiredHeader"}},{field:"responsible",title:"责任人",slots:{default:"responsibleDefault",header:"requiredHeader"}},{field:"reviewer",title:"工时审核人",slots:{default:"reviewerDefault"}},{field:"startdate",title:"计划开始",slots:{default:"startdateDefault"}},{field:"enddate",title:"计划完成",slots:{default:"enddateDefault"}},{field:"delete",title:"操作",width:80,slots:{default:"deleteDefault"}}],data:[{project:"",batch:"",type:"",task:"",responsible:"",reviewer:"",startdate:"",enddate:""},{project:"",batch:"",type:"",task:"",responsible:"",reviewer:"",startdate:"",enddate:""},{project:"",batch:"",type:"",task:"",responsible:"",reviewer:"",startdate:"",enddate:""}],align:"center",toolbarConfig:{slots:{buttons:"buttons"}},rowConfig:{keyField:"rowKey",useKey:!0},columnConfig:{useKey:!0}},s),n=R([{value:"丰德开发框架项目"},{value:"2019年领床路径系统二期产品"},{value:"2019年领床路径系统一期产品"},{value:"开发组"},{value:"2022年特种机电设备检测"},{value:"健康档案系统"},{value:"2021年资产管理系统"},{value:"2023Vue升级"}]),d=(e,l)=>{l(e?n.value.filter((l=>-1!==l.value.toLowerCase().indexOf(e))):n.value)},i=R([{label:".net core开原框架研究",value:"0"},{label:"Fits Framework",value:"1"},{label:"PC后台管理网站",value:"2"},{label:"混合app-ionic5",value:"3"},{label:"辅助工具",value:"4"},{label:"新PC前端框架研发",value:"5"}]),v=R([{label:"项目管理",value:"0"},{label:"售前支持",value:"1"},{label:"需求分析",value:"2"},{label:"系统设计",value:"3"},{label:"功能开发",value:"4"}]),f=R([{label:"李小白",value:"0"},{label:"王辉",value:"1"},{label:"张冰冰",value:"2"},{label:"李萌萌",value:"3"},{label:"白静",value:"4"}]),c=te({project:[{required:!0,message:"请选择项目",trigger:"change"}],task:[{required:!0,message:"请输入任务内容",trigger:"change"}],batch:[{required:!0,message:"请选择批次",trigger:"change"}],responsible:[{required:!0,message:"请选择责任人",trigger:"change"}],startdate:[{validator:g,type:"date",trigger:"change"}],enddate:[{validator:g,type:"date",trigger:"change"}]});function p(){s.value.fitsTablePro.insertAt({project:"",batch:"",type:"",task:"",responsible:"",reviewer:"",startdate:"",enddate:""},-1),a.value=s.value.fitsTablePro.getTableData().tableData}function b(e,a){o.value=e.rowKey;const s="dateFormRef_"+e.rowKey+a.id;if(u.value=s,void 0===t.value[e.rowKey]?t.value[e.rowKey]={[a.field]:e[a.field]}:t.value[e.rowKey][a.field]=e[a.field],t.value[e.rowKey]&&void 0!==t.value[e.rowKey].startdate&&void 0!==t.value[e.rowKey].enddate){const t=s.split("_"),o="startdate"===a.field?Number(t.slice(-1))+1:Number(t.slice(-1))-1,u=`dateFormRef_${e.rowKey}col_${o}`;l.value.refs[u].validate()}}function g(e,l,a,u,s){if(t.value[o.value]&&l)if(t.value[o.value]&&t.value[o.value].startdate&&t.value[o.value].enddate)if(_(t.value[o.value].startdate).isBefore(t.value[o.value].enddate))a();else{const l="startdate"===e.field?"不得大于结束时间":"不得小于开始时间";a(new Error(l))}else a();else a()}function y(){a.value=s.value.fitsTablePro.getTableData().tableData}function h(){let e=0,a=0,t=0,o=0;for(let u in l.value.refs)-1!==u.indexOf("requiredFormRef_")&&null!==l.value.refs[u]&&a++,-1!==u.indexOf("dateFormRef_")&&null!==l.value.refs[u]&&o++;for(let u in l.value.refs)-1!==u.indexOf("requiredFormRef_")&&null!==l.value.refs[u]&&l.value.refs[u].validate(((l,a)=>{l&&e++})),-1!==u.indexOf("dateFormRef_")&&null!==l.value.refs[u]&&l.value.refs[u].validate(((l,u)=>{l&&(t++,e===a&&t===o&&V({message:"保存成功",type:"success"}))}))}return q((()=>{l.value=oe()})),(e,l)=>{const t=x,o=be,u=D,n=K,g=F,w=S,_=m,V=de;return I(),W(L,null,[Y(N(k),{option:N(r),ref_key:"xGrid",ref:s},{buttons:B((()=>[Y(t,{onClick:y},{default:B((()=>[z(" 获取数据 ")])),_:1}),Y(t,{onClick:h},{default:B((()=>[z(" 保存 ")])),_:1})])),addDefault:B((()=>[Y(t,{onClick:p},{default:B((()=>[ye])),_:1})])),requiredHeader:B((({slotProps:{column:e}})=>[he,E("span",null,J(e.title),1)])),projectDefault:B((({slotProps:{row:e,column:l}})=>[(I(),A(n,{ref:"requiredFormRef_"+e.rowKey+l.id,model:e,rules:c,key:e.rowKey},{default:B((()=>[Y(u,{prop:"project"},{default:B((()=>[Y(o,{modelValue:e.project,"onUpdate:modelValue":l=>e.project=l,placeholder:"请输入","fetch-suggestions":d,clearable:""},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1032,["model","rules"]))])),batchDefault:B((({slotProps:{row:e,column:l}})=>[(I(),A(n,{ref:"requiredFormRef_"+e.rowKey+l.id,model:e,rules:c,key:e.rowKey},{default:B((()=>[Y(u,{prop:"batch"},{default:B((()=>[Y(w,{modelValue:e.batch,"onUpdate:modelValue":l=>e.batch=l},{default:B((()=>[(I(!0),W(L,null,M(i.value,(e=>(I(),A(g,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1032,["model","rules"]))])),typeDefault:B((({slotProps:{row:e}})=>[Y(u,null,{default:B((()=>[Y(w,{modelValue:e.type,"onUpdate:modelValue":l=>e.type=l},{default:B((()=>[(I(!0),W(L,null,M(v.value,(e=>(I(),A(g,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),taskDefault:B((({slotProps:{row:e,column:l}})=>[(I(),A(n,{ref:"requiredFormRef_"+e.rowKey+l.id,model:e,rules:c,key:e.rowKey},{default:B((()=>[Y(u,{prop:"task"},{default:B((()=>[Y(_,{modelValue:e.task,"onUpdate:modelValue":l=>e.task=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1032,["model","rules"]))])),responsibleDefault:B((({slotProps:{row:e,column:l}})=>[(I(),A(n,{ref:"requiredFormRef_"+e.rowKey+l.id,model:e,rules:c,key:e.rowKey},{default:B((()=>[Y(u,{prop:"responsible"},{default:B((()=>[Y(w,{modelValue:e.responsible,"onUpdate:modelValue":l=>e.responsible=l},{default:B((()=>[(I(!0),W(L,null,M(f.value,(e=>(I(),A(g,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1032,["model","rules"]))])),reviewerDefault:B((({slotProps:{row:e}})=>[Y(u,null,{default:B((()=>[Y(w,{modelValue:e.reviewer,"onUpdate:modelValue":l=>e.reviewer=l},{default:B((()=>[(I(!0),W(L,null,M(f.value,(e=>(I(),A(g,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),startdateDefault:B((({slotProps:{row:e,column:l}})=>[(I(),A(n,{ref:"dateFormRef_"+e.rowKey+l.id,model:e,rules:c,key:e.rowKey},{default:B((()=>[Y(u,{prop:"startdate"},{default:B((()=>[Y(V,{modelValue:e.startdate,"onUpdate:modelValue":l=>e.startdate=l,"value-format":"YYYY-MM-DD",onChange:a=>b(e,l)},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1024)])),_:2},1032,["model","rules"]))])),enddateDefault:B((({slotProps:{row:e,column:l}})=>[(I(),A(n,{ref:"dateFormRef_"+e.rowKey+l.id,model:e,rules:c,key:e.rowKey},{default:B((()=>[Y(u,{prop:"enddate"},{default:B((()=>[Y(V,{modelValue:e.enddate,"onUpdate:modelValue":l=>e.enddate=l,"value-format":"YYYY-MM-DD",onChange:a=>b(e,l)},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1024)])),_:2},1032,["model","rules"]))])),deleteDefault:B((({slotProps:{row:e}})=>[Y(t,{onClick:l=>function(e){s.value.fitsTablePro.remove(e),a.value=s.value.fitsTablePro.getTableData().tableData}(e)},{default:B((()=>[we])),_:2},1032,["onClick"])])),_:1},8,["option"]),E("div",_e," 表格数据： "+J(a.value),1)],64)}}}),[["__scopeId","data-v-6d0666e0"]]);const Ve={class:"dynamic-table"},xe={class:"content"},De={class:"right"},Ke={class:"menu"},Fe=(e=>(ue("data-v-406c096a"),e=e(),se(),e))((()=>E("div",{class:"menu-title"},"此页内容",-1))),Se=["id","onClick"],Ce=U({name:"DynamicTable"});var $e=w(U({...Ce,setup(e){const l=R([]),a=te({num:0});let t=0;const o={callback:function(e){l.value=e},selectors:["h1","h2"],exceptSelector:"[un-nav]",listenScroll:!0};const u=e=>{if(null!==t)s(t);else if(null===t)for(let t=0;t<l.value.length;t++){let o=document.getElementById("menuItem"+t);l.value[t].pos.top<=e.scrollTop+l.value[0].pos.top&&o&&(a.num=t)}},s=e=>{for(let a=0;a<l.value.length;a++){let l=document.getElementById("menuItem"+a);e!==a&&l&&(l.className="defaultStyle")}setTimeout((()=>{t=null}),100)};return(e,r)=>{const n=f,d=re("outline");return I(),W("div",Ve,[Y(n,{class:"left",onScroll:u,always:""},{default:B((()=>[ne((I(),W("div",xe,[Y(ve,{title:"动态表格",desc:"动态表格展示了表单＋表格的结合使用。\n                表格内部的渲染器主要是通过表格插槽实现的。"},{default:B((()=>[Y(ke)])),_:1})])),[[d,o]])])),_:1}),E("div",De,[E("div",Ke,[Fe,(I(!0),W(L,null,M(l.value,((e,l)=>(I(),W("div",{class:H([{active:a.num===l},"defaultStyle"]),key:l,id:"menuItem"+l,onClick:Z((o=>function(e,l){t=l,a.num=l,e.scrollIntoView({block:"start",inline:"nearest"}),s(t)}(e.el,l)),["stop"])},J(e.title),11,Se)))),128))])])])}}}),[["__scopeId","data-v-406c096a"]]);export{$e as default};
