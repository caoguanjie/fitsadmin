import{l as t,aR as e,p as a,C as o,A as l,a7 as r}from"./index.0fe8a92a.js";import{E as i}from"./el-date-picker.ee056f1b.js";import{y as n,c as d,o as s,q as c,Y as A,f as u,J as m,K as k,j as C,M as B,u as I,O as v,h as f,H as g,a8 as D,G as E,i as p,al as h,am as M}from"./vxetable.dc399d9c.js";import{a$ as w,b0 as J,a_ as y}from"./main.4010e80d.js";import"./echarts.d8b3161e.js";import"./index.98d7b31c.js";import"./preact.module.050a3720.js";const Y={class:"cal-container-task",id:"cal-container-task"},x={id:"dialogBox",class:"dialog-contain-style dialogBox"},Q={class:"my-header2"},S={class:"headerTitle"},O={class:"titleWeek"},T={class:"titleDate"},b=["src"],H={class:"item-title"},N={key:0,class:"item-detail"},U={key:1,class:"item-detail"},G=(t=>(h("data-v-738f85ae"),t=t(),M(),t))((()=>C("div",{class:"card",id:"cal2"},null,-1))),R={id:"picker",style:{visibility:"hidden"}},Z=n({name:"taskView"});var j=t(n({...Z,setup(t){const n=d();let h,M,Z,j=d(),V=d(!1),L=0,F={date:"",week:""},K=d(),z=d(!1);const P=new URL("data:image/png;base64,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",self.location).href;let W=d([{title:"工时",detail:"2h"},{title:"任务",detail:"任务内容任务内容任务内容任务内容任务内容任务内容任务内容任务内容"},{title:"工作内容",detail:"工作内容工作内容工作内容工作内容工作内容"}]);const X=t=>{switch(t){case"1":return"一";case"2":return"二";case"3":return"三";case"4":return"四";case"5":return"五";case"6":return"六";case"7":return"七";case"8":return"八";case"9":return"九";case"10":return"十";case"11":return"十一";case"12":return"十二"}};let q={locale:"zh-cn",initialView:"dayGridMonth",initialDate:e().format("YYYY-MM-DD"),plugins:[w,J],headerToolbar:{left:"PrevButton",center:"TitleButton",right:"NextButton"},contentHeight:"auto",businessHours:{daysOfWeek:[1,2,3,4,5],startTime:"00:00:00",endTime:"24:00:00"},events:[{id:"1",resourceId:"1",title:"5h 任务1",start:"2022-09-28",end:"2022-09-28",backgroundColor:"rgb(200 212 249)",textColor:"#666666"},{id:"2",resourceId:"2",title:"5h 任务2",start:"2022-10-04",end:"2022-10-04",backgroundColor:"rgb(200 212 249)",textColor:"#666666"},{id:"3",resourceId:"3",title:"5h 任务3",start:"2022-10-10",end:"2022-10-10",backgroundColor:"rgb(200 212 249)",textColor:"#666666"},{id:"3",resourceId:"3",title:"5h 任务3-1",start:"2022-10-10",end:"2022-10-10",backgroundColor:"rgb(200 212 249)",textColor:"#666666"},{id:"3",resourceId:"3",title:"5h 任务3-2",start:"2022-10-10",end:"2022-10-10",backgroundColor:"rgb(200 212 249)",textColor:"#666666"},{id:"3",resourceId:"3",title:"5h 任务3-3",start:"2022-10-10",end:"2022-10-10",backgroundColor:"rgb(200 212 249)",textColor:"#666666"},{id:"4",resourceId:"4",title:"4h 休年假",start:"2022-10-20",end:"2022-10-20",backgroundColor:"rgba(255, 153, 0, 0.16)",textColor:"#999999"}],eventBorderColor:"#ffffff00",slotLabelInterval:{hours:24},dayMaxEvents:3,schedulerLicenseKey:"GPL-My-Project-Is-Open-Source",customButtons:{PrevButton:{text:"< "+X(e().add(-1,"M").format("M"))+e().format("月,YYYY"),click:function(){tt("prev")}},NextButton:{text:X(e().add(1,"M").format("M"))+e().format("月,YYYY")+" >",click:function(){tt("next")}},TitleButton:{text:X(e().format("M"))+e().format("月,YYYY")}},dayCellClassNames:t=>t.isToday?["isDate","isToday"]:["isDate"],dayCellContent(t){$(t)},dayCellDidMount(t){et(t)},eventClick(t){at(t)},moreLinkContent(t){t.text="展开"+t.num+"个工时"}};s((()=>{var t;M=document.getElementById("cal2"),h=new y(M,q),h.render();let e=document.getElementsByClassName("click_date"),a=null==(t=document.querySelector(".fc-TitleButton-button"))?void 0:t.parentNode;null==a||a.appendChild(e[0])})),c((()=>{document.body.removeEventListener("click",_,!1)})),A((()=>{document.removeEventListener("click",_,!0)}));const _=t=>{t.target.closest(".cal2-popover")||(ot(),document.removeEventListener("click",_,!0))},$=t=>{let a=e(t.date).format("DD");t.dayNumberText=a},tt=t=>{var a;ot(),lt(),h.destroy();let o=e(h.currentData.currentDate).format("月,YYYY");K.value="","prev"==t?(q.initialDate=e(h.currentData.currentDate).add(-1,"M").format("YYYY-MM-DD"),q.customButtons.NextButton.text=X(e(h.currentData.currentDate).format("M"))+o+" >",q.customButtons.TitleButton.text=X(e(h.currentData.currentDate).add(-1,"M").format("M"))+o,q.customButtons.PrevButton.text="< "+X(e(h.currentData.currentDate).add(-2,"M").format("M"))+o):(q.initialDate=e(h.currentData.currentDate).add(1,"M").format("YYYY-MM-DD"),q.customButtons.NextButton.text=X(e(h.currentData.currentDate).add(2,"M").format("M"))+o+" >",q.customButtons.TitleButton.text=X(e(h.currentData.currentDate).add(1,"M").format("M"))+o,q.customButtons.PrevButton.text="< "+X(e(h.currentData.currentDate).format("M"))+o),h=new y(M,q),h.render();let l=null==(a=document.querySelector(".fc-TitleButton-button"))?void 0:a.parentNode;null==l||l.appendChild(Z[0])},et=t=>{let a=t.el.children[0].children[0];if(6==Number(e(t.date).format("DD"))){let t="<div style='display:flex'><div class='lack'>缺</div></div>";a.innerHTML+=t}else if(14==Number(e(t.date).format("DD"))){let t="<div style='display:flex'><div class='work'>加</div></div>";a.innerHTML+=t}else if(20==Number(e(t.date).format("DD"))){let t="<div style='display:flex'><div class='vacation'>休</div></div>";a.innerHTML+=t}if(2==Number(e(t.date).format("DD"))){let e="<div>"+('<div class="tipboxClass">'+'<div class="tipOutClass"><div class="tipClass">!</div></div>'+"</div>")+'<div class="tipTextClass">未填写</div>'+"</div>";t.el.childNodes[0].children[1].innerHTML+=e}},at=t=>{document.body.addEventListener("click",_,!0),F.date=e(t.event.start).format("DD"),F.week="周"+X(e(t.event.start).day().toString()),V.value=!0;let a=t.el.getBoundingClientRect(),o=t.jsEvent.clientX,l=a.bottom-137+L,r=document.getElementById("cal-container-task"),i=null==r?void 0:r.getBoundingClientRect().height;i&&l+276>i+L&&(l-=l+276-(i+L)),j.value={modifiers:[{name:"offset",options:{offset:[o,l]}}]}},ot=()=>{V.value=!1},lt=()=>{Z=document.getElementsByClassName("click_date");let t=document.getElementById("picker");null==t||t.appendChild(Z[0])};let rt;const it=t=>{rt&&clearTimeout(rt),rt=setTimeout((()=>{L=t.scrollTop}),100)};return(t,d)=>{const s=a,c=o,A=l,w=i,J=r;return u(),m(J,{onScroll:it,always:""},{default:k((()=>[C("div",Y,[B(c,{"popper-class":"cal2-popover","virtual-ref":n.value,visible:I(V),"show-arrow":!1,"popper-options":I(j),width:"350px","virtual-triggering":""},{default:k((()=>[C("div",x,[C("div",Q,[C("div",S,[C("div",O,v(I(F).week),1),C("div",T,v(I(F).date),1)]),C("img",{class:"dialong-button",src:I(P),onClick:ot},null,8,b)]),(u(!0),f(g,null,D(I(W),((t,e)=>(u(),f("div",{class:"item",key:e},[C("div",H,v(t.title),1),"string"!=typeof t.detail||I(z)?"string"==typeof t.detail&&I(z)?(u(),f("div",U,[B(s,{modelValue:t.detail,"onUpdate:modelValue":e=>t.detail=e},null,8,["modelValue","onUpdate:modelValue"])])):E("v-if",!0):(u(),f("div",N,v(t.detail),1))])))),128))])])),_:1},8,["virtual-ref","visible","popper-options"]),B(A,{ref_key:"buttonRef",ref:n,style:{height:"0",visibility:"hidden"}},null,512),G,C("div",R,[B(w,{class:"click_date",modelValue:I(K),"onUpdate:modelValue":d[0]||(d[0]=t=>p(K)?K.value=t:K=t),type:"date",placeholder:"请选择日期",onChange:d[1]||(d[1]=t=>(()=>{var t;ot(),lt();let a=e(K.value).format("月,YYYY");h.destroy(),q.initialDate=e(K.value).format("YYYY-MM-DD"),q.customButtons.TitleButton.text=X(e(K.value).format("M"))+a,q.customButtons.NextButton.text=X(e(K.value).add(1,"M").format("M"))+a+" >",q.customButtons.PrevButton.text="< "+X(e(K.value).add(-1,"M").format("M"))+a,h=new y(M,q),h.render();let o=null==(t=document.querySelector(".fc-TitleButton-button"))?void 0:t.parentNode;null==o||o.appendChild(Z[0])})())},null,8,["modelValue"])])])])),_:1})}}}),[["__scopeId","data-v-738f85ae"]]);export{j as default};
