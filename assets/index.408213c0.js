import{y as e,c as A,ar as l,d as t,o as a,v as i,X as o,f as s,h as r,j as d,N as n,u as c,i as p,H as u,K as f,L as g,M as m,F as v,_ as R,G as h,A as b,n as C,an as E,ao as I,a7 as y,S as Q,ac as x}from"./vxetable.d7bee61f.js";import{g as L,a as B}from"./system.582bdff5.js";import{c as k,n as P,_ as w,y as T}from"./index.30d84996.js";import{s as U,f as D,d as q,F as G,g as F,c as M,h as S,i as W}from"./index.5f391711.js";import{u as j}from"./FitsTableProHook.5425d7a7.js";import{i as V}from"./index.5738a161.js";import"./echarts.d8b3161e.js";import"./moment.9709ab41.js";const N={class:"relate-user"},H={class:"relate-content"},Y={class:"relateLeft"},Z={class:"leftTree"},z={class:"search"},J={class:"tree_list"},O={class:"custom-tree-node"},K=["src"],X=["src"],_={class:"leftTable"},$={class:"scrollContent"},ee={class:"tableContent"},Ae={class:"tableBottom"},le={key:0,class:"title"},te={key:1,class:"title"},ae={class:"list"},ie={class:"relateRight"},oe=(e=>(E("data-v-7572a904"),e=e(),I(),e))((()=>d("div",{class:"title"},"分配角色",-1))),se={class:"relate-bottom"};var re=w(e({__name:"userList",emits:["closeDialog"],setup(e,{expose:E,emit:I}){const{user:y}=k();let Q=A();E(Q);let x={img1:new URL("data:image/png;base64,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",self.location).href,img2:new URL("/fitsadmin/assets/yingyerenyuan.8e601937.png",self.location).href};const w={keepSource:!0,showOverflow:"tooltip",id:"toolbar_demo_2",rowConfig:{height:40,isCurrent:!0},storage:{enabled:!0,key:"userList",dataBase:y.userInfo.id},importConfig:{},exportConfig:{},pagerConfig:{enabled:!0},align:"center",columns:[{field:"Checkbox",type:"checkbox",title:"多选",minWidth:50},{field:"Indexes",title:"序号",type:"seq",minWidth:50},{field:"name",title:"用户名称",minWidth:80},{field:"account",title:"用户账号",minWidth:80},{field:"mobiTel",title:"手机号码",minWidth:100},{field:"sex",title:"性别",minWidth:50}],toolbarConfig:{slots:{buttons:"buttons"}},proxyConfig:{form:!0,autoLoad:!0,ajax:{query:({form:e},A)=>new Promise((e=>{L(A,{pageIndex:10,pageSize:20}).then((A=>{const{ReturnData:t}=A;e(t?{result:l.toTreeArray(t.TableList,{clear:!0}),page:{total:t.ItemCount}}:{result:[],page:{total:0}})}))}))}}},{fitsTablePro:T}=j(w,Q);let G=A(""),F=A(),M=A();const S={children:"children",lable:"label"},W=A();t(G,(e=>{W.value.filter(e)}));const V=(e,A)=>!e||A.name.includes(e),re=e=>{e.children||C((()=>{Q.value.fitsTablePro.commitProxy("query")})),de.value=""};let de=A();const ne=()=>{let e=Q.value.fitsTablePro.getCheckboxRecords();de.value=e},ce=()=>{let e=Q.value.fitsTablePro.getCheckboxRecords();de.value=e};t(F,(e=>{fe.value.filter(e)}));const pe=(e,A)=>!e||A.label.includes(e),ue=[],fe=A(),ge=[{id:1,label:"销售人员",children:[{id:11,label:"销售人员1"},{id:12,label:"销售人员2"}]},{id:2,label:"销售人员"},{id:3,label:"服务人员",children:[{id:31,label:"服务人员1"},{id:32,label:"服务人员2"}]},{id:4,label:"服务人员",children:[{id:41,label:"服务人员1"},{id:42,label:"服务人员2"}]},{id:5,label:"服务人员",children:[]},{id:6,label:"服务人员"}],me=()=>{ve.value?ge.forEach((e=>{fe.value.setChecked(e,!0,!0)})):fe.value.setCheckedNodes([])};let ve=A(!1);const Re=(e,A,l)=>{let t=0;ue.forEach(((e,A)=>{fe.value.getNode(e).checked?(t++,t==ue.length-1&&(t=0,ve.value=!0)):(t=0,ve.value=!1)}))},he=e=>("children"in e&&e.children.forEach((e=>he(e))),ue.push(e.id),e.id),be=e=>{"cancel"===e?(de.value="",Q.value.fitsTablePro.setAllCheckboxRow(!1)):(Q.value.fitsTablePro.commitProxy("query"),de.value="",Q.value.fitsTablePro.setAllCheckboxRow(!1)),I("closeDialog",!1)},Ce=A("");function Ee(e){var A;Ce.value=e,null==(A=Q.value)||A.fitsTablePro.commitProxy("query")}function Ie(e){Ce.value=e}return a((async()=>{(async()=>{const e=await B();M.value=e.ReturnData.TableList})(),ge.forEach((e=>{he(e)}))})),i((()=>{Q=null})),(e,A)=>{const l=o("el-input"),t=o("el-tag"),a=o("el-scrollbar"),i=o("el-checkbox"),E=o("el-button");return s(),r("div",N,[d("div",H,[d("div",Y,[d("div",Z,[d("div",z,[n(l,{modelValue:c(G),"onUpdate:modelValue":A[0]||(A[0]=e=>p(G)?G.value=e:G=e),placeholder:"搜索部门","prefix-icon":c(U)},null,8,["modelValue","prefix-icon"])]),d("div",J,[n(c(P),{data:c(M),"highlight-current":"","node-key":"treeData.id",props:S,"default-expand-all":"",onNodeClick:re,ref_key:"treeRef",ref:W,"filter-node-method":V},{default:u((({node:e,data:A})=>[d("span",O,[A.children&&A.children.length>0&&A.pid?(s(),r("img",{key:0,src:c(x).img1,style:{color:"#FFCA28"}},null,8,K)):f("v-if",!0),A.children?f("v-if",!0):(s(),r("img",{key:1,class:"people",src:c(x).img2,style:{color:"#ACC6D3"}},null,8,X)),g(" "+m(A.name),1)])])),_:1},8,["data"])])]),d("div",_,[d("div",$,[d("div",ee,[n(c(q),{ref_key:"xGrid",ref:Q,"max-height":"400",option:c(T),onCheckboxAll:ne,onCheckboxChange:ce},{buttons:u((()=>[n(c(D),{onInputSearch:Ee,onInputChange:Ie})])),_:1},8,["option"])]),n(a,{height:"140px",class:b("scrollPart")},{default:u((()=>{var e;return[d("div",Ae,[(null==(e=c(de))?void 0:e.length)?(s(),r("div",le,"已选用户:"+m(c(de).length)+"人",1)):(s(),r("div",te,"已选用户:0人")),d("div",ae,[(s(!0),r(v,null,R(c(de),(e=>(s(),h(t,{key:e,class:"mx-1",closable:"","disable-transitions":!1,onClose:A=>(e=>{de.value.splice(de.value.indexOf(e),1),C((()=>{Q.value.fitsTablePro.setCheckboxRow(e,!1)}))})(e)},{default:u((()=>[g(m(e.name),1)])),_:2},1032,["onClose"])))),128))])])]})),_:1})])])]),d("div",ie,[oe,n(l,{modelValue:c(F),"onUpdate:modelValue":A[1]||(A[1]=e=>p(F)?F.value=e:F=e),placeholder:"搜索部门","prefix-icon":c(U)},null,8,["modelValue","prefix-icon"]),n(i,{modelValue:c(ve),"onUpdate:modelValue":A[2]||(A[2]=e=>p(ve)?ve.value=e:ve=e),onChange:me},{default:u((()=>[g("全选")])),_:1},8,["modelValue"]),n(c(P),{data:ge,ref_key:"treeref",ref:fe,"show-checkbox":"","node-key":"id",props:S,onCheckChange:Re,"filter-node-method":pe,"default-expand-all":""},null,512)])]),d("div",se,[n(E,{class:"relate-button",onClick:A[3]||(A[3]=e=>be("cancel"))},{default:u((()=>[g("取消")])),_:1}),n(E,{class:"relate-button",type:"primary",onClick:A[4]||(A[4]=e=>be("submit"))},{default:u((()=>[g("提交")])),_:1})])])}}}),[["__scopeId","data-v-7572a904"]]);const de=["onClick"],ne=["onClick"],ce=(e=>(E("data-v-bd6a426a"),e=e(),I(),e))((()=>d("span",null,"更多",-1))),pe={class:"btn"},ue={class:"btn"};var fe=w(e({__name:"userManage",setup(e,{expose:t}){const{user:a}=k();let p=A();t({xGrid:p});const{setting:f}=k();let R="dialog"===f.formType?2:1,h=A();new URL("data:image/png;base64,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",self.location).href,new URL("/fitsadmin/assets/yingyerenyuan.8e601937.png",self.location).href;let E=A(!0);const I={keepSource:!1,showOverflow:"tooltip",id:"userManageTable",rowConfig:{height:52,isCurrent:!0},storage:{enabled:!0,key:"SystemManageUserList",dataBase:a.userInfo.id},formConfig:{items:[{field:"name",span:3,title:"用户名",itemRender:{name:"input",props:{placeholder:"请输入用户名"}}},{field:"mobiTel",span:3,title:"手机号码",itemRender:{name:"input",props:{placeholder:"请输入手机号"}}},{field:"status",span:3,title:"用户状态",itemRender:{name:"ElSelect",props:{collapseTags:!0,collapseTagsTooltip:!0,clearable:!0},options:[{value:"2",label:"在职"},{value:"3",label:"离职"},{value:"4",label:"挂起"},{value:"5",label:"已关闭"}]}},{field:"tap",span:3,title:"用户标签",itemRender:{name:"ElSelect",props:{collapseTags:!0,collapseTagsTooltip:!0,clearable:!0},options:[{value:"2",label:"项目私立"}]}},{field:"department",span:3,title:"上级机构",itemRender:{name:"ElSelect",props:{collapseTags:!0,collapseTagsTooltip:!0,clearable:!0},options:[{value:"2",label:"检测机构"},{value:"3",label:"供应商"},{value:"4",label:"客户"},{value:"5",label:"运维商"}]}}]},importConfig:{},exportConfig:{},pagerConfig:{enabled:!0},columns:[{field:"Checkbox",type:"checkbox",title:"多选",minWidth:50},{field:"Indexes",title:"序号",type:"seq",minWidth:50},{field:"name",title:"用户名称",minWidth:80},{field:"account",title:"用户账号",minWidth:80},{field:"mobiTel",title:"手机号码",minWidth:100},{field:"sex",title:"性别",minWidth:50},{field:"department",title:"上级机构",minWidth:80},{field:"tap",title:"用户标签",width:100,align:"center",slots:{default:e=>y("div",{style:"overflow: hidden; text-overflow: ellipsis; white-space: nowrap; width: 100%;text-align:center"},[y("span",{style:"display:block;background: #ecf5ff;padding: 8px; color: #007dff; border-radius: 2px;padding: 0 2px;border:1px solid #79BBFF;"},e.row.tap)])}},{field:"status",title:"用户状态",slots:{default:"status"},minWidth:80,align:"center"},{field:"comeDate",title:"入职时间",minWidth:100},{field:"Operation",title:"操作",slots:{default:"operate"},fixed:"right",minWidth:150}],toolbarConfig:{buttons:[{code:"AddUser",name:"新建用户",status:"primary",onClick:()=>{alert(1)}},{code:"RelateUser",name:"关联角色"},{code:"EnableUser",name:"启用"},{code:"DisableUser",name:"禁用"},{code:"DeleteUser",name:"批量删除"}],tools:{enabled:!0}},tooltipConfig:{contentMethod:({column:e,row:A})=>{const{field:l}=e;if("department"===l)return A[l]}},proxyConfig:{form:!0,autoLoad:!0,ajax:{query:({form:e})=>new Promise((A=>{L(e,{pageIndex:10,pageSize:20}).then((e=>{const{ReturnData:t}=e;A(t?{result:l.toTreeArray(t.TableList,{clear:!0}),page:{total:t.ItemCount}}:{result:[],page:{total:0}})}))}))}}},{fitsTablePro:B}=j(I,p),P={async toolbarButtonClick({code:e}){let A=p.value.fitsTablePro.getCheckboxRecords();switch(e){case"AddUser":w.visible=!0,w.dialogProp.title="新增部门";break;case"RelateUser":H.value=!0;break;case"EnableUser":A.length?(Z.visible=!0,Z.dialogText="是否确定启用选中的用户?",Z.key="EnableUser"):T({message:"未选中启用的相关用户",type:"error"});break;case"DisableUser":A.length?(Z.visible=!0,Z.dialogText="是否确定禁用选中的用户?",Z.key="DisableUser"):T({message:"未选中禁用的相关用户",type:"error"});break;case"DeleteUser":A.length?(Z.visible=!0,Z.dialogText="是否确定删除选中的用户?",Z.key="DeleteUser"):T({message:"未选中删除的相关用户",type:"error"})}}},w=Q({visible:!1,forms:[{title:"用户信息",iconClass:"user",form:new G({rule:[{type:"input",field:"name",title:"用户名称",props:{placeholder:"请输入"},validate:[{required:!0,type:"string",message:"请输入用户名称"}]},{type:"input",field:"account",title:"用户账号",props:{placeholder:"请输入"},validate:[{required:!0,type:"string",message:"请输入用户账号"}]},{type:"input",field:"mobiTel",title:"手机号码",props:{placeholder:"请输入"},validate:[{required:!0,type:"string",message:"请输入手机号码"},{validator:(e,A)=>V(A),message:"请输入正确的手机号"}]},{type:"input",field:"pwd",title:"初始密码",props:{type:"password",placeholder:"请输入"},effect:{required:"请输入原始密码"}},{type:"input",field:"number",title:"电话",props:{placeholder:"请输入"}},{type:"datePicker",field:"birth",title:"生日",props:{placeholder:"请选择"}},{type:"input",field:"email",title:"邮件",props:{placeholder:"请输入"}},{type:"radio",field:"sex",title:"性别",options:[{value:"男",label:"男"},{value:"女",label:"女"}]},{type:"input",field:"shortNum",title:"短号",props:{placeholder:"请输入"}},{type:"radio",field:"status",title:"状态",options:[{value:0,label:"启用"},{value:1,label:"禁用"}]}],option:{form:{labelPosition:"right",inline:!0},submitBtn:!1,resetBtn:!1},col:R})},{title:"组织关系",iconClass:"fits-system",form:new G({rule:[{type:"title",field:"department",title:"所属部门",component:x(F),props:{options:new M({select:{placeholder:"请选择",clearable:!0},input:{placeholder:"部门搜索"},tree:{nodeKey:"id",defaultExpandAll:!1,data:[{id:"1",label:"总经办",children:[{id:"4",label:"业务部",children:[{id:"9",label:"业务A部"},{id:"11",label:"业务B部"}]}]},{id:"21",label:"研发部",children:[{id:"5",label:"研发1部"},{id:"6",label:"研发2部"}]},{id:"3",label:"财务部",children:[{id:"7",label:"财务1部"},{id:"8",label:"财务2部"}]}],checkStrictly:!0}})},validate:[{required:!0,message:"请选择",trigger:"change"}]},{type:"datePicker",field:"comeDate",title:"入职日期",props:{placeholder:"请选择"},validate:[{required:!0,type:"string",message:"请选择入职日期"}]},{type:"input",field:"office",title:"办公室",props:{placeholder:"请输入"}},{type:"input",field:"offiTel",title:"办公号码",props:{placeholder:"请输入"}},{type:"datePicker",field:"leaveDate",title:"离职日期",props:{placeholder:"请选择"}},{type:"select",field:"tap",title:"用户标签",props:{filterable:!0,placeholder:"请选择"},options:[{value:"项目私立",label:"项目私立"},{value:"项目私立1",label:"项目私立1"},{value:"项目私立2",label:"项目私立2"}]}],option:{form:{labelPosition:"right",inline:!0},submitBtn:!1,resetBtn:!1},col:R})}],dialogProp:{title:"新增用户",width:"60%"},formType:f.formType});let U=A();const D=async e=>{if(!0===E.value){p.value.fitsTablePro.insert(e),w.visible=!1}else{const A=p.value.fitsTablePro;let l=A.reactData.tableData,t=l.findIndex((e=>e.id===U.value.id));l.splice(t,1,e),A.loadData(l),w.visible=!1}C((()=>{p.value.fitsTablePro.commitProxy("query")}))};function N(){w.visible=!1,E.value=!0}let H=A(!1);const Y=Q({title:"关联角色",width:"85%"}),Z=Q({dialogText:"",key:"",visible:!1,props:{title:"",width:"30%"}}),z=()=>{Z.visible=!1,p.value.fitsTablePro.setAllCheckboxRow(!1)},J=e=>{H.value=!1};return i((()=>{p.value=null})),(e,A)=>{const l=o("el-button"),t=o("el-popover"),a=o("el-switch");return s(),r(v,null,[n(c(q),{ref_key:"xGrid",ref:p,option:c(B),"grid-events":P},{operate:u((({slotProps:e})=>[d("span",{onClick:A=>{return l=e.row,w.dialogProp.title="编辑用户",w.visible=!0,E.value=!1,C((()=>{h.value.formRef.forEach((e=>{e.fApi.setValue(l)}))})),void(U.value=l);var l}},"编辑",8,de),d("span",{onClick:A=>(async e=>{Z.dialogText="是否确定删除选中的用户?",Z.visible=!0})(e.row)},"删除",8,ne),n(t,{trigger:"hover",placement:"bottom","popper-class":"tag-popover"},{reference:u((()=>[ce])),default:u((()=>[d("div",pe,[n(l,null,{default:u((()=>[g("分配权限")])),_:1})]),d("div",ue,[n(l,null,{default:u((()=>[g("重置密码")])),_:1})])])),_:1})])),status:u((({slotProps:e})=>[n(a,{modelValue:e.row.status,"onUpdate:modelValue":A=>e.row.status=A,"active-value":0,"inactive-value":1,style:{"--el-switch-on-color":"#020202","--el-switch-off-color":"#dcdfe6"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["option"]),n(c(S),{option:w,onSubmit:D,onCancel:N,class:"dialogFormExample",ref_key:"formtypeRef",ref:h},null,8,["option"]),n(c(W),{visible:c(H),dialogProp:Y,class:"relate",showFooter:!1},{default:u((()=>[n(re,{onCloseDialog:J})])),_:1},8,["visible","dialogProp"]),n(c(W),{visible:Z.visible,class:b("Users-baseDialog"),dialogProp:Z.props,onCancel:z,onSubmit:A[0]||(A[0]=e=>(e=>{const A=p.value;let l=p.value.fitsTablePro.getCheckboxRecords(!0);switch(e){case"EnableUser":l.forEach((e=>{e.status=0})),C((()=>{A.fitsTablePro.commitProxy("query")}));break;case"DisableUser":l.forEach((e=>{e.status=1})),C((()=>{A.fitsTablePro.commitProxy("query")}));break;case"DeleteUser":A.fitsTablePro.remove(l),C((()=>{A.fitsTablePro.commitProxy("query")}))}z()})(Z.key))},{default:u((()=>[g(m(Z.dialogText),1)])),_:1},8,["visible","dialogProp"])],64)}}}),[["__scopeId","data-v-bd6a426a"]]);const ge={class:"user-manage"},me={class:"left"},ve={class:"search"},Re={class:"tree_list"},he={class:"custom-tree-node"},be=["src"],Ce=["src"],Ee={class:"right"},Ie=e({name:"User"});var ye=w(e({...Ie,setup(e){let l={img1:new URL("data:image/png;base64,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",self.location).href,img2:new URL("/fitsadmin/assets/yingyerenyuan.8e601937.png",self.location).href},i=A(""),v=A();const R={children:"children",lable:"label"};let h=A();const b=(e,A)=>!e||A.name.includes(e),E=A();t(i,(e=>{E.value.filter(e)}));const I=e=>{e.children||C((()=>{h.value.xGrid.fitsTablePro.commitProxy("query")}))};return a((async()=>{(async()=>{const e=await B();v.value=e.ReturnData.TableList})()})),(e,A)=>{const t=o("el-input"),a=o("el-scrollbar");return s(),r("div",ge,[d("div",me,[d("div",ve,[n(t,{modelValue:c(i),"onUpdate:modelValue":A[0]||(A[0]=e=>p(i)?i.value=e:i=e),placeholder:"搜索部门","prefix-icon":c(U)},null,8,["modelValue","prefix-icon"])]),d("div",Re,[n(a,null,{default:u((()=>[n(c(P),{data:c(v),"highlight-current":"","node-key":"id",props:R,"default-expand-all":"",onNodeClick:I,ref_key:"treeRef",ref:E,"filter-node-method":b},{default:u((({node:e,data:A})=>[d("span",he,[A.children&&A.children.length>0&&A.pid?(s(),r("img",{key:0,src:c(l).img1,style:{color:"#FFCA28"}},null,8,be)):f("v-if",!0),A.children?f("v-if",!0):(s(),r("img",{key:1,class:"people",src:c(l).img2,style:{color:"#ACC6D3"}},null,8,Ce)),g(" "+m(A.name),1)])])),_:1},8,["data"])])),_:1})])]),d("div",Ee,[n(fe,{ref_key:"user",ref:h},null,512)])])}}}),[["__scopeId","data-v-3aec6d18"]]);export{ye as default};
